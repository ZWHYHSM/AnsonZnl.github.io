<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Anson&#39;s Blog</title>
  
  <subtitle>ç§ä¸€æ£µæ ‘æœ€å¥½çš„æ—¶é—´åœ¨åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨ã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-11-30T08:34:10.269Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>å¼ å®ä¹</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä½¿ç”¨Promiseå°è£…å°ç¨‹åºwx.request</title>
    <link href="http://yoursite.com/2019/11/30/%E4%BD%BF%E7%94%A8Promise%E5%B0%81%E8%A3%85%E5%B0%8F%E7%A8%8B%E5%BA%8Fwx.request/"/>
    <id>http://yoursite.com/2019/11/30/ä½¿ç”¨Promiseå°è£…å°ç¨‹åºwx.request/</id>
    <published>2019-11-30T08:20:14.000Z</published>
    <updated>2019-11-30T08:34:10.269Z</updated>
    
    <content type="html"><![CDATA[<p>å› ä¸ºä¸šåŠ¡éœ€è¦ï¼Œæ¯ä¸ªhttpè¯·æ±‚éƒ½è¦åŠ ä¸Šä¸€ä¸ªè¯·æ±‚å¤´ï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½è¦å†™å¾ˆå¤šé‡å¤çš„ä»£ç ã€‚</p><p>ç°åœ¨å°è¯•æŠŠwx.requestç®€å•çš„å°è£…äº†ä¸€ä¸‹ï¼Œè°ƒç”¨ä¸€ä¸ªrequestæ–¹æ³•ï¼Œæ¯æ¬¡è¯·æ±‚è‡ªåŠ¨æºå¸¦headerå¤´ä¿¡æ¯ï¼Œè¿™æ ·å°±çœäº‹å¤šäº†ï¼ŒåŒ…å«äº†å¸¸è§çš„get post put delete å››ç§è¯·æ±‚æ–¹æ³•ï¼Œæ”¯æŒPromiseæ–¹å¼è°ƒç”¨ã€‚</p><h2 id="å°è£…ä»£ç "><a href="#å°è£…ä»£ç " class="headerlink" title="å°è£…ä»£ç "></a>å°è£…ä»£ç </h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">class request &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    this._baseUrl = &apos;https://xxx.com/api&apos;;</span><br><span class="line">    this._token = wx.getStorageSync(&apos;token&apos;);</span><br><span class="line">    this._header = &#123;&apos;Authorization&apos;: &apos;Bearer &apos; + token&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * GETç±»å‹çš„ç½‘ç»œè¯·æ±‚</span><br><span class="line">   */</span><br><span class="line">  getRequest(url, data, header = this._header) &#123;</span><br><span class="line">    return this.requestAll(url, data, header, &apos;GET&apos;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * DELETEç±»å‹çš„ç½‘ç»œè¯·æ±‚</span><br><span class="line">   */</span><br><span class="line">  deleteRequest(url, data, header = this._header) &#123;</span><br><span class="line">    return this.requestAll(url, data, header, &apos;DELETE&apos;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * PUTç±»å‹çš„ç½‘ç»œè¯·æ±‚</span><br><span class="line">   */</span><br><span class="line">  putRequest(url, data, header = this._header) &#123;</span><br><span class="line">    return this.requestAll(url, data, header, &apos;PUT&apos;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * POSTç±»å‹çš„ç½‘ç»œè¯·æ±‚</span><br><span class="line">   */</span><br><span class="line">  postRequest(url, data, header = this._header) &#123;</span><br><span class="line">    return this.requestAll(url, data, header, &apos;POST&apos;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * ç½‘ç»œè¯·æ±‚</span><br><span class="line">   */</span><br><span class="line">  requestAll(url, data, header, method) &#123;</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">      wx.request(&#123;</span><br><span class="line">        url: this._baseUrl + url,</span><br><span class="line">        data: data,</span><br><span class="line">        header: header,</span><br><span class="line">        method: method,</span><br><span class="line">        success: (res =&gt; &#123;</span><br><span class="line">          if (res.statusCode === 200) &#123;</span><br><span class="line">            //200: æœåŠ¡ç«¯ä¸šåŠ¡å¤„ç†æ­£å¸¸ç»“æŸ</span><br><span class="line">            resolve(res)</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            //å…¶å®ƒé”™è¯¯ï¼Œæç¤ºç”¨æˆ·é”™è¯¯ä¿¡æ¯</span><br><span class="line">            reject(res)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">        fail: (res =&gt; &#123;</span><br><span class="line">          reject(res)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default request</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><p>åœ¨app.jsä¸­å¼•å…¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import request from &apos;./request.js&apos;</span><br><span class="line">App(&#123;</span><br><span class="line">  myRequest()&#123;</span><br><span class="line">    return new request();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ç„¶ååœ¨è¦ä½¿ç”¨çš„é¡µé¢é‡Œå¼•å…¥ä½¿ç”¨å³å¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const app = getApp();//æ–°å»ºé¡µé¢æ—¶ é»˜è®¤å¼•å…¥</span><br><span class="line">const ajax = app.myRequest();//åˆå§‹åŒ–ä¸€ä¸ªçš„request() å®ä¾‹</span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">  data:&#123;&#125;,</span><br><span class="line">  onLoad()&#123;</span><br><span class="line">    this.getData();  </span><br><span class="line">  &#125;,</span><br><span class="line">  getData()&#123;</span><br><span class="line">    ajax.getRequest(&apos;/getList&apos;,&#123;id: 1024&#125;).then((res)=&gt;&#123;</span><br><span class="line">      console.log(res);</span><br><span class="line">    &#125;).catch((err)=&gt;&#123;</span><br><span class="line">      console.log(err);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨æ–¹æ³•ä¹Ÿæ˜¯å¼‚å¸¸ç®€å•</p><ul><li>æ¯”å¦‚Getè¯·æ±‚å°±æ˜¯ï¼š<code>ajax.getRequest(url: String, data: Object);</code></li><li>æ¯”å¦‚Postè¯·æ±‚å°±æ˜¯ï¼š<code>ajax.postRequest(url: String, data: Object);</code></li><li>â€¦</li></ul><p>å‚è€ƒï¼š<br><a href="https://juejin.im/post/5b050e5651882542816aabfa" target="_blank" rel="noopener">å°è£…wx.request</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å› ä¸ºä¸šåŠ¡éœ€è¦ï¼Œæ¯ä¸ªhttpè¯·æ±‚éƒ½è¦åŠ ä¸Šä¸€ä¸ªè¯·æ±‚å¤´ï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½è¦å†™å¾ˆå¤šé‡å¤çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨å°è¯•æŠŠwx.requestç®€å•çš„å°è£…äº†ä¸€ä¸‹ï¼Œè°ƒç”¨ä¸€ä¸ªrequestæ–¹æ³•ï¼Œæ¯æ¬¡è¯·æ±‚è‡ªåŠ¨æºå¸¦headerå¤´ä¿¡æ¯ï¼Œè¿™æ ·å°±çœäº‹å¤šäº†ï¼ŒåŒ…å«äº†å¸¸è§çš„get post put delete
      
    
    </summary>
    
    
      <category term="å°ç¨‹åº" scheme="http://yoursite.com/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨å°ç¨‹åºä¸­è°ƒç”¨APIåœ¨å°ç¨‹åºä¸­è‡ªå®šä¹‰å¼¹çª—ç»„ä»¶</title>
    <link href="http://yoursite.com/2019/11/30/%E5%9C%A8%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%B9%E7%AA%97%E7%BB%84%E4%BB%B6/"/>
    <id>http://yoursite.com/2019/11/30/åœ¨å°ç¨‹åºä¸­è‡ªå®šä¹‰å¼¹çª—ç»„ä»¶/</id>
    <published>2019-11-30T08:20:14.000Z</published>
    <updated>2019-11-30T08:32:58.086Z</updated>
    
    <content type="html"><![CDATA[<p>å› ä¸ºä¸šåŠ¡éœ€è¦åœ¨å°ç¨‹åºé‡ŒåŠ ä¸Šå¾ˆå¤šçš„å¼¹çª—ï¼Œå°±æƒ³å†™ä¸€ä¸ªç»„ä»¶æ¥å®ç°ï¼›</p><h2 id="åˆ›å»ºç»„ä»¶"><a href="#åˆ›å»ºç»„ä»¶" class="headerlink" title="åˆ›å»ºç»„ä»¶"></a>åˆ›å»ºç»„ä»¶</h2><ol><li>æ–°å»ºæ–‡ä»¶å¤¹<code>component</code>ä¸“é—¨æ”¾ç»„ä»¶ï¼Œ</li><li>æ–°å»ºpopupé¡µé¢ï¼Œåœ¨popup.jsonä¸­è®¾ç½®ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;component&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>è¡¨æ˜å®ƒæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå­ç»„ä»¶â€</p><ol start="3"><li>æ³¨æ„ï¼šåœ¨ç»„ä»¶wxssä¸­ä¸åº”ä½¿ç”¨IDé€‰æ‹©å™¨ã€å±æ€§é€‰æ‹©å™¨å’Œæ ‡ç­¾åé€‰æ‹©å™¨ã€‚ï¼ˆåªä½¿ç”¨classï¼‰<h2 id="å¦‚ä½•ä½¿ç”¨ç»„ä»¶"><a href="#å¦‚ä½•ä½¿ç”¨ç»„ä»¶" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ç»„ä»¶"></a>å¦‚ä½•ä½¿ç”¨ç»„ä»¶</h2>ä¾¿äºåŒºåˆ†ï¼Œå¼•ç”¨å­ç»„ä»¶çš„é¡µé¢æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œçˆ¶ç»„ä»¶ï¼Œâ€<br>åœ¨çˆ¶ç»„ä»¶çš„jsoné‡Œå…ˆå¼•ç”¨å­ç»„ä»¶ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;usingComponents&quot;: &#123;</span><br><span class="line">    &quot;component-tag-name&quot;: &quot;path/to/the/custom/component&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="çˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶"><a href="#çˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶" class="headerlink" title="çˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶"></a>çˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶</h2><p>å› ä¸ºè¿™ä¸ªè‡ªå®šä¹‰çš„å¼¹çª—ç»„ä»¶ä¼šåº”ç”¨äºå¾ˆå¤šä¸åŒçš„é¡µé¢ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„å¼¹çª—æ ‡é¢˜ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œè¿™å°±æ˜¯éœ€è¦çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶è‡ªå®šä¹‰æ ‡é¢˜ï¼Œä¹Ÿå°±æ˜¯å­ç»„ä»¶çš„æ ‡é¢˜åº”è¯¥ä»çˆ¶ç»„ä»¶ä¸­æ¥å—åˆ°çš„ã€‚<br>å­ç»„ä»¶é‡Œï¼š<br>wxml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;page&quot;&gt;</span><br><span class="line">  &lt;view&gt;&#123;&#123;popupTitle&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure></p><p>js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">  properties: &#123;</span><br><span class="line">    // è¿™é‡Œå®šä¹‰äº†innerTextå±æ€§ï¼Œå±æ€§å€¼å¯ä»¥åœ¨ç»„ä»¶ä½¿ç”¨æ—¶æŒ‡å®š</span><br><span class="line">    popupTitle: &#123; //å¼¹çª—æ ‡é¢˜</span><br><span class="line">      type: String,</span><br><span class="line">      value: &apos;é»˜è®¤å€¼&apos;, </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>çˆ¶ç»„ä»¶é‡Œï¼š<br>wxml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;popup popup-title=&quot;&#123;&#123;pagetitle&#125;&#125;&quot;/&gt;</span><br></pre></td></tr></table></figure></p><p>js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  data: &#123;</span><br><span class="line">    pagetitle: &apos;æˆ‘æ˜¯é¡µé¢æ ‡é¢˜&apos;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>. åœ¨å­ç»„ä»¶ä¸­è‡ªå®šä¹‰å€¼æ˜¯ä»¥å°é©¼å³°çš„å½¢å¼ä¹¦å†™çš„ï¼Œä½†æ˜¯åœ¨çˆ¶ç»„ä»¶ä¼ çš„æ—¶å€™è¦ä»¥â€œ-â€è¿æ¥ã€‚</p><h2 id="å­ç»„ä»¶æ”¹å˜çˆ¶ç»„ä»¶çš„å€¼"><a href="#å­ç»„ä»¶æ”¹å˜çˆ¶ç»„ä»¶çš„å€¼" class="headerlink" title="å­ç»„ä»¶æ”¹å˜çˆ¶ç»„ä»¶çš„å€¼"></a>å­ç»„ä»¶æ”¹å˜çˆ¶ç»„ä»¶çš„å€¼</h2><p>è¿™ä¸ªç»„ä»¶çš„æ˜¾ç¤ºå’Œéšè—éƒ½æ˜¯åœ¨çˆ¶ç»„ä»¶å†³å®šçš„ï¼Œä½†æ˜¯å› ä¸ºæˆ‘è¿™æ˜¯ä¸€ä¸ªå…¨å±çš„å¼¹çª—ï¼Œè¦†ç›–äº†æ•´ä¸ªå±å¹•ï¼Œæ‰€ä»¥æƒ³è¦å…³é—­å¼¹æ¡†åªèƒ½æƒ³åŠæ³•åœ¨å­ç»„ä»¶çš„ç‚¹å‡»äº‹ä»¶ä¸Šæƒ³åŠæ³•ã€‚<br>åŸºæœ¬é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š<br>æ“ä½œæµç¨‹ï¼šæ‰“å¼€é¡µé¢- ç‚¹å‡»å¼¹æ¡†ï¼ˆå¼¹å‡ºå­ç»„ä»¶ï¼‰- ç‚¹å‡»å…³é—­ï¼ˆç‚¹å‡»å­ç»„ä»¶å…³é—­å¼¹çª—ï¼‰<br>æ•°æ®æµç¨‹ï¼šæ‰“å¼€é¡µé¢-ç‚¹å‡»å¼¹æ¡†ï¼ˆä¼ å…¥å¼¹çª—æ ‡é¢˜ã€ç‚¹èµæˆåŠŸç»“æœã€å…¶ä»–å‚æ•°ï¼‰-ç‚¹å‡»å…³é—­ï¼ˆåœ¨çˆ¶ç»„ä»¶ä¸Šè‡ªå®šä¹‰ç»„ä»¶ï¼Œç„¶åå­ç»„ä»¶å…³é—­æŒ‰é’®ç›‘å¬onTapäº‹ä»¶ï¼Œç‚¹å‡»å­ç»„ä»¶å…³é—­æŒ‰é’®æ—¶ï¼Œä¼šé€šçŸ¥çˆ¶ç»„ä»¶å»æ”¹å˜çŠ¶æ€ï¼‰</p><p>é€»è¾‘ï¼š</p><ol><li>åœ¨å­ç»„ä»¶ä¸­ç»™è¦è§¦å‘çš„å…ƒç´ åŠ   bindtap = â€˜onTapâ€™</li><li>ç„¶åé€šè¿‡åœ¨methodä¸­è®¾ç½®onTapå‡½æ•°</li><li>åœ¨onTapä¸­çš„triggerEventä¸­è®¾ç½®è¦è§¦å‘çˆ¶ç»„ä»¶äº‹ä»¶çš„å‡½æ•°åç§°</li><li>çˆ¶ç»„ä»¶æ¥æ”¶åˆ°å­—ç»„ä»¶çš„æ¶ˆæ¯ï¼Œç„¶åè§¦å‘äº‹ä»¶</li></ol><p>å…·ä½“å‚è€ƒï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/events.html" target="_blank" rel="noopener">å°ç¨‹åº-ç»„ä»¶é€šä¿¡</a></p><p>å­ç»„ä»¶ï¼š<br>wxml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;hide-btn&quot; bindtap=&quot;onTap&quot;&gt;Ã—&lt;/view&gt;</span><br></pre></td></tr></table></figure></p><p>js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123; //æ”¾è‡ªå®šä¹‰çš„æ–¹æ³•</span><br><span class="line">  onTap: function () &#123;</span><br><span class="line">    var myEventDetail = &#123;&#125; // detailå¯¹è±¡ï¼Œæä¾›ç»™äº‹ä»¶ç›‘å¬å‡½æ•°</span><br><span class="line">    var myEventOption = &#123;&#125; // è§¦å‘äº‹ä»¶çš„é€‰é¡¹</span><br><span class="line">    console.log(`å­ç»„ä»¶ï¼š&apos;å‘çˆ¶ç»„ä»¶å‘é€é€šçŸ¥ï¼Œæˆ‘è¦å…³é—­å¼¹çª—&apos;`)</span><br><span class="line">    this.triggerEvent(&apos;hidepopop&apos;, myEventDetail, myEventOption)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>çˆ¶ç»„ä»¶<br>wxml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  &lt;popup </span><br><span class="line">bindhidepopop=&quot;hidePopop&quot; </span><br><span class="line">is-show-popup=&quot;&#123;&#123;isShowPopup&#125;&#125;&quot; </span><br><span class="line">popup-title=&quot;&#123;&#123;popupTitle&#125;&#125;&quot; </span><br><span class="line">popup-content=&quot;&#123;&#123;popupContent&#125;&#125;&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure></p><p>js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hidePopop: function(e) &#123;</span><br><span class="line">  console.log(e.detail) // è‡ªå®šä¹‰ç»„ä»¶è§¦å‘äº‹ä»¶æ—¶æä¾›çš„detailå¯¹è±¡</span><br><span class="line">  console.log(&apos;çˆ¶ç»„ä»¶ï¼šæˆ‘æ¥å—åˆ°äº†å­ç»„ä»¶çš„å…³é—­å¼¹çª—çš„é€šçŸ¥ï¼&apos;);</span><br><span class="line">  this.setData(&#123;</span><br><span class="line">    isShowPopup: true</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å‚è€ƒ<a href="[https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/">å°ç¨‹åº-è‡ªå®šä¹‰ç»„ä»¶</a><br>)<br>ä»£ç åœ°å€ï¼š<a href="https://github.com/AnsonZnl/wx-component-popup" target="_blank" rel="noopener">https://github.com/AnsonZnl/wx-component-popup</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å› ä¸ºä¸šåŠ¡éœ€è¦åœ¨å°ç¨‹åºé‡ŒåŠ ä¸Šå¾ˆå¤šçš„å¼¹çª—ï¼Œå°±æƒ³å†™ä¸€ä¸ªç»„ä»¶æ¥å®ç°ï¼›&lt;/p&gt;
&lt;h2 id=&quot;åˆ›å»ºç»„ä»¶&quot;&gt;&lt;a href=&quot;#åˆ›å»ºç»„ä»¶&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºç»„ä»¶&quot;&gt;&lt;/a&gt;åˆ›å»ºç»„ä»¶&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;æ–°å»ºæ–‡ä»¶å¤¹&lt;code&gt;compone
      
    
    </summary>
    
    
      <category term="å°ç¨‹åº" scheme="http://yoursite.com/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ¸…é™¤å°ç¨‹åºbuttonçš„é»˜è®¤æ ·å¼</title>
    <link href="http://yoursite.com/2019/11/30/%E6%B8%85%E9%99%A4%E5%B0%8F%E7%A8%8B%E5%BA%8Fbutton%E7%9A%84%E9%BB%98%E8%AE%A4%E6%A0%B7%E5%BC%8F/"/>
    <id>http://yoursite.com/2019/11/30/æ¸…é™¤å°ç¨‹åºbuttonçš„é»˜è®¤æ ·å¼/</id>
    <published>2019-11-30T08:20:14.000Z</published>
    <updated>2019-11-30T08:33:39.396Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å½»åº•æ¸…é™¤å°ç¨‹åºæŒ‰é’®çš„é»˜è®¤æ ·å¼"><a href="#å½»åº•æ¸…é™¤å°ç¨‹åºæŒ‰é’®çš„é»˜è®¤æ ·å¼" class="headerlink" title="å½»åº•æ¸…é™¤å°ç¨‹åºæŒ‰é’®çš„é»˜è®¤æ ·å¼"></a>å½»åº•æ¸…é™¤å°ç¨‹åºæŒ‰é’®çš„é»˜è®¤æ ·å¼</h2><p>wxmlï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button hover-class=&quot;none&quot;&gt;&lt;/button&gt;</span><br></pre></td></tr></table></figure></p><p>wxssï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">button&#123;</span><br><span class="line">  line-height: 1;</span><br><span class="line">  margin:0;</span><br><span class="line">&#125;</span><br><span class="line">button::after&#123;</span><br><span class="line">  border:none;</span><br><span class="line">&#125;</span><br><span class="line">input&#123;</span><br><span class="line">  outline:none;</span><br><span class="line">  border:none;</span><br><span class="line">  list-style: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å½»åº•æ¸…é™¤å°ç¨‹åºæŒ‰é’®çš„é»˜è®¤æ ·å¼&quot;&gt;&lt;a href=&quot;#å½»åº•æ¸…é™¤å°ç¨‹åºæŒ‰é’®çš„é»˜è®¤æ ·å¼&quot; class=&quot;headerlink&quot; title=&quot;å½»åº•æ¸…é™¤å°ç¨‹åºæŒ‰é’®çš„é»˜è®¤æ ·å¼&quot;&gt;&lt;/a&gt;å½»åº•æ¸…é™¤å°ç¨‹åºæŒ‰é’®çš„é»˜è®¤æ ·å¼&lt;/h2&gt;&lt;p&gt;wxmlï¼š&lt;br&gt;&lt;figure class
      
    
    </summary>
    
    
      <category term="å°ç¨‹åº" scheme="http://yoursite.com/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>å°ç¨‹åº-ä¸¤åˆ—ç€‘å¸ƒæµå¸ƒå±€</title>
    <link href="http://yoursite.com/2019/09/27/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8B%E7%80%91%E5%B8%83%E6%B5%81%E5%B8%83%E5%B1%80/"/>
    <id>http://yoursite.com/2019/09/27/å°ç¨‹åºä¹‹ç€‘å¸ƒæµå¸ƒå±€/</id>
    <published>2019-09-27T07:39:03.000Z</published>
    <updated>2019-09-27T08:51:20.062Z</updated>
    
    <content type="html"><![CDATA[<p>æ–°çš„è®¾è®¡å›¾æ˜¯æŒ‰ä¸¤åˆ—ç€‘å¸ƒæµæ’ç‰ˆçš„ï¼Œç±»ä¼¼äºèŠ±ç“£ç½‘é‚£ç§ã€‚çœ‹åˆ°è®¾è®¡å›¾åå°±åœ¨ç½‘ä¸Šæ‰¾ï¼Œå¦‚ä½•åœ¨å°ç¨‹åºç®€å•çš„å®ç°ï¼Œåæ¥æ‰¾åˆ°äº†ä¸€ä¸ªç‰¹åˆ«ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯åˆ©ç”¨<code>wx:if</code>å’Œæ•°ç»„çš„ä¸‹æ ‡å¯¹2å–ä½™æ¥åˆ¤æ–­æ˜¯æ’åœ¨å·¦åˆ—è¿˜æ˜¯æ’åœ¨å³åˆ—ï¼Œ<br>è¯ä¸å¤šè¯´çœ‹å›¾ä¸Šä»£ç ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-1bb1b14ccfec8a90.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="b878d9ea6545b27469595a8d88951bb.png" title="">                </div>                <div class="image-caption">b878d9ea6545b27469595a8d88951bb.png</div>            </figure></p><p>wxml:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&apos;footlist&apos;&gt;</span><br><span class="line">  &lt;view class=&quot;foot-left&quot;&gt;</span><br><span class="line">    &lt;block wx:for=&quot;&#123;&#123;list&#125;&#125;&quot; wx:key=&quot;&#123;&#123; item.id &#125;&#125;&quot;&gt;</span><br><span class="line">      &lt;view class=&apos;footbox&apos; catchtap=&apos;jumpdetail&apos; catchlongtap=&quot;deletefoot&quot; bindtouchend=&quot;touchend&quot; id=&quot;&#123;&#123;item.id&#125;&#125;&quot; wx:if=&quot;&#123;&#123;index%2==0&#125;&#125;&quot; data-cover=&quot;&#123;&#123;item.banner&#125;&#125;&quot; data-title=&quot;&#123;&#123;item.title&#125;&#125;&quot;&gt;</span><br><span class="line">        &lt;image class=&apos;cover&apos; src=&quot;&#123;&#123;item.banner&#125;&#125;&quot; mode=&quot;widthFix&quot;&gt;&lt;/image&gt;</span><br><span class="line">        &lt;view class=&quot;box-shadow&quot;&gt;</span><br><span class="line">          &lt;text class=&apos;t1&apos;&gt;&#123;&#123;item.title&#125;&#125;&lt;/text&gt;</span><br><span class="line">          &lt;view class=&apos;bot&apos;&gt;</span><br><span class="line">            &lt;view class=&apos;personbox&apos; data-userid=&quot;&#123;&#123;item.userid&#125;&#125;&quot; catchtap=&quot;toProfile&quot;&gt;</span><br><span class="line">              &lt;image src=&quot;&#123;&#123;item.userinfo.avatarurl&#125;&#125;&quot;&gt;&lt;/image&gt;</span><br><span class="line">              &lt;text class=&quot;username&quot;&gt;&#123;&#123;item.userinfo.nickName&#125;&#125; &lt;/text&gt;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">            &lt;view class=&apos;thump&apos; data-fid=&apos;&#123;&#123;item.id&#125;&#125;&apos; catchtap=&apos;thumptap&apos;&gt;</span><br><span class="line">              &lt;image class=&apos;un&apos; data-fid=&apos;&#123;&#123;item.id&#125;&#125;&apos; wx:if=&quot;&#123;&#123;item.islike==&apos;1&apos;&#125;&#125;&quot; catchtap=&apos;unthumptap&apos; src=&quot;../../images/thumph.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">              &lt;view style=&quot;color:red;&quot;&gt;â¤ &lt;/view&gt;</span><br><span class="line">              &lt;view class=&apos;thumpnum&apos;&gt;&#123;&#123;item.like&#125;&#125;&lt;/view&gt;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">          &lt;/view&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/block&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line"></span><br><span class="line">  &lt;view class=&quot;foot-right&quot;&gt;</span><br><span class="line">    &lt;block wx:for=&quot;&#123;&#123;list&#125;&#125;&quot; wx:key=&quot;&#123;&#123; item.id &#125;&#125;&quot;&gt;</span><br><span class="line">      &lt;view class=&apos;footbox&apos; catchtap=&apos;jumpdetail&apos; catchlongtap=&quot;deletefoot&quot; bindtouchend=&quot;touchend&quot; id=&quot;&#123;&#123;item.id&#125;&#125;&quot; wx:if=&quot;&#123;&#123;index%2==1&#125;&#125;&quot; data-cover=&quot;&#123;&#123;item.banner&#125;&#125;&quot; data-title=&quot;&#123;&#123;item.title&#125;&#125;&quot;&gt;</span><br><span class="line">        &lt;image class=&apos;cover&apos; src=&quot;&#123;&#123;item.banner&#125;&#125;&quot; mode=&quot;widthFix&quot;&gt;&lt;/image&gt;</span><br><span class="line">        &lt;view class=&quot;box-shadow&quot;&gt;</span><br><span class="line">          &lt;text class=&apos;t1&apos;&gt;&#123;&#123;item.title&#125;&#125;&lt;/text&gt;</span><br><span class="line">          &lt;view class=&apos;bot&apos;&gt;</span><br><span class="line">            &lt;view class=&apos;personbox&apos; data-userid=&quot;&#123;&#123;item.userid&#125;&#125;&quot; catchtap=&quot;toProfile&quot;&gt;</span><br><span class="line">              &lt;image src=&quot;&#123;&#123;item.userinfo.avatarurl&#125;&#125;&quot;&gt;&lt;/image&gt;</span><br><span class="line">              &lt;text class=&quot;username&quot;&gt;&#123;&#123;item.userinfo.nickName&#125;&#125;&lt;/text&gt;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">            &lt;view class=&apos;thump&apos; data-fid=&apos;&#123;&#123;item.id&#125;&#125;&apos; catchtap=&apos;thumptap&apos;&gt;</span><br><span class="line">              &lt;image class=&apos;un&apos; data-fid=&apos;&#123;&#123;item.id&#125;&#125;&apos; wx:if=&quot;&#123;&#123;item.islike==&apos;1&apos;&#125;&#125;&quot; catchtap=&apos;unthumptap&apos; src=&quot;../../images/thumph.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">              &lt;view style=&quot;color:red;&quot;&gt;â¤&lt;/view&gt;</span><br><span class="line">              &lt;view class=&apos;thumpnum&apos;&gt;&#123;&#123;item.like&#125;&#125;&lt;/view&gt;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">          &lt;/view&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/block&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure></p><p>js:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * é¡µé¢çš„åˆå§‹æ•°æ®</span><br><span class="line">   */</span><br><span class="line">  data: &#123;</span><br><span class="line">    list: [&#123;</span><br><span class="line">        id: 174,</span><br><span class="line">        userid: 10,</span><br><span class="line">        title: &quot;æ—¥æœ¬å²šå±±ã€å’Œæœä¸€æ—¥æ¸¸&quot;,</span><br><span class="line">        banner: &quot;https://hbimg.huabanimg.com/1ff95bdf3070e1fbff052a03ed353b409749f5ea16a809-WXy25b_fw658&quot;,</span><br><span class="line">        points: 6,</span><br><span class="line">        like: &quot;62&quot;,</span><br><span class="line">        userinfo: &#123;</span><br><span class="line">          id: 10,</span><br><span class="line">          nickName: &quot;æè¯—æº&quot;,</span><br><span class="line">          avatarurl: &quot;https://pic3.zhimg.com/80/v2-fd0a58741fdf20f256c755719f81871e_hd.jpg&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        islike: 0</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: 173,</span><br><span class="line">        userid: 9,</span><br><span class="line">        title: &quot;æ—¥æœ¬é˜¿å¯’æ¹–ä¸€æ—¥æ¸¸&quot;,</span><br><span class="line">        banner: &quot;https://hbimg.huabanimg.com/ee5bf07b84fead3d57b445d2e7fa8eb6afe827c617e9c-ha1fZH_fw658&quot;,</span><br><span class="line">        points: 7,</span><br><span class="line">        like: &quot;92&quot;,</span><br><span class="line">        userinfo: &#123;</span><br><span class="line">          id: 9,</span><br><span class="line">          nickName: &quot;å¤§é£ç‹¼&quot;,</span><br><span class="line">          avatarurl: &quot;https://pic3.zhimg.com/80/v2-fd0a58741fdf20f256c755719f81871e_hd.jpg&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        islike: 0</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: 172,</span><br><span class="line">        userid: 8,</span><br><span class="line">        title: &quot;äºŒæ¬¡ç’§å¤§ä¹±æ–—ä¸œäº¬åŠ¨æ¼«æ¸¸&quot;,</span><br><span class="line">        banner: &quot;http://img1qn.moko.cc/2019-08-12/235e9bab-046e-4fea-afc2-4a049d81774e.jpg?imageView2/2/w/915/h/915/q/85&quot;,</span><br><span class="line">        points: 4,</span><br><span class="line">        like: &quot;41&quot;,</span><br><span class="line">        userinfo: &#123;</span><br><span class="line">          id: 8,</span><br><span class="line">          nickName: &quot;é»„é£é¸¿&quot;,</span><br><span class="line">          avatarurl: &quot;https://pic3.zhimg.com/80/v2-fd0a58741fdf20f256c755719f81871e_hd.jpg&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        islike: 0</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: 100,</span><br><span class="line">        userid: 314,</span><br><span class="line">        title: &quot;å¿ƒå’Œèº«ä½“æ€»è¦æœ‰ä¸€ä¸ªåœ¨è·¯ä¸ŠğŸƒ&quot;,</span><br><span class="line">        banner: &quot;http://img.mb.moko.cc/2019-05-18/285bd040-2e62-4e1b-b0e8-91351c1f3c67.jpg?imageView2/2/w/915/h/915&quot;,</span><br><span class="line">        points: 5,</span><br><span class="line">        like: &quot;110&quot;,</span><br><span class="line">        userinfo: &#123;</span><br><span class="line">          id: 314,</span><br><span class="line">          nickName: &quot;äºŒå¤îŒ«&quot;,</span><br><span class="line">          avatarurl: &quot;https://pic3.zhimg.com/80/v2-fd0a58741fdf20f256c755719f81871e_hd.jpg&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        islike: 0</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: 99,</span><br><span class="line">        userid: 312,</span><br><span class="line">        title: &quot;æ–°ç–†ä¸¤æ—¥æ¸¸&quot;,</span><br><span class="line">        banner: &quot;http://img.mb.moko.cc/2019-04-26/d4f1905c-3952-42be-9214-72260b97b0be.jpg?imageView2/2/w/915/h/915&quot;,</span><br><span class="line">        points: 5,</span><br><span class="line">        like: &quot;99&quot;,</span><br><span class="line">        userinfo: &#123;</span><br><span class="line">          id: 312,</span><br><span class="line">          nickName: &quot;Tohsaka&quot;,</span><br><span class="line">          avatarurl: &quot;https://pic3.zhimg.com/80/v2-fd0a58741fdf20f256c755719f81871e_hd.jpg&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        islike: 0</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>wxss:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">.footlist &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  border-top-left-radius: 10rpx;</span><br><span class="line">  border-top-right-radius: 10rpx;</span><br><span class="line">  padding-top: 20rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footlist::after &#123;</span><br><span class="line">  content: &apos;&apos;;</span><br><span class="line">  clear: both;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.foot-left &#123;</span><br><span class="line">  float: left;</span><br><span class="line">  width: 50%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.foot-right &#123;</span><br><span class="line">  float: left;</span><br><span class="line">  width: 50%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footbox &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  background: #fff;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  position: relative;</span><br><span class="line">  padding: 24rpx;</span><br><span class="line">  padding-top: 10rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box-shadow &#123;</span><br><span class="line">  padding: 6rpx 10rpx 18rpx 10rpx;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  box-shadow: 0 2rpx 2rpx rgba(88, 88, 88, 0.233);</span><br><span class="line">  border-bottom-left-radius: 10rpx;</span><br><span class="line">  border-bottom-right-radius: 10rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footbox &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  background: #fff;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  position: relative;</span><br><span class="line">  padding: 24rpx;</span><br><span class="line">  padding-top: 10rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footbox image &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  border-top-left-radius: 10rpx;</span><br><span class="line">  border-top-right-radius: 10rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footbox .thump &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  width: auto;</span><br><span class="line">  height: 42rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footbox .thump image &#123;</span><br><span class="line">  width: 40rpx;</span><br><span class="line">  height: 42rpx;</span><br><span class="line">  float: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footbox .bot &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  width: 100%;</span><br><span class="line">  padding-top: 10rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footbox .bot::after &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  content: &quot;&quot;;</span><br><span class="line">  clear: both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footbox .bot .t1 &#123;</span><br><span class="line">  font-size: 30rpx;</span><br><span class="line">  color: #1f1607;</span><br><span class="line">  line-height: 1.5;</span><br><span class="line">  /* margin-left: 38rpx; */</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  width: 100%;</span><br><span class="line">  margin-top: 15rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footbox .bot .t2 &#123;</span><br><span class="line">  font-size: 28rpx;</span><br><span class="line">  color: #000;</span><br><span class="line">  line-height: 100rpx;</span><br><span class="line">  margin-left: 30rpx;</span><br><span class="line">  float: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.foot-left .footbox &#123;</span><br><span class="line">  padding-right: 12rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.personbox image &#123;</span><br><span class="line">  width: 42rpx;</span><br><span class="line">  height: 42rpx;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  background: #edaf39;</span><br><span class="line">  float: left;</span><br><span class="line">  border-top-left-radius: 10rpx;</span><br><span class="line">  border-top-right-radius: 10rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ–°çš„è®¾è®¡å›¾æ˜¯æŒ‰ä¸¤åˆ—ç€‘å¸ƒæµæ’ç‰ˆçš„ï¼Œç±»ä¼¼äºèŠ±ç“£ç½‘é‚£ç§ã€‚çœ‹åˆ°è®¾è®¡å›¾åå°±åœ¨ç½‘ä¸Šæ‰¾ï¼Œå¦‚ä½•åœ¨å°ç¨‹åºç®€å•çš„å®ç°ï¼Œåæ¥æ‰¾åˆ°äº†ä¸€ä¸ªç‰¹åˆ«ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯åˆ©ç”¨&lt;code&gt;wx:if&lt;/code&gt;å’Œæ•°ç»„çš„ä¸‹æ ‡å¯¹2å–ä½™æ¥åˆ¤æ–­æ˜¯æ’åœ¨å·¦åˆ—è¿˜æ˜¯æ’åœ¨å³åˆ—ï¼Œ&lt;br&gt;è¯ä¸å¤šè¯´çœ‹å›¾ä¸Šä»£ç ï¼š&lt;br&gt;&lt;figure 
      
    
    </summary>
    
    
      <category term="å¾®ä¿¡å°ç¨‹åº" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>å°ç¨‹åº-è’™ç‰ˆå¼¹å‡ºçª—</title>
    <link href="http://yoursite.com/2019/09/17/%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E5%AE%9E%E7%8E%B0%E8%92%99%E7%89%88%E5%BC%B9%E5%87%BA%E7%AA%97/"/>
    <id>http://yoursite.com/2019/09/17/å°ç¨‹åº-å®ç°è’™ç‰ˆå¼¹å‡ºçª—/</id>
    <published>2019-09-17T02:39:03.000Z</published>
    <updated>2019-09-17T03:40:46.105Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-2d3ed1a6fc6ce8da.gif?imageMogr2/auto-orient/strip" alt="è’™ç‰ˆå¼¹å‡ºçª—.gif" title="">                </div>                <div class="image-caption">è’™ç‰ˆå¼¹å‡ºçª—.gif</div>            </figure><p>è¯ä¸å¤šè¯´ ä¸Šä»£ç ã€‚<br>wxml:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;page&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;button bindtap=&quot;showMask&quot;&gt; å¼¹å‡º &lt;/button&gt;</span><br><span class="line">  &lt;view catchtouchmove=&quot;preventTouchMove&quot; class=&quot;alert-mask&quot; wx:if=&quot;&#123;&#123;showModal&#125;&#125;&quot;&gt;&lt;/view&gt;</span><br><span class="line">  &lt;view class=&quot;modalDlg&quot; wx:if=&quot;&#123;&#123;showModal&#125;&#125;&quot;&gt;</span><br><span class="line">    &lt;view class=&quot;modelTitle&quot;&gt;æˆ‘æ˜¯æ ‡é¢˜&lt;/view&gt;</span><br><span class="line">    &lt;view class=&quot;modeContent&quot;&gt;</span><br><span class="line">      æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹æˆ‘æ˜¯å†…å®¹</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    &lt;image class=&quot;hide-btn&quot; bindtap=&quot;hideMask&quot; src=&quot;./../images/tripDetailAlertHide.png&quot;&gt;&lt;/image&gt;  </span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure></p><p>wxss:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">/* å¼¹çª—è’™ç‰ˆ start */</span><br><span class="line">.alert-mask &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">  position: fixed;</span><br><span class="line">  top: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  background: #000;</span><br><span class="line">  z-index: 9000;</span><br><span class="line">  opacity: 0.7;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.modalDlg &#123;</span><br><span class="line">  width: 80%;</span><br><span class="line">  height: 55%;</span><br><span class="line">  position: fixed;</span><br><span class="line">  top: 45%;</span><br><span class="line">  left: -1%;</span><br><span class="line">  z-index: 9999;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  padding: 25rpx;</span><br><span class="line">  margin: -370rpx 85rpx;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  border-radius: 18rpx;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.modelTitle&#123;</span><br><span class="line">  font-size: 38rpx;</span><br><span class="line">  margin-bottom: 20rpx;</span><br><span class="line">&#125;</span><br><span class="line">.hide-btn &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 10rpx;</span><br><span class="line">  right: 10rpx;</span><br><span class="line">  width: 50rpx;</span><br><span class="line">  height: 50rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* å¼¹çª—è’™ç‰ˆ end*/</span><br></pre></td></tr></table></figure></p><p>js:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    showModal: false</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad(o) &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">    showMask: function () &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      showModal: true</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  hideMask: function () &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      showModal: false</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
    
      <category term="å¾®ä¿¡å°ç¨‹åº" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>å°ç¨‹åºä¸­å›¾ç‰‡ç‚¹å‡»å…¨å±-å¯æ»‘åŠ¨</title>
    <link href="http://yoursite.com/2019/08/27/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%9B%BE%E7%89%87%E7%82%B9%E5%87%BB%E5%85%A8%E5%B1%8F-%E5%8F%AF%E6%BB%91%E5%8A%A8/"/>
    <id>http://yoursite.com/2019/08/27/å°ç¨‹åºä¸­å›¾ç‰‡ç‚¹å‡»å…¨å±-å¯æ»‘åŠ¨/</id>
    <published>2019-08-27T07:21:55.000Z</published>
    <updated>2019-08-27T07:32:27.509Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å°ç¨‹åºä¸­ï¼Œå¦‚æœé¡µé¢ä¸­æœ‰å¤šå¼ å›¾ç‰‡ï¼Œé‚£ä¹ˆç”¨æˆ·å¯èƒ½ä¼šä¹ æƒ¯å‘åœ¨æœ‹å‹åœˆä¸­ä¸€æ ·æ‰“å¼€å›¾ç‰‡ï¼Œè¿™é‡Œå¾®ä¿¡ä¹Ÿæä¾›äº†ç±»ä¼¼çš„apiï¼Œå¯ä»¥ç›´æ¥æ‹¿æ¥å®ç°è¿™ä¸ªæ•ˆæœã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-7fc5e2b1a2180d76.gif?imageMogr2/auto-orient/strip" alt="å°ç¨‹åºå›¾ç‰‡ç‚¹å‡»å…¨å±.gif" title="">                </div>                <div class="image-caption">å°ç¨‹åºå›¾ç‰‡ç‚¹å‡»å…¨å±.gif</div>            </figure><p>wxml:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;</span><br><span class="line">  &lt;block wx:for=&quot;&#123;&#123;arrImg&#125;&#125;&quot; wx:key=&quot;&#123;&#123;key&#125;&#125;&quot;&gt;</span><br><span class="line">    &lt;image </span><br><span class="line">    src=&quot;&#123;&#123;item&#125;&#125;&quot; </span><br><span class="line">    bindtap=&apos;previewimgs&apos; </span><br><span class="line">    data-img=&quot;&#123;&#123;item&#125;&#125;&quot; </span><br><span class="line">    mode=&quot;aspectFill&quot;</span><br><span class="line">    &gt;&lt;/image&gt;</span><br><span class="line">  &lt;/block&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure></p><p>wxss:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/* perviewimg/perviewimg.wxss */</span><br><span class="line">view&#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">image&#123;</span><br><span class="line">  width: 200rpx;</span><br><span class="line">  height: 200rpx;</span><br><span class="line">  margin: 10rpx;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>js:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// perviewimg/perviewimg.js</span><br><span class="line">Page(&#123;</span><br><span class="line">  /**</span><br><span class="line">   * é¡µé¢çš„åˆå§‹æ•°æ®</span><br><span class="line">   */</span><br><span class="line">  data: &#123;</span><br><span class="line">    arrImg: [&apos;http://images.cdn.huiur.com/files/track/2019-07-16/img/img_5d2d47e38d473.jpeg-smimage&apos;,</span><br><span class="line">      &apos;http://images.cdn.huiur.com/files/track/2019-07-16/img/img_5d2d47e38d826.jpeg-smimage&apos;,</span><br><span class="line">      &apos;http://images.cdn.huiur.com/files/track/2019-07-16/img/img_5d2d47e38e924.jpeg-smimage&apos;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  previewimgs: function(e) &#123;</span><br><span class="line">    var currentImg = e.currentTarget.dataset.img;</span><br><span class="line">    console.log(currentImg);</span><br><span class="line">    wx.previewImage(&#123;</span><br><span class="line">      current: currentImg, // å½“å‰æ˜¾ç¤ºå›¾ç‰‡çš„httpé“¾æ¥ String</span><br><span class="line">      urls: this.data.arrImg // éœ€è¦é¢„è§ˆçš„å›¾ç‰‡httpé“¾æ¥åˆ—è¡¨ Array</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>å¾®ä¿¡å®˜æ–¹æ–‡æ¡£é“¾æ¥ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.previewImage.html" target="_blank" rel="noopener">åœ¨æ–°é¡µé¢ä¸­å…¨å±é¢„è§ˆå›¾ç‰‡</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨å°ç¨‹åºä¸­ï¼Œå¦‚æœé¡µé¢ä¸­æœ‰å¤šå¼ å›¾ç‰‡ï¼Œé‚£ä¹ˆç”¨æˆ·å¯èƒ½ä¼šä¹ æƒ¯å‘åœ¨æœ‹å‹åœˆä¸­ä¸€æ ·æ‰“å¼€å›¾ç‰‡ï¼Œè¿™é‡Œå¾®ä¿¡ä¹Ÿæä¾›äº†ç±»ä¼¼çš„apiï¼Œå¯ä»¥ç›´æ¥æ‹¿æ¥å®ç°è¿™ä¸ªæ•ˆæœã€‚&lt;/p&gt;
&lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lig
      
    
    </summary>
    
    
      <category term="å¾®ä¿¡å°ç¨‹åº" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>å°ç¨‹åºä¹‹iPhone xé€‚é…</title>
    <link href="http://yoursite.com/2019/08/27/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8BiPhone%20x%E9%80%82%E9%85%8D/"/>
    <id>http://yoursite.com/2019/08/27/å°ç¨‹åºä¹‹iPhone xé€‚é…/</id>
    <published>2019-08-27T07:21:55.000Z</published>
    <updated>2019-08-27T07:34:04.153Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.imooc.com/article/details/id/33529" target="_blank" rel="noopener">å‚è€ƒå°ç¨‹åºiPhone X è§†é€‚é…</a></p><p>åœ¨å¼€å‘å°ç¨‹åºæ—¶ï¼Œå¯èƒ½éœ€è¦é€‚é…iPhone x çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°åº•éƒ¨çš„æ¨ªçº¿ä¼šå‡ºç°é®æŒ¡ï¼Œè¿™æ—¶å€™å°±è¦å¤„ç†ä¸‹ï¼š</p><p>åœ¨app.jsä¸­æ·»åŠ ä¸€ä¸ªæ£€æµ‹å½“å‰è®¾å¤‡æ˜¯å¦æ˜¯iPhoneXçš„å˜é‡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">globalData: &#123;</span><br><span class="line">  userInfo: null,</span><br><span class="line">  isIphoneX: false//åˆ¤æ–­æ˜¯å¦æ˜¯iPhoneX</span><br><span class="line">&#125;,</span><br><span class="line">onShow: function() &#123;</span><br><span class="line">  var that = this;</span><br><span class="line">  wx.getSystemInfo(&#123;</span><br><span class="line">    success: function(res) &#123;</span><br><span class="line">      // console.log(&apos;æ‰‹æœºä¿¡æ¯res&apos;+res.model)  </span><br><span class="line">      let modelmes = res.model;</span><br><span class="line">      if (modelmes.search(&apos;iPhone X&apos;) != -1) &#123;</span><br><span class="line">        that.globalData.isIphoneX = true</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨éœ€è¦åšå…¼å®¹çš„xxx.jsä¸­å¼•å…¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var app= getApp();</span><br><span class="line">Page(&#123;</span><br><span class="line">data: &#123;</span><br><span class="line">  isIphoneX: false</span><br><span class="line">&#125;,</span><br><span class="line">onLoad: function()&#123;</span><br><span class="line">      // åˆ¤æ–­æ˜¯å¦ä¸ºiPhoneX</span><br><span class="line">    var isIphoneX = app.globalData.isIphoneX;</span><br><span class="line">    console.log(isIphoneX ? &apos;æ˜¯iPhoneX&apos; : &apos;ä¸æ˜¯iPhoneX&apos;)</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      isIphoneX: isIphoneX</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ç„¶ååœ¨xx.wxmlä¸­å¯¹éœ€è¦åšå…¼å®¹çš„å…ƒç´ åšåˆ¤æ–­ ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;&#123;&#123;isIphoneX ? &apos;width30&apos; : &apos;width10&apos;&#125;&#125;&quot;&gt;&lt;/view&gt;</span><br></pre></td></tr></table></figure></p><p>ç„¶ååœ¨å¯¹åº”çš„wxssé‡Œè®¾ç½®å¥½å¯¹åº”çš„ç±»åå°±ok äº†ï¼Œæ¯”è¾ƒç®€å•æ–¹ä¾¿ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.imooc.com/article/details/id/33529&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å‚è€ƒå°ç¨‹åºiPhone X è§†é€‚é…&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å¼€å‘å°ç¨‹åºæ—¶ï¼Œå¯èƒ½éœ€è¦é€‚é…iPhone
      
    
    </summary>
    
    
      <category term="å¾®ä¿¡å°ç¨‹åº" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>å°ç¨‹åºé€Ÿè®°[åŸºç¡€]</title>
    <link href="http://yoursite.com/2019/08/16/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%80%9F%E6%9F%A5/"/>
    <id>http://yoursite.com/2019/08/16/å°ç¨‹åºé€ŸæŸ¥/</id>
    <published>2019-08-16T06:49:03.000Z</published>
    <updated>2019-08-27T07:49:13.344Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å°ç¨‹åºåŸºç¡€"><a href="#å°ç¨‹åºåŸºç¡€" class="headerlink" title="å°ç¨‹åºåŸºç¡€"></a>å°ç¨‹åºåŸºç¡€</h1><h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><ul><li>project.config.json: é¡¹ç›®é…ç½®æ–‡ä»¶ app.json: å…¨å±€é…ç½®æ–‡ä»¶ page.json: é¡¹ç›®é…ç½®æ–‡ä»¶</li><li>app.json é…ç½®ç›¸å¯¹åº”é¡µé¢çš„è·¯ç”±ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œwindowçª—å£é…ç½®ï¼šï¼Œå„é¡µé¢é…ç½®ï¼šï¼Œtabæ ‡ç­¾é…ç½®</li><li>æ¯ä¸ªé¡µé¢å¯¹åº”çš„page.json ä¹Ÿå¯ä»¥é…ç½®window ä¿¡æ¯ï¼Œå¦‚ä¸app.jsonç›¸åŒåˆ™è¦†ç›–app.jsoné…ç½®</li></ul><h2 id="WXML"><a href="#WXML" class="headerlink" title="WXML"></a>WXML</h2><ul><li>æ¨¡æ¿è¯­æ³• åœ¨wxml ä¸­ä½¿ç”¨åŒå¤§æ‹¬å·ï¼Œåœ¨åŒå¼•å·ä¸­ä½¿ç”¨æœ‰æ•ˆã€‚</li><li><p>for å¾ªç¯<br>å…¶ä¸­æœ‰ä¸¤ä¸ªå€¼ï¼Œitem ä»£è¡¨æ¯ä¸€é¡¹ï¼Œindex ä»£è¡¨å½“å‰é¡¹çš„ç´¢å¼•ï¼Œå¹¶ä¸”å°ç¨‹åºæ¨èçš„ä½¿ç”¨wx:for çš„å…ƒç´ ä¸Šä½¿ç”¨<br>å½“é¡µé¢å‘ç”Ÿæ”¹å˜é‡æ–°æ¸²æŸ“æ—¶ï¼Œæ¡†æ¶ä¼šæ•ˆéªŒkey ï¼Œå¹¶é‡æ–°æ’åºï¼Œè€Œéé‡æ–°æ¸²æŸ“ï¼Œæå¤§çš„æå‡äº†æ€§èƒ½ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wx:for = &quot;&#123;&#123; value &#125;&#125;&quot; </span><br><span class="line">wx:key =&quot; &#123;&#123; index &#125;&#125;&quot;</span><br></pre></td></tr></table></figure></li><li><p>block æ ‡ç­¾ ç”¨äºä¸€ä¸ªæ¸²æŸ“ä¸€ä¸ªåŒ…å«å¤šèŠ‚ç‚¹çš„ç»“æ„å—ï¼Œå¯ä»¥åœ¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;block wx:for=&quot;&#123;&#123;arr or obj&#125;&#125;&quot;&gt;</span><br><span class="line"> &lt;view&gt;&#123;&#123;item&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;/block&gt;</span><br></pre></td></tr></table></figure></li></ul><p>é‡Œçš„å†…å®¹ä¼šæ¸²æŸ“ï¼Œblockä¸ä¼šè¢«å¾ªç¯ï¼Œ</p><ul><li>wx: if &amp; wx:elif &amp; wx:else è¡¨ç¤ºæ˜¾ç¤ºéšè—å…ƒç´ ï¼Œtrueæ¸²æŸ“å…ƒç´ ï¼Œfalseä¸æ¸²æŸ“å…ƒç´ </li><li>wx: hidden æ¥å—ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œtrueéšè—ï¼Œfalseæ˜¾ç¤ºï¼Œä½¿ç”¨çš„æ˜¯display çš„black &amp; none æ§åˆ¶</li><li>data-*å…ƒç´ åªèƒ½è®¾ç½®å°å†™å­—æ¯ï¼Œå°±ç®—è®¾ç½®æˆå¤§å†™æœ€åå–å€¼ä¹Ÿæ˜¯å°å†™</li></ul><h2 id="WXSS"><a href="#WXSS" class="headerlink" title="WXSS"></a>WXSS</h2><ul><li>app.wxss:å¯å†™å…¨å±€æ ·å¼</li><li>rpx: å°ç¨‹åºä¸­çš„å“åº”å¼å•ä½ï¼Œåœ¨iPhone6ä¸‹ï¼Œ1px = 2rpx ï¼Œæ‰€ä»¥è®¾è®¡ç¨¿å¯ä»¥ä½¿ç”¨iPhone6ä½œä¸ºæ ‡å‡†è®¾è®¡</li><li>import : ä½¿ç”¨@import â€˜../common.wxssâ€™ å¯ä»¥å¯¼å…¥å…¶ä»–æ ·å¼è¡¨</li></ul><h2 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h2><ul><li>setData: å½“æ”¹å˜dataçš„å€¼æ—¶ï¼Œéœ€è¦ç”¨åˆ°setDataï¼Œ<a href="https://blog.csdn.net/qq_42817227/article/details/84834210" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">this.setData(&#123;</span><br><span class="line">    count: this.data.count+1,//æ”¹å˜string &amp; numbert</span><br><span class="line">    &apos;arr[0].name&apos;: &apos;å¼ å®ä¹&apos;,//æ”¹å˜æ•°ç»„</span><br><span class="line">    &apos;obj.name&apos;: &apos;æˆ‘å·²ç»æ”¹å˜&apos;//æ”¹å˜å¯¹è±¡</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><ul><li><code>bind</code>ç»‘å®šäº‹ä»¶ä¼šå†’æ³¡ï¼Œ<code>catch</code> ç»‘å®šçš„äº‹ä»¶ä¸ä¼šå†’æ³¡</li><li>å½“ç»„ä»¶åœ¨å…ƒç´ ä¸Šè§¦å‘æ—¶ï¼Œä¼šå‘ç»‘å®šçš„å‡½æ•°ä¼ é€’ä¸€ä¸ªâ€œäº‹ä»¶å¯¹è±¡â€<code>event</code>ï¼Œé€šè¿‡å®ƒå¯ä»¥è·å¾—è¯¥ç»„ä»¶çš„ç›¸å…³çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚è‡ªå®šä¹‰æ•°æ®ç­‰ï¼‰</li><li>ä½¿ç”¨<code>input</code>æ—¶éœ€è¦ç»‘å®š<code>bindinput</code>äº‹ä»¶ï¼Œå‘Må±‚çš„åŒæ­¥æ•°æ®ã€‚</li></ul><h1 id="å°ç¨‹åºäº‘å¼€å‘ï¼ˆServerLessï¼‰"><a href="#å°ç¨‹åºäº‘å¼€å‘ï¼ˆServerLessï¼‰" class="headerlink" title="å°ç¨‹åºäº‘å¼€å‘ï¼ˆServerLessï¼‰"></a>å°ç¨‹åºäº‘å¼€å‘ï¼ˆServerLessï¼‰</h1><p>äº‘å¼€å‘  ä¸‰å¤§åŸºç¡€èƒ½åŠ›æ”¯æŒ</p><ul><li>äº‘å‡½æ•°ï¼šè·å–appidã€è·å–openid ç”Ÿæˆåˆ†äº«å›¾ã€è°ƒç”¨è…¾è®¯äº‘sdkã€æ•°æ®åº“çš„æ“ä½œ</li><li>äº‘æ•°æ®åº“ï¼šå¯¹æ•°æ®çš„å¢åˆ æ”¹æŸ¥</li><li>äº‘å­˜å‚¨ï¼š ç®¡ç†æ–‡ä»¶ ä¸Šä¼ æ–‡ä»¶ ä¸‹è½½æ–‡ä»¶ åˆ†äº«æ–‡ä»¶  å¯è§†åŒ–æ“ä½œ</li></ul><h2 id="äº‘æ•°æ®åº“"><a href="#äº‘æ•°æ®åº“" class="headerlink" title="äº‘æ•°æ®åº“"></a>äº‘æ•°æ®åº“</h2><blockquote><p>NoSql æ•°æ®åº“ï¼Œç±»ä¼¼mongoDBï¼Œå­˜å‚¨jsonæ ¼å¼æ•°æ®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const db = wx.cloud.database();//è·å–æ•°æ®åº“å¼•ç”¨</span><br><span class="line">const todos = db.collection(&apos;todos&apos;);//è·å–é›†åˆå¼•ç”¨</span><br></pre></td></tr></table></figure></p></blockquote><p><strong>æ ‡è¯†ï¼Œæœ€å¥½æ˜¯_idï¼Œ{}ä¸ºå…¨éƒ¨ï¼Œ å…ƒç´ ï¼Œæ“ä½œçš„å…ƒç´ key:valueï¼Œé»˜è®¤{} ä¸ºå…¨éƒ¨</strong></p><ul><li>å¢<code>todos.add({data:{...}}).then(..).catch(..)</code></li><li>åˆ <code>todos.doc({.æ ‡è¯†.}).remove({data{.å…ƒç´ .}}).then(. .).catch(..)</code></li><li>æ”¹<code>todos.doc({.æ ‡è¯†.}).updata({data{.å…ƒç´ .}}).then(..).catch(..)</code></li><li>æŸ¥<code>todos.doc({.æ ‡è¯†.}).updata({data{.å…ƒç´ .}}).then(..).catch(..)</code></li></ul><h2 id="äº‘å‡½æ•°"><a href="#äº‘å‡½æ•°" class="headerlink" title="äº‘å‡½æ•°"></a>äº‘å‡½æ•°</h2><blockquote><p>ç±»ä¼¼Node.js ç›¸å½“äºåç«¯</p></blockquote><h2 id="äº‘å‚¨å­˜"><a href="#äº‘å‚¨å­˜" class="headerlink" title="äº‘å‚¨å­˜"></a>äº‘å‚¨å­˜</h2><blockquote><p>å­˜å‚¨æ–‡ä»¶ï¼Œè§†é¢‘ éŸ³é¢‘ç­‰</p></blockquote><h2 id="Bug"><a href="#Bug" class="headerlink" title="Bug"></a>Bug</h2><p>å°ç¨‹åºä¸æ”¯æŒ i++<br>åœ¨wxssä¸­è®¾ç½®èƒŒæ™¯å›¾ç‰‡ï¼Œå›¾ç‰‡çš„è·¯å¾„åªèƒ½æ˜¯httpså¼€å¤´çš„ç½‘ç»œå›¾ç‰‡</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/" target="_blank" rel="noopener">å°ç¨‹åºå¼€å‘æ–‡æ¡£</a></p></li><li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/" target="_blank" rel="noopener">æ…•è¯¾ç½‘å°ç¨‹åºå…¥é—¨</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å°ç¨‹åºåŸºç¡€&quot;&gt;&lt;a href=&quot;#å°ç¨‹åºåŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;å°ç¨‹åºåŸºç¡€&quot;&gt;&lt;/a&gt;å°ç¨‹åºåŸºç¡€&lt;/h1&gt;&lt;h2 id=&quot;JSON&quot;&gt;&lt;a href=&quot;#JSON&quot; class=&quot;headerlink&quot; title=&quot;JSON&quot;
      
    
    </summary>
    
    
      <category term="å¾®ä¿¡å°ç¨‹åº" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ·±æµ…æ‹·è´</title>
    <link href="http://yoursite.com/2019/06/26/%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/"/>
    <id>http://yoursite.com/2019/06/26/æ·±æµ…æ‹·è´/</id>
    <published>2019-06-26T02:04:55.000Z</published>
    <updated>2019-06-26T02:30:08.075Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ‹·è´"><a href="#ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ‹·è´" class="headerlink" title="ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ‹·è´"></a>ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ‹·è´</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var obj1=&#123;</span><br><span class="line">    value: &apos;a&apos;</span><br><span class="line">&#125;</span><br><span class="line">var obj2 = obj1;</span><br><span class="line">obj2.value=&apos;b&apos;;</span><br><span class="line">console.log(obj1);//&#123; value: &apos;b&apos; &#125;</span><br></pre></td></tr></table></figure><p> å› ä¸ºå¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥èµ‹å€¼æ—¶çš„æ“ä½œä»…æ˜¯èµ‹äºˆç›¸åŒçš„åœ°å€ï¼Œå½“å¯¹å…¶ä¸­ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±ä¼šå½±å“å…¶ä»–çš„å¯¹è±¡ã€‚è§£å†³è¿™ä¸ªé—®é¢˜å°±éœ€è¦æ‹·è´äº†ã€‚</p><h2 id="æµ…æ‹·è´ï¼š"><a href="#æµ…æ‹·è´ï¼š" class="headerlink" title="æµ…æ‹·è´ï¼š"></a>æµ…æ‹·è´ï¼š</h2><p>ä½¿ç”¨åŸç”Ÿçš„<code>Object.assign()</code>æ–¹æ³•å°±å¯ä»¥å®ç°æµ…æ‹·è´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var obj1=&#123;</span><br><span class="line">    value: &apos;a&apos;</span><br><span class="line">&#125;</span><br><span class="line">var obj2 = Object.assign(&#123;&#125;,obj1);</span><br><span class="line">obj2.value=&apos;b&apos;;</span><br><span class="line">console.log(obj1);//&#123; value: &apos;a&apos; &#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¦‚æœæ‹·è´çš„æºå¯¹è±¡å½“ä¸­åŒ…å«å¯¹è±¡æ—¶ï¼Œ<code>OBject.assign()</code>æ–¹æ³•åªä¼šæ‹·è´å¯¹è±¡çš„å¼•ç”¨åœ°å€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var obj1=&#123;</span><br><span class="line">    value: &apos;a&apos;,</span><br><span class="line">    obj3:&#123;</span><br><span class="line">        value2: &apos;c&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var obj2 = Object.assign(&#123;&#125;,obj1);</span><br><span class="line">obj2.obj3.value2=&apos;b&apos;;</span><br><span class="line">console.log(obj1);//&#123; value: &apos;a&apos;, obj3:&#123; value2: &apos;b&apos; &#125; &#125;</span><br></pre></td></tr></table></figure><h2 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h2><p>å¦‚æœè¦æ‹·è´çš„å¯¹è±¡ä¸­åŒ…å«å¯¹è±¡ï¼Œå°±éœ€è¦æ·±æ‹·è´äº†ï¼Œä¸€èˆ¬ä½¿ç”¨åŸç”Ÿçš„æ–¹æ³•<code>JSON.parse(JSON.stringify(obj))</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">j1=&#123;</span><br><span class="line">    value: &apos;a&apos;,</span><br><span class="line">    obj3:&#123;</span><br><span class="line">        value2: &apos;c&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    arr:[1,2,3]</span><br><span class="line">&#125;</span><br><span class="line">var obj2 = JSON.parse(JSON.stringify(obj1));</span><br><span class="line">obj2.obj3.value2=&apos;b&apos;;</span><br><span class="line">obj2.arr[0]= &quot;a&quot;;</span><br><span class="line">console.log(obj2);//&#123; value: &apos;a&apos;, obj3:&#123; value2: &apos;b&apos; &#125;, arr:[&apos;a&apos;,2,3] &#125;</span><br><span class="line">console.log(obj1);//&#123; value: &apos;a&apos;, obj3:&#123; value2: &apos;c&apos; &#125;, arr:[1,2,3] &#125; æ²¡æœ‰å‘ç”Ÿæ”¹å˜</span><br></pre></td></tr></table></figure><h2 id="å®ç°ä¸€ä¸ªå¯¹æ•°ç»„å’Œå¯¹è±¡çš„æ·±æ‹·è´çš„æ–¹æ³•"><a href="#å®ç°ä¸€ä¸ªå¯¹æ•°ç»„å’Œå¯¹è±¡çš„æ·±æ‹·è´çš„æ–¹æ³•" class="headerlink" title="å®ç°ä¸€ä¸ªå¯¹æ•°ç»„å’Œå¯¹è±¡çš„æ·±æ‹·è´çš„æ–¹æ³•"></a>å®ç°ä¸€ä¸ªå¯¹æ•°ç»„å’Œå¯¹è±¡çš„æ·±æ‹·è´çš„æ–¹æ³•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">var obj=&#123;</span><br><span class="line">    name: &apos;znl&apos;,</span><br><span class="line">    age: 18,</span><br><span class="line">    friend:&#123;</span><br><span class="line">        name: &apos;borys&apos;,</span><br><span class="line">        age: 20</span><br><span class="line">    &#125;,</span><br><span class="line">    arr:[1,2,[3,4]]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function copy(obj)&#123;</span><br><span class="line">    var type=Object.prototype.toString.call(obj);</span><br><span class="line">    if(!(type == &apos;[object Array]&apos; || type == &apos;[object Object]&apos;))&#123;</span><br><span class="line">        return &apos;Type Error!&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">    return JSON.parse(JSON.stringify(obj));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var obj2= copy(obj);</span><br><span class="line">console.log(obj.friend === obj2.friend)//false</span><br><span class="line">console.log(obj.arr === obj2.arr)//false</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" target="_blank" rel="noopener">MDN Object.assign</a></li><li><a href="https://yuchengkai.cn/docs/frontend/#%E6%B5%85%E6%8B%B7%E8%B4%9D" target="_blank" rel="noopener">æ·±æ‹·è´</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ‹·è´&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ‹·è´&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ‹·è´&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ‹·è´&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl
      
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹æ³•åŠä¼˜ç¼ºç‚¹</title>
    <link href="http://yoursite.com/2019/06/04/%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95%E5%8F%8A%E4%BC%98%E7%BC%BA%E7%82%B9/"/>
    <id>http://yoursite.com/2019/06/04/åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹æ³•åŠä¼˜ç¼ºç‚¹/</id>
    <published>2019-06-04T02:04:55.000Z</published>
    <updated>2019-06-05T01:45:39.098Z</updated>
    
    <content type="html"><![CDATA[<h2 id="new-Object"><a href="#new-Object" class="headerlink" title="new Object()"></a>new Object()</h2><p>ç›´æ¥é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var obj = new Object()</span><br><span class="line">//ç­‰åŒäº var obj = &#123;&#125;</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨å­—é¢é‡çš„æ–¹å¼æ›´ç®€å•ï¼Œå…¶å®ä»–ä¿©æ˜¯ä¸€æ ·çš„ã€‚<br>ä¼˜ç‚¹æ˜¯è¶³å¤Ÿç®€å•ï¼Œç¼ºç‚¹æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚</p><h2 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function createObj(name,age)&#123;</span><br><span class="line">    var obj = &#123;&#125;;</span><br><span class="line">    obj.name=name;</span><br><span class="line">    obj.age=age;</span><br><span class="line">    return obj</span><br><span class="line">&#125;</span><br><span class="line">var Anson = createObj(&apos;Anson&apos;, 18)</span><br><span class="line">console.log(Anson)</span><br><span class="line">//&#123;name: &quot;Anson&quot;, age: 18&#125;</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹æ˜¯ å¯ä»¥è§£å†³åˆ›å»ºå¤šä¸ªç›¸ä¼¼å¯¹è±¡çš„é—®é¢˜ï¼Œç¼ºç‚¹æ˜¯ æ— æ³•è¯†åˆ«å¯¹è±¡çš„ç±»å‹ã€‚</p><h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function Person(name,age)&#123;</span><br><span class="line">    this.name =name;</span><br><span class="line">    this.age=age;</span><br><span class="line">    this.sayName =function ()&#123; alert(this.name) &#125;</span><br><span class="line">&#125;</span><br><span class="line">var person = new Person(&apos;å°æ˜&apos;,13);</span><br><span class="line">console.log(person);</span><br><span class="line">//PersonÂ &#123;name: &quot;å°æ˜&quot;, age: 13, sayName: Æ’&#125;</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹æ˜¯ å¯ä»¥åˆ›å»ºç‰¹å®šç±»å‹çš„å¯¹è±¡ï¼Œç¼ºç‚¹æ˜¯ å¤šä¸ªå®ä¾‹é‡å¤åˆ›å»ºæ–¹æ³•</p><h2 id="ï¼ˆæ„é€ å‡½æ•°-åŸå‹ï¼‰ç»„åˆæ¨¡å¼"><a href="#ï¼ˆæ„é€ å‡½æ•°-åŸå‹ï¼‰ç»„åˆæ¨¡å¼" class="headerlink" title="ï¼ˆæ„é€ å‡½æ•°+åŸå‹ï¼‰ç»„åˆæ¨¡å¼"></a>ï¼ˆæ„é€ å‡½æ•°+åŸå‹ï¼‰ç»„åˆæ¨¡å¼</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function Person(name, age)&#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">    this.age = age;</span><br><span class="line">    Person.prototype.sayName = function ()&#123; alert(this.name) &#125;</span><br><span class="line"> &#125;</span><br><span class="line">var person = new Person(&apos;å°ç™½&apos;,18)</span><br><span class="line">console.log(person);</span><br><span class="line">//Person &#123;name: &quot;å°ç™½&quot;, age: 18&#125; __proto__ -&gt; sayName: Æ’ ()</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ å¤šä¸ªå®ä¾‹å¼•ç”¨ä¸€ä¸ªåŸå‹ä¸Šçš„æ–¹æ³• æ¯”è¾ƒå¸¸ç”¨</p><h2 id="åŠ¨æ€åŸå‹"><a href="#åŠ¨æ€åŸå‹" class="headerlink" title="åŠ¨æ€åŸå‹"></a>åŠ¨æ€åŸå‹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function Person(name,age)&#123;</span><br><span class="line">    this.name=name</span><br><span class="line">    this.age =age</span><br><span class="line">    if(typeof this.sayName != &apos;function&apos;)&#123;</span><br><span class="line">        Person.prototype.sayName = function()&#123; alert(this.name) &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var person = new Person(&apos;å°çº¢&apos;,15)</span><br><span class="line">console.log(person);</span><br><span class="line">//PersonÂ &#123;name: &quot;å°çº¢&quot;, age: 15&#125; åŠ¨æ€åˆ›å»ºsayName: Æ’ ()</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ å¯ä»¥åˆ¤æ–­æŸä¸ªæ–¹æ³•æ˜¯å¦æœ‰æ•ˆï¼Œæ¥å†³å®šæ˜¯å¦éœ€è¦åˆå§‹åŒ–åŸå‹ï¼Œifåªä¼šåœ¨ä»…åœ¨ç¢°åˆ°ç¬¬ä¸€ä¸ªå®ä¾‹è°ƒç”¨æ–¹æ³•<br>æ—¶ä¼šæ‰§è¡Œï¼Œæ­¤åæ‰€æœ‰å®ä¾‹å…±äº«æ­¤æ–¹æ³•ï¼Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä¸èƒ½é‡æ–°åŸå‹å¯¹è±¡ã€‚</p><h2 id="å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼"><a href="#å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼"></a>å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function Person(name,age,job)&#123;</span><br><span class="line">    var o=new Object();</span><br><span class="line">    o.name=name;</span><br><span class="line">    o.age=age;</span><br><span class="line">    o.job=job;</span><br><span class="line">    o.sayName=function()&#123;</span><br><span class="line">        console.log(this.name)</span><br><span class="line">    &#125;</span><br><span class="line">    return o;</span><br><span class="line">&#125;</span><br><span class="line">var friend=new Person(&quot;her&quot;,18,&quot;Front-end Engineer&quot;);</span><br><span class="line">friend.sayName();</span><br><span class="line">//her</span><br></pre></td></tr></table></figure><p>é™¤äº†ä½¿ç”¨<code>new</code>æ“ä½œç¬¦ï¼Œå…¶ä»–çš„å’Œå·¥å‚å‡½æ•°ä¸€æ ·ï¼Œå¯ä»¥ä¸ºå¯¹è±¡åˆ›å»ºæ„é€ å‡½æ•°ã€‚</p><h2 id="ç¨³å¦¥æ¨¡å¼"><a href="#ç¨³å¦¥æ¨¡å¼" class="headerlink" title="ç¨³å¦¥æ¨¡å¼"></a>ç¨³å¦¥æ¨¡å¼</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Person(name, age)&#123;</span><br><span class="line">    var o=&#123;&#125;;</span><br><span class="line">    o.sayName=function()&#123; alert(name) &#125;</span><br><span class="line">    return o;</span><br><span class="line">&#125;</span><br><span class="line">var person = (&apos;å°äº®&apos;ï¼Œ24);</span><br><span class="line">person.sayName();//â€™å°äº®â€˜</span><br></pre></td></tr></table></figure><p>é™¤äº†ä½¿ç”¨<code>person.sayName()</code>ä¹‹å¤– ï¼Œæ²¡æœ‰åŠæ³•åœ¨è®¿é—®åˆ°nameçš„å€¼ï¼Œé€‚åˆåœ¨æŸäº›å®‰å…¨æ‰§è¡Œç¯æ™¯ä¸‹ä½¿ç”¨ã€‚</p><h2 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create()"></a>Object.create()</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const person = &#123;</span><br><span class="line">  isHuman: false,</span><br><span class="line">  printIntroduction: function () &#123;</span><br><span class="line">    console.log(`My name is $&#123;this.name&#125;. Am I human? $&#123;this.isHuman&#125;`);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const me = Object.create(person);</span><br><span class="line"></span><br><span class="line">me.name = &quot;Matthew&quot;; // &quot;name&quot; is a property set on &quot;me&quot;, but not on &quot;person&quot;</span><br><span class="line">me.isHuman = true; // inherited properties can be overwritten</span><br><span class="line"></span><br><span class="line">me.printIntroduction();</span><br><span class="line">// expected output: &quot;My name is Matthew. Am I human? true&quot;</span><br></pre></td></tr></table></figure><p>ä¼ å…¥ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„<strong>proto</strong>ï¼Œå®ç°ç»§æ‰¿ã€‚ </p><p><strong>å‚è€ƒï¼š</strong>ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ç¬¬ä¸‰ç‰ˆã€‹ã€<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="noopener">MDN</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;new-Object&quot;&gt;&lt;a href=&quot;#new-Object&quot; class=&quot;headerlink&quot; title=&quot;new Object()&quot;&gt;&lt;/a&gt;new Object()&lt;/h2&gt;&lt;p&gt;ç›´æ¥é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚&lt;br&gt;&lt;figure class=
      
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºè·¨åŸŸ</title>
    <link href="http://yoursite.com/2019/03/15/%E5%85%B3%E4%BA%8E%E8%B7%A8%E5%9F%9F/"/>
    <id>http://yoursite.com/2019/03/15/å…³äºè·¨åŸŸ/</id>
    <published>2019-03-15T12:04:55.000Z</published>
    <updated>2019-03-15T12:32:26.666Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨Vueæ­å»ºçš„ä¸€ä¸ªåç«¯ç®¡ç†ç³»ç»Ÿä¸­ï¼Œæˆ‘ä½¿ç”¨axiosè¯·æ±‚æœ¬åœ°çš„Nodeç¯å¢ƒä¸‹çš„æ¥å£ï¼Œä½†æ˜¯è¯·æ±‚å¤±è´¥ï¼Œç„¶åæˆ‘é”™è¯¯ä¿¡æ¯æ˜¯ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://user-gold-cdn.xitu.io/2019/3/15/169808e13bfe3533?w=1159&h=38&f=jpeg&s=12458" alt="331552554043_.pic.jpg" title="">                </div>                <div class="image-caption">331552554043_.pic.jpg</div>            </figure><br>å¤§æ¦‚æ„æ€å°±æ˜¯ä¸èƒ½è®¿é—®<code>http://localhost:8080</code><br>æˆ‘çš„Vueé¡¹ç›®ç«¯å£æ˜¯<code>http://localhost:8081</code>ï¼ŒNodeæœåŠ¡ç«¯è¿è¡Œåœ¨<code>http://localhost:8080</code>ç«¯å£ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´å› ä¸ºè¯·æ±‚ç«¯å£å’Œå“åº”ç«¯å£ä¸ä¸€è‡´ï¼Œæ‰€ä»¥è¯·æ±‚å¤±è´¥ã€‚<br>æˆ‘ä¹Ÿåœ¨ç½‘ä¸ŠæŸ¥çœ‹äº†ä¸€äº›å…³äºè·¨åŸŸå‡ºç°çš„åŸå› åŠè§£å†³çš„æ–¹æ³•ï¼Œå¹¶è®°å½•ä¸‹æ¥ã€‚</p><h2 id="ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸ"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸ"></a>ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸ</h2><blockquote><p>è·¨åŸŸä¸€å¥è¯çš„ç†è§£å°±æ˜¯ï¼šæœåŠ¡ç«¯å’Œè¯·æ±‚ç«¯çš„åœ°å€ä¸ä¸€æ ·ã€‚ </p></blockquote><h3 id="ä»€ä¹ˆæ˜¯è·¨åŸŸ"><a href="#ä»€ä¹ˆæ˜¯è·¨åŸŸ" class="headerlink" title="ä»€ä¹ˆæ˜¯è·¨åŸŸ"></a>ä»€ä¹ˆæ˜¯è·¨åŸŸ</h3><p> Ajax çš„ä¾¿åˆ©æ€§å¤§å®¶éƒ½æ¸…æ¥šï¼Œå¯ä»¥åœ¨ä¸å‘æœåŠ¡å™¨æäº¤å®Œæ•´çš„é¡µé¢çš„æƒ…å†µä¸‹ï¼Œå®ç°å±€éƒ¨æ›´æ–°é¡µé¢ã€‚ä½†æ˜¯æµè§ˆå™¨å¤„äºå¯¹å®‰å…¨æ–¹é¢çš„è€ƒè™‘ï¼Œä¸å…è®¸è·¨åŸŸè°ƒç”¨å…¶ä»–é¡µé¢çš„å¯¹è±¡ã€‚<br>å…¶å®è¿™ä¸ªä¹Ÿä¸èƒ½æ€ªæµè§ˆå™¨ï¼Œå‡è®¾è°éƒ½å¯ä»¥éšéšä¾¿ä¾¿å‘ä½ å‘é€è¯·æ±‚ï¼Œé‚£æ ·æœ‰å¾ˆå¤§çš„å®‰å…¨éšæ‚£ã€‚<br>æ ¹æ®æµè§ˆå™¨çš„åŒæºç­–ç•¥, åªæœ‰å½“åè®®ï¼ŒåŸŸåï¼Œç«¯å£ç›¸åŒçš„æ—¶å€™æ‰ç®—æ˜¯åŒæº, åä¹‹åˆ™å‡è§†ä¸ºæ˜¯ä¸€ä¸ªè·¨åŸŸçš„è¯·æ±‚.<br>ä¹Ÿå°±æ˜¯è¯´æˆ‘åˆšåˆšçš„Vueç«¯å£æ˜¯<code>8081</code>ï¼ŒæœåŠ¡ç«¯ç«¯å£æ˜¯<code>8080</code>ï¼Œç«¯å£ä¸ä¸€æ ·ï¼Œå› ä¸ºåŒæºç­–ç•¥çš„å­˜åœ¨ ï¼Œæ‰€æœ‰æˆ‘çš„è¯·æ±‚ä¼šå¤±è´¥ã€‚    </p><blockquote><p>ä¸€ä¸ªé—®é¢˜ï¼Œå½“æ‰¾åˆ°äº†åŸå› ï¼Œè¿™ä¸ªé—®é¢˜å°±è§£å†³äº†ä¸€åŠäº†ã€‚</p></blockquote><h2 id="æ€ä¹ˆè§£å†³è·¨åŸŸ"><a href="#æ€ä¹ˆè§£å†³è·¨åŸŸ" class="headerlink" title="æ€ä¹ˆè§£å†³è·¨åŸŸ"></a>æ€ä¹ˆè§£å†³è·¨åŸŸ</h2><p>ä¸‹é¢å°±å…ˆä»‹ç»ä¸‰ç§è·¨å…¨åŸŸçš„æ–¹æ³•ï¼š</p><h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><p>åº”è¯¥æ˜¯æœ€å¸¸è§è§£å†³è·¨åŸŸçš„æ–¹æ³•äº†ï¼Œ<br>ä»–ä¸ºä»€ä¹ˆèƒ½è§£å†³è·¨åŸŸå‘¢ï¼Œæ˜¯å› ä¸ºWeb é¡µé¢ä¸Šè°ƒç”¨ js æ–‡ä»¶ä¸å—æµè§ˆå™¨åŒæºç­–ç•¥çš„å½±å“ï¼Œæ‰€ä»¥é€šè¿‡ Script ä¾¿ç­¾å¯ä»¥è¿›è¡Œè·¨åŸŸçš„è¯·æ±‚ï¼š</p><ol><li>é¦–å…ˆå‰ç«¯å…ˆè®¾ç½®å¥½å›è°ƒå‡½æ•°ï¼Œå¹¶å°†å…¶ä½œä¸º url çš„å‚æ•°ã€‚</li><li>æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚åï¼Œé€šè¿‡è¯¥å‚æ•°è·å¾—å›è°ƒå‡½æ•°åï¼Œå¹¶å°†æ•°æ®æ”¾åœ¨å‚æ•°ä¸­å°†å…¶è¿”å›</li><li>æ”¶åˆ°ç»“æœåå› ä¸ºæ˜¯ script æ ‡ç­¾ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¼šå½“åšæ˜¯3è„šæœ¬è¿›è¡Œè¿è¡Œï¼Œä»è€Œè¾¾åˆ°è·¨åŸŸè·å–æ•°æ®çš„ç›®çš„ã€‚<br>æˆ‘çš„å‰ç«¯æ˜¯<code>index.html</code>ï¼Œåç«¯æ˜¯<code>server.js</code><br>åç«¯é€»è¾‘ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//server.js</span><br><span class="line">const url = require(&apos;url&apos;);</span><br><span class="line">const http = require(&apos;http&apos;);</span><br><span class="line"></span><br><span class="line">http.createServer((req, res)=&gt;&#123;</span><br><span class="line">const data = &#123;</span><br><span class="line">    x: 10//è¿”å›çš„æ•°æ®</span><br><span class="line">&#125;;</span><br><span class="line">const callback = url.parse(req.url, true).query.callback;</span><br><span class="line">res.writeHead(200);</span><br><span class="line">res.end(`$&#123;callback&#125;($&#123;JSON.stringify(data)&#125;)`);</span><br><span class="line">//æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œè¿”å›data</span><br><span class="line">&#125;).listen(3000, &apos;localhost&apos;);</span><br><span class="line"></span><br><span class="line">console.log(&apos;å¯åŠ¨æœåŠ¡ï¼Œç›‘å¬ localhost:3000&apos;);</span><br></pre></td></tr></table></figure></li></ol><p>ç„¶åä½¿ç”¨<code>node server.js</code>è¿è¡Œ<br>å‰ç«¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//index.html</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">function jsonpCallback(data) &#123;</span><br><span class="line">    console.log(&apos;è·å¾— X æ•°æ®:&apos; + data.x);</span><br><span class="line">&#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;http://localhost:3000?callback=jsonpCallback&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></p><p>ä¹‹åæ‰“å¼€index.html;å°±å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°è¿”å›çš„æ•°æ®äº†ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://user-gold-cdn.xitu.io/2019/3/15/169808e13be099dc?w=207&h=85&f=jpeg&s=4222" alt="341552556856_.pic.jpg" title="">                </div>                <div class="image-caption">341552556856_.pic.jpg</div>            </figure></p><p>è‡³æ­¤ï¼Œé€šè¿‡ JSONP è·¨åŸŸè·å–æ•°æ®å·²ç»æˆåŠŸäº†ï¼Œjsonpè¿™ç§æ–¹æ³•è·¨åŸŸï¼Œä»–çš„å…¼å®¹æ€§å¾ˆå¥½ï¼Œå¯ä»¥åœ¨å¤è€çš„æµè§ˆå™¨ä¸­å›½ä½¿ç”¨ï¼Œå› ä¸ºè¿™ç§æ–¹æ³•æ˜¯åˆ©ç”¨äº†<code>&lt;script&gt;</code>æ ‡ç­¾çš„ç‰¹æ®Šæ€§ï¼Œæ‰€æœ‰åªæ”¯æŒGETè¯·æ±‚ã€‚</p><h3 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h3><p>CORS æ˜¯ä¸€ä¸ª W3C æ ‡å‡†ï¼Œå…¨ç§°æ˜¯â€è·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin resource sharingï¼‰å®ƒå…è®¸æµè§ˆå™¨å‘è·¨æºæœåŠ¡å™¨ï¼Œå‘å‡º XMLHttpRequest è¯·æ±‚ï¼Œä»è€Œå…‹æœäº† ajax åªèƒ½åŒæºä½¿ç”¨çš„é™åˆ¶ã€‚</p><p>CORS éœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒæ‰å¯ä»¥ç”Ÿæ•ˆï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒCORS é€šä¿¡ä¸åŒæºçš„ ajax é€šä¿¡æ²¡æœ‰å·®åˆ«ï¼Œä»£ç å®Œå…¨ä¸€æ ·ã€‚æµè§ˆå™¨ä¸€æ—¦å‘ç° ajax è¯·æ±‚è·¨æºï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è¯·æ±‚ï¼Œä½†ç”¨æˆ·ä¸ä¼šæœ‰æ„Ÿè§‰ã€‚</p><p>å› æ­¤ï¼Œå®ç° CORS é€šä¿¡çš„å…³é”®æ˜¯æœåŠ¡å™¨ã€‚åªè¦æœåŠ¡å™¨å®ç°äº† CORS æ¥å£ï¼Œå°±å¯ä»¥è·¨æºé€šä¿¡ã€‚</p><p>å‰ç«¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    url:&quot;http://127.0.0.1:3000&quot;,</span><br><span class="line">    success:function(res)&#123;</span><br><span class="line">        var res = JSON.parse(res);</span><br><span class="line">        $(&apos;body&apos;).text(res.data);</span><br><span class="line">        console.log(res.data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><p>è¿™æ¬¡å‰ç«¯å¯åŠ¨éœ€è¦ä½¿ç”¨<code>node-server</code>æ¥å¯åŠ¨ï¼Œä½¿ç”¨<code>npm install node-server</code>ä¸‹è½½ï¼Œç„¶åå½“å‰ç›®å½•ä¸‹ä½¿ç”¨<code>node-server</code>å°±å¯ä»¥äº†<br>åç«¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const http = require(&apos;http&apos;);</span><br><span class="line"></span><br><span class="line">http.createServer((req, res)=&gt;&#123;</span><br><span class="line">const data = &#123;</span><br><span class="line">    &apos;data&apos;: &apos;Hello world&apos;//è¿”å›çš„æ•°æ®</span><br><span class="line">&#125;;</span><br><span class="line">res.writeHead(200, &#123;&apos;Access-Control-Allow-Origin&apos;: &apos;http://127.0.0.1:8080&apos;&#125;);</span><br><span class="line">//è®¾ç½®çš„å¤´éƒ¨ä¿¡æ¯éœ€è¦å’Œå‰ç«¯è¯·æ±‚çš„åœ°å€ä¸€è‡´</span><br><span class="line">res.end(JSON.stringify(data));</span><br><span class="line">//è¿”å›data</span><br><span class="line">&#125;).listen(3000, &apos;127.0.0.1&apos;);</span><br><span class="line"></span><br><span class="line">console.log(&apos;å¯åŠ¨æœåŠ¡ï¼Œç›‘å¬ 127.0.0.1:3000&apos;);</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨å‘½ä»¤<code>node server.js</code>å¯åŠ¨ï¼›<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://user-gold-cdn.xitu.io/2019/3/15/169808e13bc07597?w=1240&h=792&f=jpeg&s=63249" alt="211552638161_.pic_hd.jpg" title="">                </div>                <div class="image-caption">211552638161_.pic_hd.jpg</div>            </figure></p><p>CORSä¸JSONPçš„ä½¿ç”¨ç›®çš„ç›¸åŒï¼Œä½†æ˜¯æ¯”JSONPæ›´å¼ºå¤§ã€‚</p><p>JSONPåªæ”¯æŒGETè¯·æ±‚ï¼ŒCORSæ”¯æŒæ‰€æœ‰ç±»å‹çš„HTTPè¯·æ±‚ã€‚JSONPçš„ä¼˜åŠ¿åœ¨äºæ”¯æŒè€å¼æµè§ˆå™¨ï¼Œä»¥åŠå¯ä»¥å‘ä¸æ”¯æŒCORSçš„ç½‘ç«™è¯·æ±‚æ•°æ®ã€‚</p><h3 id="Server-Proxy"><a href="#Server-Proxy" class="headerlink" title="Server Proxy"></a>Server Proxy</h3><p>æœåŠ¡å™¨ä»£ç†ï¼Œé¡¾åæ€ä¹‰ï¼Œå½“ä½ éœ€è¦æœ‰è·¨åŸŸçš„è¯·æ±‚æ“ä½œæ—¶å‘é€è¯·æ±‚ç»™åç«¯ï¼Œè®©åç«¯å¸®ä½ ä»£ä¸ºè¯·æ±‚ï¼Œç„¶åæœ€åå°†è·å–çš„ç»“æœå‘é€ç»™ä½ ã€‚</p><p>å‡è®¾æœ‰è¿™æ ·çš„ä¸€ä¸ªåœºæ™¯ï¼Œä½ çš„é¡µé¢éœ€è¦è·å– <a href="http://link.zhihu.com/?target=https%3A//cnodejs.org/api" target="_blank" rel="noopener">CNodeï¼šNode.jsä¸“ä¸šä¸­æ–‡ç¤¾åŒº</a> è®ºå›ä¸Šä¸€äº›æ•°æ®ï¼Œå¦‚é€šè¿‡ <a href="https://cnodejs.org/api/v1/topics" target="_blank" rel="noopener">https://cnodejs.org/api/v1/topics</a>ï¼Œå½“æ—¶å› ä¸ºä¸åŒåŸŸï¼Œæ‰€ä»¥ä½ å¯ä»¥å°†è¯·æ±‚åç«¯ï¼Œè®©å…¶å¯¹è¯¥è¯·æ±‚ä»£ä¸ºè½¬å‘ã€‚</p><p>åç«¯ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">const url = require(&apos;url&apos;);</span><br><span class="line">const http = require(&apos;http&apos;);</span><br><span class="line">const https = require(&apos;https&apos;);</span><br><span class="line"></span><br><span class="line">http.createServer((req, res)=&gt;&#123;</span><br><span class="line">const path = url.parse(req.url).path.slice(1);</span><br><span class="line">//æ ¸å¯¹è¯·æ±‚è·¯ç”±æ˜¯å¦ä¸€è‡´</span><br><span class="line">if(path === &apos;topics&apos;)&#123;</span><br><span class="line">    https.get(&apos;https://cnodejs.org/api/v1/topics&apos;, (resp)=&gt;&#123;</span><br><span class="line">        //httpsä»£å‘è¯·æ±‚</span><br><span class="line">        let data=&apos;&apos;;</span><br><span class="line">        resp.on(&apos;data&apos;, chunk=&gt;&#123;</span><br><span class="line">            data+= chunk</span><br><span class="line">        &#125;);</span><br><span class="line">        resp.on(&apos;end&apos;, ()=&gt;&#123;</span><br><span class="line">            res.writeHead(</span><br><span class="line">                200,</span><br><span class="line">                &#123;&apos;Content-Type&apos;: &apos;application/json; charset=utf-8&apos;&#125;</span><br><span class="line">            );</span><br><span class="line">            res.end(data);</span><br><span class="line">            //è¿”å›æ•°æ®</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;).listen(3000, &apos;127.0.0.1&apos;);</span><br><span class="line"></span><br><span class="line">console.log(&apos;å¯åŠ¨æœåŠ¡ï¼Œç›‘å¬ 127.0.0.1:3000&apos;);</span><br></pre></td></tr></table></figure></p><p>å‰ç«¯ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    url:&quot;https://cnodejs.org/api/v1/topics&quot;,</span><br><span class="line">    success:function(res)&#123;</span><br><span class="line">        $(&apos;body&apos;).text(JSON.stringify(res));</span><br><span class="line">        console.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å°±æˆåŠŸäº†<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://user-gold-cdn.xitu.io/2019/3/15/169808e13bdda705?w=1111&h=815&f=jpeg&s=297478" alt="221552639459_.pic_hd.jpg" title="">                </div>                <div class="image-caption">221552639459_.pic_hd.jpg</div>            </figure></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¸¸ç”¨çš„è·¨åŸŸæ–¹å¼åŸºæœ¬å°±æ˜¯è¿™ä¸‰ç§ï¼š</p><ol><li>JSONP<br>ä¼˜ç‚¹æ˜¯å¯ä»¥å…¼å®¹è€æµè§ˆå™¨ï¼Œç¼ºç‚¹æ˜¯åªèƒ½å‘é€GETè¯·æ±‚</li><li>CORS<br>ä¼˜ç‚¹ç®€å•æ–¹ä¾¿ï¼Œæ”¯æŒpostè¯·æ±‚ï¼Œç¼ºç‚¹æ˜¯éœ€è¦åç«¯çš„é…åˆ,ä¸æ”¯æŒè€ç‰ˆæµè§ˆå™¨ã€‚ã€‚</li><li>Server Proxy<br>ä¼˜ç‚¹æ˜¯å‰ç«¯æ­£å¸¸å‘é€ajaxè¯·æ±‚ï¼Œç¼ºç‚¹æ˜¯åç«¯ä¼šäºŒæ¬¡è¯·æ±‚ã€‚</li></ol><p>å…¶ä»–çš„è·¨åŸŸæ–¹å¼è¿˜æœ‰ï¼š<code>location.hash</code>ã€<code>window.name</code>ã€<code>postMessage</code>ç­‰æ–¹å¼ï¼Œæœ‰æ—¶é—´ä¹Ÿå¯ä»¥äº†è§£ä¸€ä¸‹ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£[é˜®ä¸€å³°çš„åšå®¢]ï¼š<a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2016/04/cors.html</a></li><li>å…³äºè·¨åŸŸï¼Œä½ æƒ³çŸ¥é“çš„å…¨åœ¨è¿™é‡Œï¼š<a href="https://zhuanlan.zhihu.com/p/25778815" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/25778815</a></li><li>ä¸è¦å†é—®æˆ‘è·¨åŸŸçš„é—®é¢˜äº†[sf]ï¼š<a href="https://segmentfault.com/a/1190000015597029" target="_blank" rel="noopener">https://segmentfault.com/a/1190000015597029</a></li><li>å…³äºè·¨åŸŸ,ä»¥åŠè·¨åŸŸçš„å‡ ç§æ–¹å¼[cnblog]ï¼š<a href="https://www.cnblogs.com/chenshishuo/p/4919224.html" target="_blank" rel="noopener">https://www.cnblogs.com/chenshishuo/p/4919224.html</a></li><li>æµè§ˆå™¨çš„åŒæºç­–ç•¥[MDN]:<a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨ä½¿ç”¨Vueæ­å»ºçš„ä¸€ä¸ªåç«¯ç®¡ç†ç³»ç»Ÿä¸­ï¼Œæˆ‘ä½¿ç”¨axiosè¯·æ±‚æœ¬åœ°çš„Nodeç¯å¢ƒä¸‹çš„æ¥å£ï¼Œä½†æ˜¯è¯·æ±‚å¤±è´¥ï¼Œç„¶åæˆ‘é”™è¯¯ä¿¡æ¯æ˜¯ï¼š&lt;br&gt;&lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
 
      
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
      <category term="NodeJS" scheme="http://yoursite.com/tags/NodeJS/"/>
    
  </entry>
  
  <entry>
    <title>Vueä¸­çš„éªŒè¯ç™»å½•çŠ¶æ€</title>
    <link href="http://yoursite.com/2019/03/09/Vue%E4%B8%AD%E7%9A%84%E9%AA%8C%E8%AF%81%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81/"/>
    <id>http://yoursite.com/2019/03/09/Vueä¸­çš„éªŒè¯ç™»å½•çŠ¶æ€/</id>
    <published>2019-03-09T14:21:55.000Z</published>
    <updated>2019-03-09T10:33:19.939Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯"><a href="#Vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯" class="headerlink" title="Vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯"></a>Vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯</h2><p>å…ˆè¯´ä¸€ä¸‹æˆ‘çš„å®ç°æ­¥éª¤ï¼š </p><ol><li>ä½¿ç”¨<code>easy-mock</code>æ–°å»ºç™»å½•æ¥å£ï¼Œæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®</li><li>ä½¿ç”¨<code>axios</code>è¯·æ±‚ç™»å½•æ¥å£ï¼ŒåŒ¹é…è´¦å·å’Œå¯†ç </li><li>è´¦å·å¯†ç éªŒè¯åï¼Œ æ‹¿åˆ°<code>token</code>ï¼Œå°†tokenå­˜å‚¨åˆ°<code>sessionStorage</code>ä¸­ï¼Œå¹¶è·³è½¬åˆ°é¦–é¡µ</li><li>å‰ç«¯æ¯æ¬¡è·³è½¬æ—¶ï¼Œå°±ä½¿ç”¨å¯¼èˆªå®ˆå«(vue-router.beforeEach)åˆ¤æ–­ <code>sessionStorage</code> ä¸­æœ‰æ—  <code>token</code>ï¼Œæ²¡æœ‰å°±è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œæœ‰åˆ™è·³è½¬åˆ°å¯¹åº”è·¯ç”±é¡µé¢ã€‚</li><li>æ³¨é”€åï¼Œå°±æ¸…é™¤<code>sessionStorage</code>é‡Œçš„<code>token</code>ä¿¡æ¯å¹¶è·³è½¬åˆ°ç™»å½•é¡µé¢</li></ol><h2 id="ä½¿ç”¨easy-mockæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®"><a href="#ä½¿ç”¨easy-mockæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®" class="headerlink" title="ä½¿ç”¨easy-mockæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®"></a>ä½¿ç”¨easy-mockæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®</h2><p>æˆ‘ç”¨çš„æ˜¯<a href="https://easy-mock.com/" target="_blank" rel="noopener">easy-mock</a>,æ–°å»ºäº†ä¸€ä¸ªæ¥å£ï¼Œç”¨äºæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"error_code"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"data"</span>: [&#123;</span><br><span class="line">      <span class="string">"id"</span>: <span class="string">'1'</span>,</span><br><span class="line">      <span class="string">"usertitle"</span>: <span class="string">"ç®¡ç†å‘˜"</span>,</span><br><span class="line">      <span class="string">"username"</span>: <span class="string">"admin"</span>,</span><br><span class="line">      <span class="string">"password"</span>: <span class="string">"123456"</span>,</span><br><span class="line">      <span class="string">"token"</span>: <span class="string">"@date(T)"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"id"</span>: <span class="string">'2'</span>,</span><br><span class="line">      <span class="string">"usertitle"</span>: <span class="string">"è¶…çº§ç®¡ç†å‘˜"</span>,</span><br><span class="line">      <span class="string">"username"</span>: <span class="string">"root"</span>,</span><br><span class="line">      <span class="string">"password"</span>: <span class="string">"root"</span>,</span><br><span class="line">      <span class="string">"token"</span>: <span class="string">"@date(T)"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>login.vueä¸­å†™å¥½ç™»é™†æ¡†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;p&gt;ç”¨æˆ·åï¼š&lt;input type=&apos;text&apos; v-model=&quot;userName&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;å¯†ç ï¼š&lt;input type=&apos;text&apos; v-model=&quot;passWord&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;login()&quot;&gt;ç™»å½•&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"> export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          userName:&apos;root&apos;,</span><br><span class="line">          passWord:&apos;root&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><p>ç„¶åä¸‹è½½axiosï¼š<code>npm install axios --save</code>,ç”¨æ¥è¯·æ±‚åˆšåˆšå®šä¹‰å¥½çš„easy-mockæ¥å£ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">login()&#123;</span><br><span class="line">       <span class="keyword">const</span> self = <span class="keyword">this</span>;</span><br><span class="line">       axios.get(<span class="string">'https://easy-mock.com/mock/5c7cd0f89d0184e94358d/museum/login'</span>).then(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line">         <span class="keyword">var</span> res =response.data.data,</span><br><span class="line">             len = res.length,</span><br><span class="line">             userNameArr= [],</span><br><span class="line">             passWordArr= [],</span><br><span class="line">             ses= <span class="built_in">window</span>.sessionStorage; </span><br><span class="line">         <span class="comment">// æ‹¿åˆ°æ‰€æœ‰çš„username</span></span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">           userNameArr.push(res[i].username);</span><br><span class="line">           passWordArr.push(res[i].password);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="built_in">console</span>.log(userNameArr, passWordArr);</span><br><span class="line">         <span class="keyword">if</span>(userNameArr.indexOf(<span class="keyword">this</span>.userName) === <span class="number">-1</span>)&#123;</span><br><span class="line">             alert(<span class="string">'è´¦å·ä¸å­˜åœ¨ï¼'</span>);</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="keyword">var</span> index = userNameArr.indexOf(<span class="keyword">this</span>.userName);</span><br><span class="line">           <span class="keyword">if</span>(passWordArr[index] === <span class="keyword">this</span>.passWord)&#123;</span><br><span class="line">             <span class="comment">// æŠŠtokenæ”¾åœ¨sessionStorageä¸­</span></span><br><span class="line">             ses.setItem(<span class="string">'data'</span>, res[index].token);</span><br><span class="line">             <span class="keyword">this</span>.$parent.$data.userTitle = res[index].usertitle;</span><br><span class="line">             <span class="comment">//éªŒè¯æˆåŠŸè¿›å…¥é¦–é¡µ</span></span><br><span class="line">             <span class="keyword">this</span>.startHacking (<span class="string">'ç™»å½•æˆåŠŸï¼'</span>);</span><br><span class="line">             <span class="comment">//è·³è½¬åˆ°é¦–é¡µ</span></span><br><span class="line">             <span class="keyword">this</span>.$router.push(<span class="string">'/index'</span>);</span><br><span class="line">             <span class="comment">// console.log(this.$router);</span></span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">             alert(<span class="string">'å¯†ç é”™è¯¯ï¼'</span>)</span><br><span class="line">           &#125;</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">'è¿æ¥æ•°æ®åº“å¤±è´¥ï¼'</span>)</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸€æ­¥æœ€é‡è¦çš„æ˜¯å½“è´¦å·å¯†ç æ­£ç¡®æ—¶ï¼ŒæŠŠè¯·æ±‚å›æ¥çš„<code>token</code>æ”¾åœ¨<code>sessionStorage</code>ä¸­ï¼Œ</p><h2 id="é…ç½®è·¯ç”±"><a href="#é…ç½®è·¯ç”±" class="headerlink" title="é…ç½®è·¯ç”±"></a>é…ç½®è·¯ç”±</h2><p>ç„¶åé…ç½®è·¯ç”±æ–°åŠ ä¸€ä¸ªmetaå±æ€§ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: <span class="string">'/'</span>,</span><br><span class="line">  name: <span class="string">'login'</span>,</span><br><span class="line">  component: login,</span><br><span class="line">  meta:&#123;</span><br><span class="line">    needLogin: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">'/index'</span>,</span><br><span class="line">  name: <span class="string">'index'</span>,</span><br><span class="line">  component: index,</span><br><span class="line">  meta:&#123;</span><br><span class="line">    needLogin: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åˆ¤æ–­æ¯æ¬¡è·¯ç”±è·³è½¬çš„é“¾æ¥æ˜¯å¦éœ€è¦ç™»å½•ï¼Œ</p><h2 id="å¯¼èˆªå«å£«"><a href="#å¯¼èˆªå«å£«" class="headerlink" title="å¯¼èˆªå«å£«"></a>å¯¼èˆªå«å£«</h2><p>åœ¨<code>main.js</code>ä¸­é…ç½®ä¸€ä¸ªå…¨å±€å‰ç½®é’©å­å‡½æ•°ï¼š<code>router.beforeEachï¼ˆï¼‰</code>ï¼Œä»–çš„ä½œç”¨å°±æ˜¯åœ¨æ¯æ¬¡è·¯ç”±åˆ‡æ¢çš„æ—¶å€™è°ƒç”¨<br>è¿™ä¸ªé’©å­æ–¹æ³•ä¼šæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼štoã€fromã€nextã€‚<br><code>to</code>ï¼šRouteï¼šå³å°†è¦è¿›å…¥çš„ç›®æ ‡çš„è·¯ç”±å¯¹è±¡ï¼Œ<br><code>from</code>ï¼šRouteï¼šå½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”±ï¼Œ<br><code>next</code>ï¼šFunctionï¼šä¸ªäººç†è§£è¿™ä¸ªæ–¹æ³•å°±æ˜¯å‡½æ•°ç»“æŸåæ‰§è¡Œä»€ä¹ˆï¼Œå…ˆçœ‹å®˜æ–¹è§£é‡Š<br>1.<code>next()</code>ï¼šè¿›è¡Œç®¡é“ä¸­çš„ä¸‹ä¸€ä¸ªé’©å­ã€‚å¦‚æœå…¨éƒ¨é’©å­æ‰§è¡Œå®Œäº†ï¼Œåˆ™å¯¼èˆªçš„çŠ¶æ€å°±æ˜¯confirmedï¼ˆç¡®è®¤çš„ï¼‰ï¼Œ<br>2.<code>next(false)</code>ï¼šä¸­æ–­å½“å‰çš„å¯¼èˆªã€‚å¦‚æœæµè§ˆå™¨çš„urlæ”¹å˜äº†ï¼ˆå¯èƒ½æ˜¯ç”¨æˆ·æ‰‹åŠ¨æˆ–æµè§ˆå™¨åé€€æŒ‰é’®ï¼‰ï¼Œé‚£ä¹ˆurlåœ°å€ä¼šé‡ç½®åˆ°fromè·¯ç”±å¯¹åº”çš„åœ°å€ã€‚<br>3.<code>next(&#39;/&#39;)</code>æˆ–<code>next({path:&#39;/&#39;})</code>ï¼šè·³è½¬åˆ°ä¸€ä¸ªä¸åŒçš„åœ°å€ã€‚å½“å‰å¯¼èˆªè¢«ä¸­æ–­ï¼Œè¿›å…¥ä¸€ä¸ªæ–°çš„å¯¼èˆªã€‚</p><h2 id="ç”¨sessionStorageå­˜å‚¨ç”¨æˆ·token"><a href="#ç”¨sessionStorageå­˜å‚¨ç”¨æˆ·token" class="headerlink" title="ç”¨sessionStorageå­˜å‚¨ç”¨æˆ·token"></a>ç”¨sessionStorageå­˜å‚¨ç”¨æˆ·token</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·¯ç”±å®ˆå«</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//è·¯ç”±ä¸­è®¾ç½®çš„needLoginå­—æ®µå°±åœ¨toå½“ä¸­ </span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">window</span>.sessionStorage.data)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">window</span>.sessionStorage);</span><br><span class="line">      <span class="comment">// console.log(to.path) //æ¯æ¬¡è·³è½¬çš„è·¯å¾„</span></span><br><span class="line">      <span class="keyword">if</span>(to.path === <span class="string">'/'</span>)&#123;</span><br><span class="line">        <span class="comment">//ç™»å½•çŠ¶æ€ä¸‹ è®¿é—®login.vueé¡µé¢ ä¼šè·³åˆ°index.vue</span></span><br><span class="line">        next(&#123;<span class="attr">path</span>: <span class="string">'/index'</span>&#125;);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        next();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">// å¦‚æœæ²¡æœ‰session ,è®¿é—®ä»»ä½•é¡µé¢ã€‚éƒ½ä¼šè¿›å…¥åˆ° ç™»å½•é¡µ</span></span><br><span class="line">      <span class="keyword">if</span> (to.path === <span class="string">'/'</span>) &#123; <span class="comment">// å¦‚æœæ˜¯ç™»å½•é¡µé¢çš„è¯ï¼Œç›´æ¥next() --&gt;è§£å†³æ³¨é”€åçš„å¾ªç¯æ‰§è¡Œbug</span></span><br><span class="line">        next();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¦åˆ™ è·³è½¬åˆ°ç™»å½•é¡µé¢</span></span><br><span class="line">        next(&#123; <span class="attr">path</span>: <span class="string">'/'</span> &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç”¨äº†<code>router.beforeEach</code> <a href="https://router.vuejs.org/zh/guide/advanced/" target="_blank" rel="noopener">vue-routerå¯¼èˆªå®ˆå«</a><br>æ¯æ¬¡è·³è½¬æ—¶éƒ½ä¼šåˆ¤æ–­<code>sessionStorage</code>ä¸­æ˜¯å¦æœ‰<code>token</code>å€¼ï¼Œå¦‚æœæœ‰åˆ™èƒ½æ­£å¸¸è·³è½¬ï¼Œå¦‚æœæ²¡æœ‰é‚£ä¹ˆå°±è¿”å›ç™»å½•é¡µé¢ã€‚</p><h2 id="æ³¨é”€"><a href="#æ³¨é”€" class="headerlink" title="æ³¨é”€"></a>æ³¨é”€</h2><p>è‡³æ­¤å°±å®Œæˆäº†ä¸€ä¸ªç®€å•çš„ç™»å½•çŠ¶æ€äº†ï¼Œæµè§ˆå™¨å…³é—­å<code>sessionStorage</code>ä¼šæ¸…ç©ºçš„ï¼Œæ‰€ä»¥å½“ç”¨æˆ·å…³é—­æµè§ˆå™¨å†æ‰“å¼€æ˜¯éœ€è¦é‡æ–°ç™»å½•çš„</p><p>å½“ç„¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ¸…é™¤<code>sessionStorage</code>ï¼Œæ¸…é™¤åŠ¨ä½œå¯ä»¥åšæˆæ³¨é”€ç™»å½•ï¼Œè¿™ä¸ªå°±ç®€å•äº†ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">loginOut()&#123;</span><br><span class="line"><span class="comment">// æ³¨é”€å æ¸…é™¤sessionä¿¡æ¯ ï¼Œå¹¶è¿”å›ç™»å½•é¡µ</span></span><br><span class="line"><span class="built_in">window</span>.sessionStorage.removeItem(<span class="string">'data'</span>);</span><br><span class="line"><span class="keyword">this</span>.common.startHacking(<span class="keyword">this</span>, <span class="string">'success'</span>, <span class="string">'æ³¨é”€æˆåŠŸï¼'</span>);</span><br><span class="line"><span class="keyword">this</span>.$router.push(<span class="string">'/index'</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å†™ä¸€ä¸ªæ¸…é™¤<code>sessionStorag</code>çš„æ–¹æ³•ã€‚<br>ä¸€ä¸ªç®€å•çš„ä¿å­˜ç™»å½•çŠ¶æ€çš„å°Demoã€‚</p><hr><p>å‚è€ƒï¼š<br><a href="https://cloud.tencent.com/developer/article/1199255" target="_blank" rel="noopener">è…¾è®¯äº‘ç¤¾åŒº-Vue+SessionStorageå®ç°ç®€å•çš„ç™»å½•</a><br> <a href="https://segmentfault.com/a/1190000016084468" target="_blank" rel="noopener">SF-ä»å‰åç«¯åˆ†åˆ«å­¦ä¹ â€”â€”æ³¨å†Œ/ç™»å½•æµç¨‹2</a><br><a href="https://segmentfault.com/a/1190000009086403" target="_blank" rel="noopener">Vue-routerå®ç°å•é¡µé¢åº”ç”¨åœ¨æ²¡æœ‰ç™»å½•æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢</a><br><a href="https://segmentfault.com/a/1190000015201803" target="_blank" rel="noopener">vue+axiosæ–°æ‰‹å®è·µå®ç°ç™»é™†</a><br><a href="https://segmentfault.com/a/1190000015637039" target="_blank" rel="noopener">Vueå®æˆ˜(å››)ç™»å½•/æ³¨å†Œé¡µçš„å®ç°</a><br><a href="https://segmentfault.com/a/1190000016047911" target="_blank" rel="noopener">vueé¡µé¢æ§åˆ¶æƒé™,vuexåˆ·æ–°ä¿å­˜çŠ¶æ€ã€ç™»å½•çŠ¶æ€ä¿å­˜</a><br><a href="https://segmentfault.com/a/1190000016047911" target="_blank" rel="noopener">vueé¡µé¢æ§åˆ¶æƒé™,vuexåˆ·æ–°ä¿å­˜çŠ¶æ€ã€ç™»å½•çŠ¶æ€ä¿å­˜</a><br><a href="http://www.codes51.com/itwd/4114969.html" target="_blank" rel="noopener">(vue.js)å‰åç«¯åˆ†ç¦»çš„å•é¡µåº”ç”¨å¦‚ä½•æ¥åˆ¤æ–­å½“å‰ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Ÿ</a><br><a href="https://segmentfault.com/a/1190000016040068" target="_blank" rel="noopener">Vueç™»å½•æ³¨å†Œï¼Œå¹¶ä¿æŒç™»å½•çŠ¶æ€</a><br><a href="https://www.cnblogs.com/hcxy/p/7993724.html" target="_blank" rel="noopener">vueç™»å½•æ³¨å†ŒåŠtokenéªŒè¯</a><br><a href="https://www.cnblogs.com/web-record/p/9876916.html" target="_blank" rel="noopener">Vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯</a></p><p>vue-routerå®ˆå«å¯¼èˆªå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB" target="_blank" rel="noopener">vue-routerå¯¼èˆªå®ˆå«</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯&quot;&gt;&lt;a href=&quot;#Vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯&quot; class=&quot;headerlink&quot; title=&quot;Vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯&quot;&gt;&lt;/a&gt;Vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯&lt;/h2&gt;&lt;
      
    
    </summary>
    
    
      <category term="Vue.js" scheme="http://yoursite.com/tags/Vue-js/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘å¯¹JavaScriptä¸­thisçš„ä¸€äº›ç†è§£</title>
    <link href="http://yoursite.com/2019/02/21/%E6%88%91%E5%AF%B9JavaScript%E4%B8%ADthis%E7%9A%84%E4%B8%80%E4%BA%9B%E7%90%86%E8%A7%A3/"/>
    <id>http://yoursite.com/2019/02/21/æˆ‘å¯¹JavaScriptä¸­thisçš„ä¸€äº›ç†è§£/</id>
    <published>2019-02-21T10:34:03.000Z</published>
    <updated>2019-02-21T12:38:31.483Z</updated>
    
    <content type="html"><![CDATA[<p>å› ä¸ºæ—¥å¸¸å·¥ä½œä¸­ç»å¸¸ä½¿ç”¨åˆ°<code>this</code>ï¼Œè€Œä¸”åœ¨JavaScriptä¸­<code>this</code>çš„æŒ‡å‘é—®é¢˜ä¹Ÿå¾ˆå®¹æ˜“è®©äººæ··æ·†ä¸€éƒ¨åˆ†çŸ¥è¯†ã€‚<br>è¿™æ®µæ—¶é—´ç¿»é˜…äº†ä¸€äº›ä¹¦ç±ä¹ŸæŸ¥é˜…äº†ç½‘ä¸Šä¸€äº›èµ„æ–™ç„¶åç»“åˆè‡ªå·±çš„ç»éªŒï¼Œä¸ºäº†èƒ½è®©è‡ªå·±æ›´å¥½çš„ç†è§£<code>this</code>ï¼Œè¿›è€Œæ€»ç»“ä¸€ç¯‡æ–‡ç« ã€‚</p><h2 id="this-æ˜¯ä»€ä¹ˆ"><a href="#this-æ˜¯ä»€ä¹ˆ" class="headerlink" title="this æ˜¯ä»€ä¹ˆ"></a>this æ˜¯ä»€ä¹ˆ</h2><p><code>this</code>æ˜¯ JavaScript è¯­è¨€çš„ä¸€ä¸ªå…³é”®å­—ã€‚å®ƒæ˜¯å‡½æ•°è¿è¡Œæ—¶ï¼Œåœ¨å‡½æ•°ä½“å†…éƒ¨è‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªå¯¹è±¡ï¼Œåªèƒ½åœ¨å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨ã€‚<br>å®é™…æ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰å‘ç”Ÿçš„ç»‘å®šï¼Œä¹Ÿå°±æ˜¯è¯´<code>this</code>å…·ä½“æŒ‡å‘ä»€ä¹ˆï¼Œå–å†³äºä½ æ˜¯æ€ä¹ˆè°ƒç”¨çš„å‡½æ•°ã€‚</p><h2 id="this-æŒ‡å‘çš„å››ç§æƒ…å†µ"><a href="#this-æŒ‡å‘çš„å››ç§æƒ…å†µ" class="headerlink" title="this æŒ‡å‘çš„å››ç§æƒ…å†µ"></a>this æŒ‡å‘çš„å››ç§æƒ…å†µ</h2><p>è¿™å››ç§æƒ…å†µåŸºæœ¬æ¶µç›–äº†JavaScriptä¸­å¸¸è§çš„<code>this</code>æŒ‡å‘é—®é¢˜</p><h3 id="1-å…¨å±€çš„å‡½æ•°è°ƒç”¨ï¼ŒthisæŒ‡å‘window"><a href="#1-å…¨å±€çš„å‡½æ•°è°ƒç”¨ï¼ŒthisæŒ‡å‘window" class="headerlink" title="1. å…¨å±€çš„å‡½æ•°è°ƒç”¨ï¼ŒthisæŒ‡å‘window"></a>1. å…¨å±€çš„å‡½æ•°è°ƒç”¨ï¼ŒthisæŒ‡å‘window</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var a = 1;</span><br><span class="line">function fn() &#123;</span><br><span class="line">   console.log(this.a);</span><br><span class="line">&#125;</span><br><span class="line">fn();  // 1</span><br></pre></td></tr></table></figure><p>è¿™ç§ æƒ…å†µä¸‹çš„<code>this</code>å…¶å®å°±æ˜¯<code>window</code>å¯¹è±¡ï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ã€‚<br>ä½†æ˜¯è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯åŒ¿åå‡½æ•°çš„<code>this</code>ä¹Ÿä¼šæŒ‡å‘<code>window</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var a= &apos;window&apos;;</span><br><span class="line">var obj=&#123;a: &apos;object&apos;&#125;</span><br><span class="line">obj.fn=function()&#123;</span><br><span class="line">console.log(this.a);//Object</span><br><span class="line">+function()&#123;</span><br><span class="line">console.log(this.a)//window</span><br><span class="line">&#125;()</span><br><span class="line">&#125;</span><br><span class="line">obj.fn()</span><br></pre></td></tr></table></figure></p><p>åŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå…·æœ‰å…¨å±€æ€§ï¼Œå› æ­¤å®ƒçš„<code>this</code>å¯¹è±¡é€šå¸¸æŒ‡å‘windowsã€‚<br>å¦‚æœå¯¹æ­¤æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥çœ‹çŸ¥ä¹ä¸Šçš„ç­”æ¡ˆï¼š<a href="https://www.zhihu.com/question/21958425" target="_blank" rel="noopener">çŸ¥ä¹ - åŒ¿åå‡½æ•°çš„thisæŒ‡å‘ä¸ºä»€ä¹ˆæ˜¯window?</a></p><h3 id="2-ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨ï¼ŒthisæŒ‡å‘è¯¥å¯¹è±¡"><a href="#2-ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨ï¼ŒthisæŒ‡å‘è¯¥å¯¹è±¡" class="headerlink" title="2. ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨ï¼ŒthisæŒ‡å‘è¯¥å¯¹è±¡"></a>2. ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨ï¼ŒthisæŒ‡å‘è¯¥å¯¹è±¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var a =&apos;window&apos;</span><br><span class="line">var obj=&#123;</span><br><span class="line">  a: &apos;object&apos;,</span><br><span class="line">  fn: function()&#123;</span><br><span class="line">    console.log(this.a);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj.fn(); // object</span><br></pre></td></tr></table></figure><p>å½“å‡½æ•°ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œ<code>this</code>å°±æŒ‡è¿™ä¸ªå‡½æ•°æ‰€åœ¨çš„å¯¹è±¡ã€‚</p><h3 id="3-ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼ŒthisæŒ‡å‘å®ä¾‹"><a href="#3-ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼ŒthisæŒ‡å‘å®ä¾‹" class="headerlink" title="3. ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼ŒthisæŒ‡å‘å®ä¾‹"></a>3. ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼ŒthisæŒ‡å‘å®ä¾‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function fn() &#123;</span><br><span class="line">ã€€this.x = 1;</span><br><span class="line">&#125;</span><br><span class="line">var obj = new fn();</span><br><span class="line">console.log(obj.x) // 1</span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•°ä¸­çš„<code>this</code>ï¼Œåœ¨é€šè¿‡<code>new</code>ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ï¼Œthiså°±æŒ‡è¿™ä¸ªæ–°å¯¹è±¡ã€‚<br>å¯¹<code>new</code>æœ‰ç–‘é—®çš„è¯ï¼Œå¯ä»¥çœ‹ <a href="https://github.com/mqyqingfeng/Blog/issues/13" target="_blank" rel="noopener">å†´ç¾½çš„åšå®¢ JavaScriptæ·±å…¥ä¹‹newçš„æ¨¡æ‹Ÿå®ç° </a></p><h3 id="4-ä½¿ç”¨call-apply-bindè°ƒç”¨-thisæŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°"><a href="#4-ä½¿ç”¨call-apply-bindè°ƒç”¨-thisæŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°" class="headerlink" title="4. ä½¿ç”¨call/apply/bindè°ƒç”¨, thisæŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°"></a>4. ä½¿ç”¨call/apply/bindè°ƒç”¨, thisæŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">var obj1=&#123;</span><br><span class="line">  a: &apos;boj1&apos;</span><br><span class="line">&#125;</span><br><span class="line">var obj2=&#123;</span><br><span class="line">  a: &apos;obj2&apos;</span><br><span class="line">&#125;</span><br><span class="line">var obj3=&#123;</span><br><span class="line">  a: &apos;obj3&apos;</span><br><span class="line">&#125;</span><br><span class="line">function fn()&#123;</span><br><span class="line">  console.log(this.a);</span><br><span class="line">&#125;</span><br><span class="line">// apply</span><br><span class="line">fn.apply(obj1);// &apos;obj1&apos;</span><br><span class="line">// call</span><br><span class="line">fn.call(obj2);// &apos;obj2&apos;</span><br><span class="line">// bind</span><br><span class="line">var fnBind= fn.bind(obj3);</span><br><span class="line">fnBind();// &apos;obj3&apos;</span><br></pre></td></tr></table></figure><p><code>call/ apply / bind</code>éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼Œå°±æ˜¯æ”¹å˜<code>this</code>çš„æŒ‡å‘ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•å¯ä»¥æŠŠåˆ«äººçš„æ–¹æ³•æ‹¿è¿‡æ¥ç”¨åˆ°è‡ªå·±èº«ä¸Šã€‚</p><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸º <code>null</code> çš„æ—¶å€™ï¼Œè§†ä¸ºæŒ‡å‘ <code>window</code>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var a=&apos;window&apos;</span><br><span class="line">var obj=&#123;</span><br><span class="line">  a: &apos;boj&apos;,</span><br><span class="line">  fn: function ()&#123;</span><br><span class="line">    console.log(this.a);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.fn.call(null);// &apos;window&apos;</span><br></pre></td></tr></table></figure></p><p>åœ¨è¿™é‡Œå¦‚æœæ˜¯<code>obj.fn()</code>è°ƒç”¨çš„<code>fn()</code>æ–¹æ³•ï¼Œ<code>this</code>åº”è¯¥æŒ‡å‘<code>obj</code>æ²¡é”™ã€‚<br>ä½†æ˜¯å› ä¸º<code>call(null)</code>çš„å­˜åœ¨ï¼Œæ”¹å˜äº†æŒ‡å‘ï¼Œæ‰€ä»¥<code>this</code>æŒ‡å‘äº†<code>window</code>ã€‚</p><h2 id="æ·±å…¥ç†è§£"><a href="#æ·±å…¥ç†è§£" class="headerlink" title="æ·±å…¥ç†è§£"></a>æ·±å…¥ç†è§£</h2><p>æ­£å› ä¸ºæ¯”è¾ƒéš¾ç†è§£ï¼Œæ‰€ä»¥<code>this</code>æŒ‡å‘ä¹Ÿæ˜¯é¢è¯•æ—¶æœ€å®¹æ˜“é‡åˆ°çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸‹é¢è¿™é“æˆ‘æ›¾é‡åˆ°çš„ä¸€ä¸ªé¢è¯•é¢˜ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var length = 10;</span><br><span class="line">function fn()&#123;</span><br><span class="line">  console.log(this.length);</span><br><span class="line">&#125;</span><br><span class="line">var obj = &#123;</span><br><span class="line">  length: 5,</span><br><span class="line">  method: function(fn)&#123;</span><br><span class="line">    fn();//10</span><br><span class="line">    arguments[0]();//2 è¿™é‡Œçš„thisæŒ‡å‘çš„argumentsï¼Œæ‰€ä»¥è·å–çš„æ˜¯arguments.length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.method(fn, 1);</span><br></pre></td></tr></table></figure></p><p>åœ¨è¿™é“é¢˜é‡Œï¼Œä¸ä»…è€ƒå¯Ÿäº†å¯¹<code>this</code>ç†Ÿæ‚‰ç¨‹åº¦ï¼Œè¿˜è€ƒå¯Ÿäº†å‡½æ•°çš„ä¼ å‚å½¢å¼ã€ä½œç”¨åŸŸã€ä»¥åŠ<code>arguments</code>è¿™ç§ç‰¹æ®Šçš„æ•°ç»„çš„ç†è§£ã€‚<br>åªæœ‰çœŸæ­£ç†è§£äº†è¿™äº›æ‰èƒ½æ­£ç¡®çš„åˆ¤æ–­<code>this</code>ç©¶ç«ŸæŒ‡å‘äº†è°ã€‚<br>æ‰€ä»¥ï¼Œåªæœ‰å¯¹<code>JavaScript</code>ä¸­çš„å„é¡¹çŸ¥è¯†ç‚¹æ·±å…¥ç†è§£ï¼Œæ‰ä¼šå¯¹<code>this</code>çš„æ¦‚å¿µè¶ŠåŠ æ¸…æ™°ã€‚</p><p>å‚è€ƒï¼š<br><a href="http://www.ruanyifeng.com/blog/2010/04/using_this_keyword_in_javascript.html" target="_blank" rel="noopener">é˜®ä¸€å³° - Javascript çš„ this ç”¨æ³•</a><br><a href="http://caibaojian.com/deep-in-javascript-this.html" target="_blank" rel="noopener">å‰ç«¯å¼€å‘åšå®¢ - æ·±å…¥ç†è§£JavaScript this</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å› ä¸ºæ—¥å¸¸å·¥ä½œä¸­ç»å¸¸ä½¿ç”¨åˆ°&lt;code&gt;this&lt;/code&gt;ï¼Œè€Œä¸”åœ¨JavaScriptä¸­&lt;code&gt;this&lt;/code&gt;çš„æŒ‡å‘é—®é¢˜ä¹Ÿå¾ˆå®¹æ˜“è®©äººæ··æ·†ä¸€éƒ¨åˆ†çŸ¥è¯†ã€‚&lt;br&gt;è¿™æ®µæ—¶é—´ç¿»é˜…äº†ä¸€äº›ä¹¦ç±ä¹ŸæŸ¥é˜…äº†ç½‘ä¸Šä¸€äº›èµ„æ–™ç„¶åç»“åˆè‡ªå·±çš„ç»éªŒï¼Œä¸ºäº†èƒ½è®©è‡ªå·±æ›´å¥½çš„ç†è§£&lt;code&gt;this&lt;
      
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ç†è§£JS åŸå‹é“¾</title>
    <link href="http://yoursite.com/2019/01/18/%E7%90%86%E8%A7%A3JS%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
    <id>http://yoursite.com/2019/01/18/ç†è§£JSåŸå‹é“¾/</id>
    <published>2019-01-18T14:21:55.000Z</published>
    <updated>2019-01-18T15:08:50.007Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ç›´ä»¥æ¥å¯¹äºJavaScript çš„åŸå‹é“¾çš„æ¦‚å¿µï¼Œå§‹ç»ˆæœ‰äº›ä¸œè¥¿æœ‰ä¸€ç§æ¨¡ç³Šæ„Ÿï¼Œæœ€è¿‘åˆšå¥½æœ‰æ—¶é—´å°±å¡Œä¸‹å¿ƒè®¤çœŸçš„æŠŠã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸­ç›¸å…³å†…å®¹è®¤çœŸè¯»äº†ä¸€éï¼Œä¹ŸæŸ¥çœ‹äº†å¾ˆå¤šç½‘ä¸Šå¾ˆå¤šèµ„æ–™ï¼Œä»¥å‰å¾ˆå¤šä¸æ˜ç™½çš„åœ°æ–¹ä¹Ÿæ¸æ¸æ˜ç™½äº†èµ·æ¥ã€‚<br>å†™ä¸€ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹æœ€è¿‘å­¦ä¹ çš„æ„Ÿæ‚Ÿã€‚</p><h3 id="å­—é¢é‡åˆ›å»ºå¯¹è±¡"><a href="#å­—é¢é‡åˆ›å»ºå¯¹è±¡" class="headerlink" title="å­—é¢é‡åˆ›å»ºå¯¹è±¡"></a>å­—é¢é‡åˆ›å»ºå¯¹è±¡</h3><p>æˆ‘ä»¬é€šå¸¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ— éå°±ä¸¤ç§æ–¹å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. var obj= new Object();//new ä¸€ä¸ªObjectçš„å®ä¾‹</span><br><span class="line">2. var obj= &#123;&#125;;//å¯¹è±¡å­—é¢é‡</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨å¯¹è±¡å­—é¢é‡ å’Œä½¿ç”¨newçš„æ–¹å¼æ˜¯ä¸€æ ·çš„ã€‚<br>ä¸ºäº†ç®€ä¾¿ï¼Œä¸€èˆ¬æ¨èä½¿ç”¨ä½¿ç”¨å­—é¢é‡ï¼š<code>var o= {};</code></p><h3 id="æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡"><a href="#æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡" class="headerlink" title="æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡"></a>æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡</h3><p>å½“æˆ‘ä»¬æƒ³è¦åˆ›å»ºè‡ªå®šä¹‰çš„å¯¹è±¡æ—¶ï¼Œéœ€è¦ç”¨åˆ°æ„é€ å‡½æ•°ã€‚<br>æ„é€ å‡½æ•°å’Œæ™®é€šå‡½æ•°æœ‰ä¸¤ä¸ªåŒºåˆ«ï¼š    </p><pre><code>1. ä¾¿äºå’Œæ™®é€šå‡½æ•°åŒºåˆ†ï¼Œå‡½æ•°åé¦–å­—æ¯å¤§å†™ã€‚    2. ä½¿ç”¨ `new` æ“ä½œç¬¦è°ƒç”¨ï¼Œè¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚    </code></pre><p>é™¤æ­¤ä¹‹å¤–å’Œæ™®é€šå‡½æ•°ä¸€æ‘¸ä¸€æ ·ã€‚<br>æˆ‘ä»¬ä½¿ç”¨æ„é€ å‡½æ•°<code>Person</code>æ¥åˆ›å»ºä¸¤ä¸ªå®ä¾‹å¯¹è±¡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function Person(name)&#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">    this.sayName= function ()&#123; alert(this.name) &#125;</span><br><span class="line"> &#125;</span><br><span class="line">var person1 = new Person(&apos;å°æ˜&apos;);</span><br><span class="line">var person2 = new Person(&apos;å°çº¢&apos;);</span><br><span class="line">console.log(person1);//&#123;name: &quot;å°æ˜&quot;, sayName: fun&#125;</span><br><span class="line">console.log(person2);//&#123;name: &quot;å°çº¢&quot;, sayName: fun&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢çš„ä¾‹å­ä¸éš¾ç†è§£ï¼Œè™½ç„¶è¿™ä¸¤ä¸ªå®ä¾‹å¯¹è±¡éƒ½æœ‰<code>sayName</code>æ–¹æ³•ï¼Œè€Œä¸”ä»–ä»¬ä¸¤ä¸ªçš„ä½œç”¨ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä½†å´æ˜¯ä¸¤ä¸ªæ–¹æ³•ï¼Œåªæ˜¯åå­—å’Œä½œç”¨ä¸€æ ·ã€‚    </p><p>ç”»ä¸ªå›¾è¡¨ç¤ºä¸€ä¸‹ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/7072486-e6a1cb2af9592327?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="131547802804_.pic.jpg" title="">                </div>                <div class="image-caption">131547802804_.pic.jpg</div>            </figure></p><p>å¦‚æœè¿˜ä¸æ˜ç™½ï¼Œæˆ‘åœ¨æ‰“ä¸ªæ¯”å–»ï¼š<br>å°±åƒAè¡—ä¸Šæœ‰ä¸€é—´éº¦å½“åŠ³ï¼Œåœ¨Bè¡—ä¸Šä¹Ÿå¼€äº†ä¸€é—´éº¦å½“åŠ³ï¼Œå®ƒä»¬éƒ½å«éº¦å½“åŠ³ï¼Œä½œç”¨ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ä½ æ€»ä¸èƒ½è¯´ä»–ä»¬æ˜¯ä¸€é—´éº¦å½“åŠ³å§ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person1.sayName === person2.sayName;<span class="comment">//false</span></span><br></pre></td></tr></table></figure><p>å¦‚æœè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬æ¯æ„é€ å‡ºæ¥ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½è¦å•ç‹¬ä¸ºè¿™ä¸ªå¯¹è±¡åˆ›å»ºå‡ºä¸€ä¸ªä¸“å±äºå®ƒè‡ªå·±ä½¿ç”¨çš„<code>sayName</code>ï¼Œè¿™æ˜¯å¾ˆå ç”¨å†…å­˜çš„ã€‚  </p><p>é‚£æˆ‘ä»¬èƒ½ä¸èƒ½è®©æ‰€æœ‰çš„å®ä¾‹å¯¹è±¡éƒ½å…±åŒä½¿ç”¨ä¸€ä¸ª<code>sayName</code>æ–¹æ³•ï¼Œæ¥èŠ‚çœå†…å­˜ï¼Œæå‡æ•ˆç‡å‘¢ï¼Ÿè¿™éœ€è¦æˆ‘ä»¬å…ˆç†è§£åŸå‹å¯¹è±¡çš„æ¦‚å¿µã€‚</p><h3 id="åŸå‹å¯¹è±¡"><a href="#åŸå‹å¯¹è±¡" class="headerlink" title="åŸå‹å¯¹è±¡"></a>åŸå‹å¯¹è±¡</h3><p>æˆ‘ä»¬å…ˆäº†è§£åŸå‹å¯¹è±¡çš„æ¦‚å¿µã€‚</p><blockquote><p>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰åŸå‹å¯¹è±¡ï¼ˆnullé™¤å¤–ï¼‰ï¼Œæˆ‘ä»¬ç”¨<code>__proto__</code>è¡¨ç¤ºï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰<code>prototype</code>å±æ€§ï¼ŒæŒ‡å‘å®ä¾‹çš„åŸå‹å¯¹è±¡ã€‚</p></blockquote><p>å¯¹ç…§è¿™å¥è¯ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ï¼Œä¹Ÿå°±æ˜¯è¯´<code>Person.prototype</code>æŒ‡å‘<code>person1</code>çš„åŸå‹å¯¹è±¡(<code>__proto__</code>),<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype === person1.__proto__; <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œæ¥çœ‹ä¸€å¼ å›¾ã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/7072486-f2e5ab0014367d09?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="71547797523_.pic.jpg" title="">                </div>                <div class="image-caption">71547797523_.pic.jpg</div>            </figure><p>æ©~ä»–ä»¬çš„å…³ç³»å¤§æ¦‚å°±æ˜¯è¿™æ ·ã€‚</p><h3 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h3><p>åŸå‹é“¾ç®€å•ç”¨ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼š</p><blockquote><p>åŸå‹é“¾å°±æ˜¯ å¯¹è±¡çš„<code>__proto__</code>æ‰€è¿æ¥çš„é“¾çŠ¶ç»“æ„</p></blockquote><p>ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ç†è§£åŸå‹é“¾ï¼Œä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">function F()&#123;</span><br><span class="line">    this.a = 1;</span><br><span class="line">    this.b = 2;</span><br><span class="line">&#125;</span><br><span class="line">F.prototype.b = 3;</span><br><span class="line">F.prototype.c = 4;</span><br><span class="line">var o = new F();// &#123;a: 1, b: 2&#125;</span><br><span class="line">//åŸå‹é“¾ï¼š</span><br><span class="line">//o --&gt; o.__proto__ --&gt; o.__proto__.__proto__ --&gt; null</span><br><span class="line">// å…¶ä¸­çš„ --&gt; å°±è¡¨ç¤º __proto__ ä¹Ÿå°±æ˜¯åŸå‹é“¾</span><br><span class="line">console.log(o.a); // 1</span><br><span class="line">// oä¸Šæœ‰aè¿™ä¸ªå±æ€§å—ï¼Ÿæœ‰çš„ï¼Œè¯¥å±æ€§çš„å€¼ä¸º1</span><br><span class="line"></span><br><span class="line">console.log(o.b); // 2</span><br><span class="line">// oä¸Šæœ‰bè¿™ä¸ªå±æ€§å—ï¼Ÿæœ‰çš„ï¼Œè¯¥å±æ€§çš„å€¼ä¸º2</span><br><span class="line">// åŸå‹ä¸Šä¹Ÿæœ‰ä¸€ä¸ª&apos;b&apos;å±æ€§,ä½†æ˜¯å®ƒä¸ä¼šè¢«è®¿é—®åˆ°.è¿™ç§æƒ…å†µç§°ä¸º&quot;å±æ€§é®è”½ &quot;</span><br><span class="line"></span><br><span class="line">console.log(o.c); // 4</span><br><span class="line">// oä¸Šæœ‰cè¿™ä¸ªå±æ€§å—ï¼Ÿæ²¡æœ‰ï¼Œé‚£çœ‹çœ‹åŸå‹ä¸Šæœ‰æ²¡æœ‰</span><br><span class="line">// o.__proto__ä¸Šæœ‰cè¿™ä¸ªå±æ€§å—ï¼Ÿæœ‰çš„ï¼Œè¯¥å±æ€§çš„å€¼ä¸º4</span><br><span class="line"></span><br><span class="line">console.log(o.d); // undefined</span><br><span class="line">// oä¸Šæœ‰dè¿™ä¸ªå±æ€§å—ï¼Ÿæ²¡æœ‰,é‚£çœ‹çœ‹åŸå‹ä¸Šæœ‰æ²¡æœ‰</span><br><span class="line">// o.__proto__ ä¸Šæœ‰dè¿™ä¸ªå±æ€§å—ï¼Ÿæ²¡æœ‰ï¼Œé‚£çœ‹çœ‹å®ƒçš„åŸå‹ä¸Šæœ‰æ²¡æœ‰</span><br><span class="line">// o.__proto__.__proto__ ä¸º nullï¼Œåœæ­¢æœç´¢</span><br><span class="line">// æ²¡æœ‰æ‰¾åˆ°då±æ€§ï¼Œè¿”å›undefinedã€‚</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬ç”»å¼ å›¾æ¥è¡¨ç¤ºï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/7072486-95ee1c64fb5b51e0?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="91547800262_.pic_hd.jpg" title="">                </div>                <div class="image-caption">91547800262_.pic_hd.jpg</div>            </figure><p>å›¾ä¸­è¿™æ¡çº¢è‰²çš„çº¿å°±æ˜¯åŸå‹é“¾ã€‚<br>ç”±æ­¤å¯è§ï¼Œ<strong>å®ä¾‹å¯¹è±¡å¯è®¿é—®è‡ªå·±åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³•</strong>ï¼Œé¢..å‡†ç¡®æ¥è¯´æ˜¯:</p><ol><li>å½“ä¸€ä¸ªå¯¹è±¡ æŸ¥æ‰¾å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œè‡ªå·±æœ‰ï¼Œåœæ­¢æŸ¥æ‰¾ï¼Œè¿”å›ç»“æœã€‚</li><li>è‡ªå·±æ²¡æœ‰ï¼Œé¡ºç€<code>__proto__</code>ä¸€ç›´å‘ä¸ŠæŸ¥æ‰¾ï¼Œå¦‚æ‰¾åˆ°ï¼Œåœæ­¢æŸ¥æ‰¾ï¼Œè¿”å›ç»“æœã€‚</li><li>å¦‚æœä¸€ç›´æ‰¾åˆ°äº†åŸå‹é“¾çš„æœ€é¡¶ç«¯(null)ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›<code>undefined</code>ã€‚</li></ol><p>æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹é‚£ä¸ª<code>sayName</code>çš„é—®é¢˜ï¼š<br><strong>æ€ä¹ˆè®©æ‰€æœ‰çš„å®ä¾‹å¯¹è±¡éƒ½æ˜¯ç”¨ä¸€ä¸ª<code>sayName</code>æ–¹æ³•å‘¢</strong>ã€‚<br>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŸå‹å¯¹è±¡æ¥è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚<br>æˆ‘ä»¬æŠŠ<code>sayName</code>æ–¹æ³•æ”¾åˆ°å®ä¾‹çš„åŸå‹å¯¹è±¡ä¸Šé¢ï¼Œä¹Ÿå°±æ˜¯<code>Person.prototype</code>ä¸Šé¢æ¥ä¾›æ‰€æœ‰å®ä¾‹ä½¿ç”¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function Person(name)&#123;</span><br><span class="line">    this.name = name;</span><br><span class="line"> &#125;</span><br><span class="line">Person.prototype.sayName=function ()&#123;</span><br><span class="line">    alert(this.name);</span><br><span class="line">&#125;</span><br><span class="line">var person1 = new Person(&apos;å°æ˜&apos;);</span><br><span class="line">var person2 = new Person(&apos;å°çº¢&apos;);</span><br><span class="line">person1.sayName === person2.sayName;//true</span><br></pre></td></tr></table></figure></p><p>ç”¨å›¾è¡¨ç¤ºï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/7072486-f4d5c032a9b2b20f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="101547801223_.pic.jpg" title="">                </div>                <div class="image-caption">101547801223_.pic.jpg</div>            </figure></p><h3 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><p><strong>constructor</strong><br>è¯´ä¸€ä¸‹æˆ‘çš„ç»å†ï¼Œä¸€å¼€å§‹ç†è§£åŸå‹é“¾æ—¶ï¼Œä¸€ç›´åœ¨<code>prototype</code>ã€<code>__proto__</code>ã€<code>constructor</code>åœ¨è¿™ä¸ªä¸‰ä¸ªå±æ€§ä¸­ç»•æ¥ç»•å»ã€‚</p><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘æŠŠ<code>constructor</code>æ”¾åœ¨æœ€åäº†ã€‚<br><code>constructor</code>å­—é¢æ„æ€å°±å¾ˆå®¹æ˜“ç†è§£ï¼Œæ„é€ å‡½æ•°çš„æ„æ€ã€‚<br>ä¸€å¥è¯è§£é‡Š:</p><blockquote><p>æ¯ä¸ªåŸå‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª constructor å±æ€§æŒ‡å‘ å…³è”çš„æ„é€ å‡½æ•°ã€‚</p></blockquote><p>è¿˜æ˜¯ä¸Šé¢é‚£ä¸ªä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(Person.prototype.constructor);//Person()&#123; fun &#125;</span><br></pre></td></tr></table></figure></p><p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå®ä¾‹å¯¹è±¡ä¸Šæ²¡æœ‰<code>constructor</code>å±æ€§ã€‚<br>ä½†æ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(person1.constructor) ;//Person()&#123; fun &#125;</span><br></pre></td></tr></table></figure></p><p>å¾—å‡ºè¿™ä¸ªç»“æœå¾ˆç®€å•:<br>å®ä¾‹ä¸ŠæŸ¥æ‰¾ä¸åˆ°<code>constructor</code>å±æ€§ â€“&gt; é¡ºç€<code>__proto__</code>åœ¨åŸå‹å¯¹è±¡ä¸Šæ‰¾ â€“&gt; æ‰¾åˆ°å¹¶è¿”å›ã€‚</p><p><strong>Object.prototype</strong><br>åˆšæ‰æˆ‘ä»¬è¯´äº†åˆ›å»ºå¯¹è±¡çš„ä¸¤ç§æ–¹å¼ï¼šå­—é¢é‡åˆ›å»ºå¯¹è±¡å’Œä½¿ç”¨<code>new</code>æ“ä½œç¬¦åˆ›å»ºå¯¹è±¡ã€‚<br>è¿™ä¸¤ç§æ–¹å¼åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡éƒ½ä¼šç»§æ‰¿<code>Object.prototyoe</code>ä¸Šçš„æ–¹æ³•ã€‚<br>æ¯”å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨å­—é¢é‡æ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡<code>o</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var o = &#123;value: 1&#125;;</span><br><span class="line">o.toString();//&quot;[object Object]&quot;</span><br><span class="line">//æŸ¥æ‰¾è¿‡ç¨‹ï¼š o --&gt; o.__proto__ æ‰¾åˆ°è¿”å›</span><br><span class="line">o.__proto__ === Object.prototype;//true</span><br></pre></td></tr></table></figure></p><p><code>o</code>è¿™ä¸ªçš„å¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰<code>toString</code>è¿™ä¸ªæ–¹æ³•ï¼Œä½†å®ƒå´å¯ä»¥ä½¿ç”¨<code>toString</code>æ–¹æ³•ã€‚<br>å› ä¸ºå®ƒç»§æ‰¿äº†<code>Object.prototyoe</code>ä¸Šçš„<code>toString</code>çš„æ–¹æ³•ã€‚</p><p><strong>null</strong><br>æ—¢ç„¶å¯¹è±¡éƒ½ä¼šç»§æ‰¿è‡ª<code>Object.prototype</code>ä¸Šé¢çš„æ–¹æ³•ï¼Œé‚£å®ƒè‡ªå·±çš„åŸå‹åˆæ˜¯ä»€ä¹ˆå‘¢ã€‚ç­”æ¡ˆæ˜¯<code>null</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.prototype.__prototype__ === null;//true</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸Šä»…è‡ªå·±å­¦ä¹ æ‰€å¾—ï¼Œå¦‚æœ‰ä¸å½“ä¹‹å¤„ æœ›æŒ‡å‡ºã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¸€ç›´ä»¥æ¥å¯¹äºJavaScript çš„åŸå‹é“¾çš„æ¦‚å¿µï¼Œå§‹ç»ˆæœ‰äº›ä¸œè¥¿æœ‰ä¸€ç§æ¨¡ç³Šæ„Ÿï¼Œæœ€è¿‘åˆšå¥½æœ‰æ—¶é—´å°±å¡Œä¸‹å¿ƒè®¤çœŸçš„æŠŠã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸­ç›¸å…³å†…å®¹è®¤çœŸè¯»äº†ä¸€éï¼Œä¹ŸæŸ¥çœ‹äº†å¾ˆå¤šç½‘ä¸Šå¾ˆå¤šèµ„æ–™ï¼Œä»¥å‰å¾ˆå¤šä¸æ˜ç™½çš„åœ°æ–¹ä¹Ÿæ¸æ¸æ˜ç™½äº†èµ·æ¥ã€‚&lt;br&gt;å†™ä¸€ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹æœ€è¿‘å­¦ä¹ çš„æ„Ÿæ‚Ÿã€‚&lt;
      
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Expressæ­å»ºä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨</title>
    <link href="http://yoursite.com/2019/01/04/%E4%BD%BF%E7%94%A8Express%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>http://yoursite.com/2019/01/04/ä½¿ç”¨Expressæ­å»ºä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨/</id>
    <published>2019-01-04T14:21:55.000Z</published>
    <updated>2019-01-04T15:27:50.960Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Expressæ¡†æ¶"><a href="#Expressæ¡†æ¶" class="headerlink" title="Expressæ¡†æ¶"></a>Expressæ¡†æ¶</h2><h3 id="Web-åº”ç”¨ç¨‹åº"><a href="#Web-åº”ç”¨ç¨‹åº" class="headerlink" title="Web åº”ç”¨ç¨‹åº"></a>Web åº”ç”¨ç¨‹åº</h3><p>Express æ˜¯ä¸€ä¸ªä¿æŒæœ€å°è§„æ¨¡çš„çµæ´»çš„ Node.js Web åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œä¸º Web å’Œç§»åŠ¨åº”ç”¨ç¨‹åºæä¾›ä¸€ç»„å¼ºå¤§çš„åŠŸèƒ½ã€‚</p><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>ä½¿ç”¨æ‚¨æ‰€é€‰æ‹©çš„å„ç§ HTTP å®ç”¨å·¥å…·å’Œä¸­é—´ä»¶ï¼Œå¿«é€Ÿæ–¹ä¾¿åœ°åˆ›å»ºå¼ºå¤§çš„ APIã€‚</p><h3 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h3><p>Express æä¾›ç²¾ç®€çš„åŸºæœ¬ Web åº”ç”¨ç¨‹åºåŠŸèƒ½ï¼Œè€Œä¸ä¼šéšè—æ‚¨äº†è§£å’Œé’ççš„ Node.js åŠŸèƒ½ã€‚</p><h2 id="Express-è·¯ç”±åŸºæœ¬ä½¿ç”¨"><a href="#Express-è·¯ç”±åŸºæœ¬ä½¿ç”¨" class="headerlink" title="Express-è·¯ç”±åŸºæœ¬ä½¿ç”¨"></a>Express-è·¯ç”±åŸºæœ¬ä½¿ç”¨</h2><p>ä¸‹è½½ï¼š<code>npm install express --save</code></p><h3 id="Hello-world"><a href="#Hello-world" class="headerlink" title="Hello world"></a>Hello world</h3><p>æ–°å»ºä¸€ä¸ª<code>server.js</code>æ–‡ä»¶ï¼Œç„¶åè¾“å…¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const app= express();</span><br><span class="line"></span><br><span class="line">app.get(&apos;/&apos;, (req, res)=&gt;&#123;</span><br><span class="line">    req.send(&apos;Hello world&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(8083, ()=&gt;&#123;</span><br><span class="line">    console.log(&apos;Server is running at http://localhost:8083&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ç„¶åè¿è¡Œï¼š<code>node server.js</code><br>æ‰“å¼€ï¼š<a href="http://localhost:8083/" target="_blank" rel="noopener">http://localhost:8083/</a><br>å°±å‡ºç°ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-b7ae26b3cdafc65a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="11546413582_.pic.jpg" title="">                </div>                <div class="image-caption">11546413582_.pic.jpg</div>            </figure></p><h3 id="è¯·æ±‚å’Œå“åº”"><a href="#è¯·æ±‚å’Œå“åº”" class="headerlink" title="è¯·æ±‚å’Œå“åº”"></a>è¯·æ±‚å’Œå“åº”</h3><p>Express åº”ç”¨ä½¿ç”¨å›è°ƒå‡½æ•°çš„å‚æ•°ï¼š request å’Œ response å¯¹è±¡æ¥å¤„ç†è¯·æ±‚å’Œå“åº”çš„æ•°æ®ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(&apos;/&apos;, function (request, response) &#123;</span><br><span class="line">   // --</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>request å’Œ response å¯¹è±¡çš„å…·ä½“ä»‹ç»ï¼š</p><h3 id="Request-å¯¹è±¡"><a href="#Request-å¯¹è±¡" class="headerlink" title="Request å¯¹è±¡"></a>Request å¯¹è±¡</h3><blockquote><p>request å¯¹è±¡è¡¨ç¤º HTTP è¯·æ±‚ï¼ŒåŒ…å«äº†è¯·æ±‚æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå‚æ•°ï¼Œå†…å®¹ï¼ŒHTTP å¤´éƒ¨ç­‰å±æ€§ã€‚å¸¸è§å±æ€§æœ‰ï¼š</p></blockquote><p>req.appï¼šå½“callbackä¸ºå¤–éƒ¨æ–‡ä»¶æ—¶ï¼Œç”¨req.appè®¿é—®expressçš„å®ä¾‹<br>req.baseUrlï¼šè·å–è·¯ç”±å½“å‰å®‰è£…çš„URLè·¯å¾„<br>req.body / req.cookiesï¼šè·å¾—ã€Œè¯·æ±‚ä¸»ä½“ã€/ Cookies<br>req.fresh / req.staleï¼šåˆ¤æ–­è¯·æ±‚æ˜¯å¦è¿˜ã€Œæ–°é²œã€<br>req.hostname / req.ipï¼šè·å–ä¸»æœºåå’ŒIPåœ°å€<br>req.originalUrlï¼šè·å–åŸå§‹è¯·æ±‚URL<br>req.paramsï¼šè·å–è·¯ç”±çš„parameters<br>req.pathï¼šè·å–è¯·æ±‚è·¯å¾„<br>req.protocolï¼šè·å–åè®®ç±»å‹<br>req.queryï¼šè·å–URLçš„æŸ¥è¯¢å‚æ•°ä¸²<br>req.routeï¼šè·å–å½“å‰åŒ¹é…çš„è·¯ç”±<br>req.subdomainsï¼šè·å–å­åŸŸå<br>req.accepts()ï¼šæ£€æŸ¥å¯æ¥å—çš„è¯·æ±‚çš„æ–‡æ¡£ç±»å‹<br>req.acceptsCharsets / req.acceptsEncodings / req.acceptsLanguagesï¼šè¿”å›æŒ‡å®šå­—ç¬¦é›†çš„ç¬¬ä¸€ä¸ªå¯æ¥å—å­—ç¬¦ç¼–ç <br>req.get()ï¼šè·å–æŒ‡å®šçš„HTTPè¯·æ±‚å¤´<br>req.is()ï¼šåˆ¤æ–­è¯·æ±‚å¤´Content-Typeçš„MIMEç±»å‹</p><h3 id="Response-å¯¹è±¡"><a href="#Response-å¯¹è±¡" class="headerlink" title="Response å¯¹è±¡"></a>Response å¯¹è±¡</h3><blockquote><p>response å¯¹è±¡è¡¨ç¤º HTTP å“åº”ï¼Œå³åœ¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶å‘å®¢æˆ·ç«¯å‘é€çš„ HTTP å“åº”æ•°æ®ã€‚å¸¸è§å±æ€§æœ‰ï¼š</p></blockquote><p>res.appï¼šåŒreq.appä¸€æ ·<br>res.append()ï¼šè¿½åŠ æŒ‡å®šHTTPå¤´<br>res.set()åœ¨res.append()åå°†é‡ç½®ä¹‹å‰è®¾ç½®çš„å¤´<br>res.cookie(nameï¼Œvalue [ï¼Œoption])ï¼šè®¾ç½®Cookie<br>opition: domain / expires / httpOnly / maxAge / path / secure / signed<br>res.clearCookie()ï¼šæ¸…é™¤Cookie<br>res.download()ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶<br>res.get()ï¼šè¿”å›æŒ‡å®šçš„HTTPå¤´<br>res.json()ï¼šä¼ é€JSONå“åº”<br>res.jsonp()ï¼šä¼ é€JSONPå“åº”<br>res.location()ï¼šåªè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œä¸è®¾ç½®çŠ¶æ€ç æˆ–è€…close response<br>res.redirect()ï¼šè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œå¹¶ä¸”è®¾ç½®çŠ¶æ€ç 302<br>res.render(view,[locals],callback)ï¼šæ¸²æŸ“ä¸€ä¸ªviewï¼ŒåŒæ—¶å‘callbackä¼ é€’æ¸²æŸ“åçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æœ‰é”™è¯¯å‘ç”Ÿnext(err)å°†ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚callbackå°†ä¼šè¢«ä¼ å…¥ä¸€ä¸ªå¯èƒ½å‘ç”Ÿçš„é”™è¯¯ä»¥åŠæ¸²æŸ“åçš„é¡µé¢ï¼Œè¿™æ ·å°±ä¸ä¼šè‡ªåŠ¨è¾“å‡ºäº†ã€‚<br>res.send()ï¼šä¼ é€HTTPå“åº”<br>res.sendFile(path [ï¼Œoptions] [ï¼Œfn])ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ -ä¼šè‡ªåŠ¨æ ¹æ®æ–‡ä»¶extensionè®¾å®šContent-Type<br>res.set()ï¼šè®¾ç½®HTTPå¤´ï¼Œä¼ å…¥objectå¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ªå¤´<br>res.status()ï¼šè®¾ç½®HTTPçŠ¶æ€ç <br>res.type()ï¼šè®¾ç½®Content-Typeçš„MIMEç±»å‹</p><h2 id="Express-è·¯ç”±"><a href="#Express-è·¯ç”±" class="headerlink" title="Express-è·¯ç”±"></a>Express-è·¯ç”±</h2><blockquote><p>æˆ‘ä»¬å·²ç»äº†è§£äº† HTTP è¯·æ±‚çš„åŸºæœ¬åº”ç”¨ï¼Œè€Œè·¯ç”±å†³å®šäº†ç”±è°(æŒ‡å®šè„šæœ¬)å»å“åº”å®¢æˆ·ç«¯è¯·æ±‚ã€‚<br>åœ¨HTTPè¯·æ±‚ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è·¯ç”±æå–å‡ºè¯·æ±‚çš„URLä»¥åŠGET/POSTå‚æ•°ã€‚</p></blockquote><p>è·¯ç”±çš„åŸºæœ¬å½¢å¼ï¼š<br><code>app.METHOD(PATH, HANDLER)</code></p><ol><li><code>app</code> è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªExpressçš„å®ä¾‹</li><li><code>METHOD</code> æ˜¯httpè¯·æ±‚çš„æ–¹æ³•ï¼ˆget, psot..ï¼‰</li><li><code>PATH</code> æœåŠ¡å™¨ä¸Šçš„è·¯å¾„</li><li><code>HANDLER</code>è¯·æ±‚ä¹‹åçš„æ‰§è¡Œå‡½æ•°</li></ol><p>ä¸‹é¢çš„ç¤ºä¾‹è¯´æ˜äº†å¦‚ä½•å®šä¹‰è·¯ç”±ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// å¯¹/news é¡µé¢è¿›è¡Œgetè¯·æ±‚</span><br><span class="line">app.get(&apos;news&apos;, (req, res)=&gt;&#123;</span><br><span class="line">    res.send(&apos;Hello news&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">// å¯¹/about é¡µé¢è¿›è¡Œpostè¯·æ±‚</span><br><span class="line">app.post(&apos;about&apos;, (req, res)=&gt;&#123;</span><br><span class="line">    res.send(&apos;Hello about&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">// å¯¹/list* å¯åŒ¹é… /list+ä»»æ„å­—ç¬¦</span><br><span class="line">app.get(&apos;/list*&apos;, (req, res)=&gt;&#123;</span><br><span class="line">    res.send(&apos;Hello list pages&apos;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ç„¶åè¿è¡Œï¼š<code>node server.js</code><br>æ‰“å¼€ï¼š<a href="http://localhost:8083/" target="_blank" rel="noopener">http://localhost:8083/</a><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-b8692b839960c7cf.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="21546417068_.pic.jpg" title="">                </div>                <div class="image-caption">21546417068_.pic.jpg</div>            </figure><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-688f54ceb329ceb1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="31546417103_.pic.jpg" title="">                </div>                <div class="image-caption">31546417103_.pic.jpg</div>            </figure><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-e0af0827093b7ac1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="41546417120_.pic.jpg" title="">                </div>                <div class="image-caption">41546417120_.pic.jpg</div>            </figure></p><h2 id="Express-æ­å»ºé™æ€èµ„æºåº“"><a href="#Express-æ­å»ºé™æ€èµ„æºåº“" class="headerlink" title="Express-æ­å»ºé™æ€èµ„æºåº“"></a>Express-æ­å»ºé™æ€èµ„æºåº“</h2><blockquote><p>Express æä¾›äº†å†…ç½®çš„ä¸­é—´ä»¶ express.static æ¥è®¾ç½®é™æ€æ–‡ä»¶å¦‚ï¼šå›¾ç‰‡ï¼Œ CSS, JavaScript ç­‰ã€‚</p></blockquote><p>ä½ å¯ä»¥ä½¿ç”¨ express.static ä¸­é—´ä»¶æ¥è®¾ç½®é™æ€æ–‡ä»¶è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å°†å›¾ç‰‡ï¼Œ CSS, JavaScript æ–‡ä»¶æ”¾åœ¨ public ç›®å½•ä¸‹ï¼Œä½ å¯ä»¥è¿™ä¹ˆå†™ï¼š<br><code>app.use(express.static(&#39;public&#39;));</code></p><p>ç°åœ¨ï¼Œä½ å°±å¯ä»¥è®¿é—® public ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶äº†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public/index.html</span><br><span class="line">public/images</span><br><span class="line">public/images/bg.jpeg</span><br><span class="line">public/css</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><p>å¦‚æœè¦ä½¿ç”¨å¤šä¸ªé™æ€èµ„æºç›®å½•ï¼Œè¯·å¤šæ¬¡è°ƒç”¨ express.static ä¸­é—´ä»¶å‡½æ•°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(&apos;public&apos;))</span><br><span class="line">app.use(express.static(&apos;files&apos;))</span><br></pre></td></tr></table></figure></p><p> Express åœ¨é™æ€ç›®å½•æŸ¥æ‰¾æ–‡ä»¶ï¼Œå› æ­¤ï¼Œå­˜æ”¾é™æ€æ–‡ä»¶çš„ç›®å½•åä¸ä¼šå‡ºç°åœ¨ URL ä¸­ã€‚<br>ä½†æ˜¯æ‚¨å¯ä»¥ç»™é™æ€ç›®å½•æ·»åŠ ä¸€ä¸ªè·¯ç”±ï¼š<br><code>app.use(&#39;/static&#39;, express.static(path.join(__dirname, &#39;public&#39;)))</code><br>è®¾ç½®<code>/static</code>ä¸º<code>/public</code>ç›®å½•çš„è·¯ç”±ã€‚<br>ç°åœ¨ï¼Œä½ å°±å¯ä»¥é€šè¿‡å¸¦æœ‰ /static å‰ç¼€åœ°å€æ¥è®¿é—® public ç›®å½•ä¸­çš„æ–‡ä»¶äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8083/static/css</span><br><span class="line">http://localhost:8083/static/css/index.css</span><br><span class="line">http://localhost:8083/static/image</span><br><span class="line">http://localhost:8083/static/images/bg.jpeg</span><br><span class="line">http://localhost:8083/static/index.html</span><br></pre></td></tr></table></figure></p><p>ä¸ºäº†å®‰å…¨ï¼Œæœ€å¥½ä½¿ç”¨ç»å¯¹è·¯ç”±ï¼š<br><code>app.use(&#39;/static&#39;, express.static(path.join(__dirname, &#39;public&#39;)))</code><br>ç„¶åè¿è¡Œï¼š<code>node server.js</code><br>æ‰“å¼€ï¼š<a href="http://localhost:8083/static" target="_blank" rel="noopener">http://localhost:8083/static</a><br>å°±å¯ä»¥è®¿é—®publicä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¦‚å›¾ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-8d727856b5ec84a3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="61546420083_.pic_hd.jpg" title="">                </div>                <div class="image-caption">61546420083_.pic_hd.jpg</div>            </figure></p><h2 id="Express-æ¨¡æ¿å¼•æ“ä¹‹EJS"><a href="#Express-æ¨¡æ¿å¼•æ“ä¹‹EJS" class="headerlink" title="Express-æ¨¡æ¿å¼•æ“ä¹‹EJS"></a>Express-æ¨¡æ¿å¼•æ“ä¹‹EJS</h2><blockquote><p>EJS æ˜¯ä¸€å¥—ç®€å•çš„æ¨¡æ¿è¯­è¨€ï¼Œå¸®ä½ åˆ©ç”¨æ™®é€šçš„ JavaScript ä»£ç ç”Ÿæˆ HTML é¡µé¢ã€‚</p></blockquote><p>ä¸‹è½½Ejs: <code>npm install ejs --save</code><br>åŒç›®å½•ä¸‹æ–°å»º<code>myejs.js</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const express= require(&apos;express&apos;);</span><br><span class="line">const app = express();</span><br><span class="line">//è®¾ç½®æ¨¡æ¿æ–‡ä»¶çš„ç›®å½•,å¹¶ä¸”æ–°å»ºä¸€ä¸ªviwesçš„ç›®å½•</span><br><span class="line">app.set(&apos;views&apos;, &apos;./views&apos;);</span><br><span class="line">//æ³¨å†Œæ¨¡æ¿å¼•æ“</span><br><span class="line">app.set(&apos;view engine&apos;, &apos;ejs&apos;);</span><br><span class="line">//ä½¿ç”¨res.render()æ¥æ¸²æŸ“ä¸€ä¸ªè§†å›¾å¹¶å°†å‘ˆç°çš„HTMLå­—ç¬¦ä¸²å‘é€ç»™å®¢æˆ·ç«¯ï¼›</span><br><span class="line">app.get(&apos;/&apos;, function(req, res,) &#123;</span><br><span class="line">    res.render(&apos;index&apos;, &#123; title: &apos;æµ‹è¯•&apos; &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">//ç›‘å¬8083ç«¯å£</span><br><span class="line">app.listen(8083, ()=&gt;&#123;</span><br><span class="line">    console.log(&apos;Server is running at http://localhost:8083&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>åœ¨æ–°å»ºviewsç›®å½•ä¸­æ–°å»ºindex.ejs:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt;</span><br></pre></td></tr></table></figure></p><p>ç„¶åè¿è¡Œï¼š<code>node myejs.js</code><br>æ‰“å¼€ï¼š<a href="http://localhost:8083" target="_blank" rel="noopener">http://localhost:8083</a><br>å³å¯çœ‹åˆ°ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-b333856ae590d4e1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></p><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªjsonæ–‡ä»¶æ¥æ¸²æŸ“è§†å›¾ï¼š<br>åœ¨åŒç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªdata.json:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;list&quot;: [</span><br><span class="line">    &#123; &quot;name&quot;:&quot;å°æ˜&quot; , &quot;age&quot;:&quot;6&quot;, &quot;sex&quot;: &quot;ç”·&quot;&#125;,</span><br><span class="line">    &#123; &quot;name&quot;:&quot;å°çº¢&quot; , &quot;age&quot;:&quot;4&quot; ,&quot;sex&quot;: &quot;å¥³&quot;&#125;,</span><br><span class="line">    &#123; &quot;name&quot;:&quot;å°äº®&quot; , &quot;age&quot;:&quot;5&quot; ,&quot;sex&quot;: &quot;ç”·&quot;&#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;source&quot;:&quot;ç¥å¥‡äºŒç­&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç„¶åæ›´æ”¹myejs.js:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">const express= require(&apos;express&apos;);</span><br><span class="line">const fs= require(&apos;fs&apos;);</span><br><span class="line">const app = express();</span><br><span class="line"></span><br><span class="line">//è®¾ç½®æ¨¡æ¿æ–‡ä»¶çš„ç›®å½•,å¹¶ä¸”æ–°å»ºä¸€ä¸ªviwesçš„ç›®å½•</span><br><span class="line">app.set(&apos;views&apos;, &apos;./views&apos;);</span><br><span class="line">//æ³¨å†Œæ¨¡æ¿å¼•æ“</span><br><span class="line">app.set(&apos;view engine&apos;, &apos;ejs&apos;);</span><br><span class="line">//ä½¿ç”¨res.render()æ¥æ¸²æŸ“ä¸€ä¸ªè§†å›¾å¹¶å°†å‘ˆç°çš„HTMLå­—ç¬¦ä¸²å‘é€ç»™å®¢æˆ·ç«¯ï¼›</span><br><span class="line">app.get(&apos;/&apos;, function(req, res,) &#123;</span><br><span class="line">    getDataJson((dataJson)=&gt;&#123;</span><br><span class="line">        console.log(dataJson);</span><br><span class="line">        res.render(&apos;index&apos;, dataJson);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">//è®¿é—®data.json æ‹¿åˆ°æ•°æ®è§£æå¹¶è¿”å›</span><br><span class="line">const getDataJson=(callBack)=&gt;&#123;</span><br><span class="line">    fs.readFile(&apos;./data.json&apos;, (err, data)=&gt;&#123;</span><br><span class="line">        if(!err)&#123;</span><br><span class="line">            let jsonData= JSON.parse(data);</span><br><span class="line">            callBack(jsonData);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            throw err;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">//ç›‘å¬8083ç«¯å£</span><br><span class="line">app.listen(8083, ()=&gt;&#123;</span><br><span class="line">    console.log(&apos;Server is running at http://localhost:8083&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ç„¶åæ›´æ”¹index.ejs:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;h4&gt;&lt;%=source %&gt;&lt;/h4&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;% for(var i=0; i&lt;list.length; i++)&#123; %&gt;</span><br><span class="line">        &lt;li&gt;&lt;%= list[i].name %&gt; | &lt;%= list[i].age %&gt; | &lt;%= list[i].sex %&gt;&lt;/li&gt;</span><br><span class="line">    &lt;% &#125; %&gt;    </span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure></p><p>ç„¶ååœ¨è¿è¡Œï¼š<br>ç„¶åè¿è¡Œï¼š<code>node myejs.js</code><br>æ‰“å¼€ï¼š<a href="http://localhost:8083/" target="_blank" rel="noopener">http://localhost:8083</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-62bf6f8073433d15.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>å‚è€ƒï¼š<br><a href="https://github.com/AnsonZnl/StudyNodeJS/tree/master/demo/expressDemo" target="_blank" rel="noopener">GitHubæºç </a><br><a href="http://www.expressjs.com.cn/" target="_blank" rel="noopener">Expresså®˜æ–¹æ–‡æ¡£</a><br><a href="https://ejs.bootcss.com/" target="_blank" rel="noopener">EJS æ¨¡æ¿å¼•æ“</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Expressæ¡†æ¶&quot;&gt;&lt;a href=&quot;#Expressæ¡†æ¶&quot; class=&quot;headerlink&quot; title=&quot;Expressæ¡†æ¶&quot;&gt;&lt;/a&gt;Expressæ¡†æ¶&lt;/h2&gt;&lt;h3 id=&quot;Web-åº”ç”¨ç¨‹åº&quot;&gt;&lt;a href=&quot;#Web-åº”ç”¨ç¨‹åº&quot; class=&quot;
      
    
    </summary>
    
    
      <category term="NodeJS" scheme="http://yoursite.com/tags/NodeJS/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨NodeJS æ­å»ºé™æ€æœåŠ¡å™¨</title>
    <link href="http://yoursite.com/2018/12/21/%E4%BD%BF%E7%94%A8Node.js%20%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>http://yoursite.com/2018/12/21/ä½¿ç”¨Node.js æ­å»ºé™æ€æœåŠ¡å™¨/</id>
    <published>2018-12-21T08:21:55.000Z</published>
    <updated>2018-12-21T08:22:28.256Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Nodeè®¾å®šä¸€ä¸ªç›®å½•ï¼Œç„¶åè®©Webç¨‹åºå˜æˆä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦è§£ærequest.urlä¸­çš„è·¯å¾„ï¼Œç„¶ååœ¨æœ¬åœ°æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼ŒæŠŠæ–‡ä»¶å†…å®¹å‘é€å‡ºå»å°±å¯ä»¥äº†ã€‚</p></blockquote><p>è§£æURLéœ€è¦ç”¨åˆ°Node.jsæä¾›çš„urlæ¨¡å—ï¼Œå®ƒä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œé€šè¿‡parse()å°†ä¸€ä¸ªå­—ç¬¦ä¸²è§£æä¸ºä¸€ä¸ªUrlå¯¹è±¡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var url= require(&apos;url&apos;);</span><br><span class="line">console.log(url.parse(&apos;http://user:pass@host.com:8080/path/to/file?query=string#hash&apos;));</span><br></pre></td></tr></table></figure></p><p>è§£æä¹‹åæ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Url &#123;</span><br><span class="line">    protocol: &apos;http:&apos;,</span><br><span class="line">    slashes: true,</span><br><span class="line">    auth: &apos;user:pass&apos;,</span><br><span class="line">    host: &apos;host.com:8080&apos;,</span><br><span class="line">    port: &apos;8080&apos;,</span><br><span class="line">    hostname: &apos;host.com&apos;,</span><br><span class="line">    hash: &apos;#hash&apos;,</span><br><span class="line">    search: &apos;?query=string&apos;,</span><br><span class="line">    query: &apos;query=string&apos;,</span><br><span class="line">    pathname: &apos;/path/to/file&apos;,</span><br><span class="line">    path: &apos;/path/to/file?query=string&apos;,</span><br><span class="line">    href:</span><br><span class="line">     &apos;http://user:pass@host.com:8080/path/to/file?query=string#hash&apos; </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>å¤„ç†æœ¬åœ°æ–‡ä»¶ç›®å½•éœ€è¦ä½¿ç”¨Node.jsæä¾›çš„pathæ¨¡å—ï¼Œå®ƒå¯ä»¥æ–¹ä¾¿åœ°æ„é€ ç›®å½•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var path = require(&apos;path&apos;);</span><br><span class="line"></span><br><span class="line">// è§£æå½“å‰ç›®å½•:</span><br><span class="line">console.log(path(__dirname));</span><br><span class="line">//__dirname è¡¨ç¤ºå½“å‰æ‰€åœ¨ç›®å½•  &apos;/Users&apos;</span><br><span class="line"></span><br><span class="line">// ç»„åˆå®Œæ•´çš„æ–‡ä»¶è·¯å¾„:å½“å‰ç›®å½•+&apos;pub&apos;+&apos;index.html&apos;:</span><br><span class="line">var filePath = path.join(__dirname, &apos;fileServer&apos;, &apos;index.html&apos;);</span><br><span class="line">// &apos;/Users/fileServer/index.html&apos;</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨pathæ¨¡å—å¯ä»¥æ­£ç¡®å¤„ç†æ“ä½œç³»ç»Ÿç›¸å…³çš„æ–‡ä»¶è·¯å¾„ã€‚åœ¨Windowsç³»ç»Ÿä¸‹ï¼Œè¿”å›çš„è·¯å¾„ç±»ä¼¼äº<code>C:\Users\fileServer\index.html</code>ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸å…³å¿ƒæ€ä¹ˆæ‹¼æ¥è·¯å¾„äº†ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨file_server.jsï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">var </span><br><span class="line">    http= require(&apos;http&apos;),</span><br><span class="line">    fs= require(&apos;fs&apos;),</span><br><span class="line">    url= require(&apos;url&apos;),</span><br><span class="line">    path= require(&apos;path&apos;);</span><br><span class="line">    </span><br><span class="line">// ä»å‘½ä»¤è¡Œå‚æ•°è·å–rootç›®å½•ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½•:</span><br><span class="line">var root= path.join(__dirname, &apos;static&apos;, &apos;index.html&apos;);</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºæœåŠ¡å™¨</span><br><span class="line">var server= http.createServer(function(request, response)&#123;</span><br><span class="line">    //è·å¾—urçš„path ç±»ä¼¼&apos;/css/index.css&apos;</span><br><span class="line">    var pathName= url.parse(request.url).pathname;</span><br><span class="line">    //è·å¾—å¯¹åº”çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„ ç±»ä¼¼â€™static/css/index.cssâ€˜</span><br><span class="line">    var filePath= path.join(root);</span><br><span class="line">    //è·å–æ–‡ä»¶çŠ¶æ€</span><br><span class="line">    console.log(filePath);</span><br><span class="line">    fs.stat(filePath, function (err, stats) &#123;</span><br><span class="line">        if (!err &amp;&amp; stats.isFile()) &#123;</span><br><span class="line">            // æ²¡æœ‰å‡ºé”™å¹¶ä¸”æ–‡ä»¶å­˜åœ¨:</span><br><span class="line">            console.log(&apos;200 &apos; + request.url);</span><br><span class="line">            // å‘é€200å“åº”:</span><br><span class="line">            response.writeHead(200);</span><br><span class="line">            // å°†æ–‡ä»¶æµå¯¼å‘response:</span><br><span class="line">            fs.createReadStream(filePath).pipe(response);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // å‡ºé”™äº†æˆ–è€…æ–‡ä»¶ä¸å­˜åœ¨:</span><br><span class="line">            console.log(&apos;404 &apos; + request.url);</span><br><span class="line">            // å‘é€404å“åº”:</span><br><span class="line">            response.writeHead(404);</span><br><span class="line">            response.end(&apos;404 Not Found&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(8080);</span><br><span class="line">console.log(&apos;Server is running at http://127.0.0.1:8080/&apos;);</span><br></pre></td></tr></table></figure></p><p>å½“ä½ çš„htmlæ–‡ä»¶æ˜¯è¿™æ ·çš„æ—¶å€™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Road&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;css/index.css&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;img src=&quot;/images/bg.jpeg&quot; alt=&quot;11&quot;&gt;</span><br><span class="line">    &lt;h1&gt;ä¹¦å±±æœ‰è·¯å‹¤ä¸ºå¾„,å­¦æµ·æ— æ¶¯è‹¦åšèˆŸã€‚&lt;/h1&gt;</span><br><span class="line">    &lt;script src=&quot;js/index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></p><p>ç„¶åè¯·æ±‚<code>http://127.0.0.1:8080/index.html</code>å°±ä¼šæ‰“å°å‡ºï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-5c918eec1e59e4ad.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="101544689152_.pic.jpg" title="">                </div>                <div class="image-caption">101544689152_.pic.jpg</div>            </figure></p><p>å½“ç„¶ä»–åªèƒ½å‘èµ·è¯·æ±‚ï¼Œæƒ³è¦è¯·æ±‚åˆ°å¹¶ä¸”æ­£ç¡®è¿”å›è¿˜éœ€è¦è®¾ç½®æ–‡ä»¶çš„ContentTypeå±æ€§ã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>path.extname</code>è·å–è¯·æ±‚æ–‡ä»¶çš„åç¼€ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let extname = path.extname(&apos;css/index.css&apos;);</span><br><span class="line">// .css</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬è·å–åˆ°åç¼€ä¹‹åå°±å¯ä»¥æ ¹æ®åç¼€æ¥è®¾ç½®å®ƒçš„ContentTypeï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°ä¸€ä¸ªmime.jsonæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªå‡½æ•°å»åŒ¹é…:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//mime è¯»å–mime.json é‡Œé¢å­˜å‚¨äº†å¸¸è§çš„æ–‡ä»¶çš„ContentType ä¸ºè¯·æ±‚çš„å¯¹åº”çš„æ–‡ä»¶è®¾ç½®å¯¹åº”çš„ ContentType å±æ€§</span><br><span class="line">function getContentType(extName, callBack)&#123;</span><br><span class="line">                //      æ–‡ä»¶åç¼€   å›è°ƒå‡½æ•°</span><br><span class="line">    //è¯»å–mime.json</span><br><span class="line">    fs.readFile(&apos;./mime.json&apos;, (err, data)=&gt;&#123;</span><br><span class="line">        if(err)&#123;</span><br><span class="line">        //è¯»å–å¤±è´¥ æŠ›å‡ºé”™è¯¯</span><br><span class="line">            throw err;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        // è¯»å–æˆåŠŸ</span><br><span class="line">        let mimeJson = JSON.parse(data);</span><br><span class="line">        //è½¬ç  å°†jsonå­—ç¬¦ä¸²è½¬åŒ–æˆå¯¹è±¡</span><br><span class="line">        let contentType = mimeJson[extName] || &apos;text/plain&apos;;</span><br><span class="line">        //å–å‡ºå¯¹åº”jsonä¸­ å¯¹åº”çš„ è¯·æ±‚çš„åç¼€çš„ç›¸åŒ¹é…çš„ ContentType å±æ€§</span><br><span class="line">        callBack(contentType);</span><br><span class="line">        //æ‰§è¡Œè¿™ä¸ªå›è°ƒå‡½æ•° å¹¶ä¼ å‚contentType</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ­å»ºé™æ€æœåŠ¡å™¨çš„æ­¥éª¤åº”è¯¥æ˜¯ï¼š</p><ol><li>å…ˆæ‹¿åˆ°è¯·æ±‚æ–‡ä»¶çš„åç¼€å(extname)</li><li>å¼•å…¥mime.json æ–‡ä»¶å¹¶è¯»å–-&gt;è½¬ç </li><li>åŒ¹é…å’Œåç¼€å¯¹åº”çš„ContentType</li><li>ä½¿ç”¨å›è°ƒå‡½æ•° æ‰€æœ‰è¯·æ±‚çš„æ–‡ä»¶ éƒ½ä¼šæ‹¿åˆ°åç¼€ ç„¶åè‡ªåŠ¨åŒ¹é…ç›¸åº”çš„ContentType</li><li>æ‰§è¡ŒgetContentTypeå‡½æ•°</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">getContentType(extname, (contentType)=&gt;&#123;</span><br><span class="line">    res.writeHead(200, &#123;&quot;Content-Type&quot;: contentType + &apos;;charset=UTF-8&apos;&#125;)</span><br><span class="line">    res.end(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/kuangshp128/article/details/75207984" target="_blank" rel="noopener">å¸¸è§æ–‡ä»¶çš„mimeç±»å‹</a><br><a href="https://github.com/AnsonZnl/StudyNodeJS/blob/master/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/%E8%AF%BE%E6%97%B666-%E8%AF%BE%E6%97%B671%E7%AC%94%E8%AE%B0.md" target="_blank" rel="noopener">GitHub-Node å­¦ä¹ ç¬”è®°</a><br><a href="https://www.cnblogs.com/xxchi/p/6382892.html" target="_blank" rel="noopener">å‚è€ƒ-Node pathæ¨¡å—ç›¸å…³æ–¹æ³•</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Nodeè®¾å®šä¸€ä¸ªç›®å½•ï¼Œç„¶åè®©Webç¨‹åºå˜æˆä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦è§£ærequest.urlä¸­çš„è·¯å¾„ï¼Œç„¶ååœ¨æœ¬åœ°æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼ŒæŠŠæ–‡ä»¶å†…å®¹å‘é€å‡ºå»å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è§£æURLéœ€è¦ç”¨åˆ°N
      
    
    </summary>
    
    
      <category term="NodeJS" scheme="http://yoursite.com/tags/NodeJS/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨NodeJSå†™ä¸€ä¸ªç®€å•çš„apiæ¥å£</title>
    <link href="http://yoursite.com/2018/12/15/%E4%BD%BF%E7%94%A8Node.js%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84api%E6%8E%A5%E5%8F%A3/"/>
    <id>http://yoursite.com/2018/12/15/ä½¿ç”¨Node.jså†™ä¸€ä¸ªç®€å•çš„apiæ¥å£/</id>
    <published>2018-12-15T03:55:55.000Z</published>
    <updated>2018-12-21T08:22:22.459Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¼•å…¥Httpæ¨¡å—"><a href="#å¼•å…¥Httpæ¨¡å—" class="headerlink" title="å¼•å…¥Httpæ¨¡å—"></a>å¼•å…¥Httpæ¨¡å—</h2><p>é»˜è®¤ä½ å·²ç»å®‰è£…äº†<a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js</a><br>Nodeå½“ä¸­å†…ç½®äº†Httpæ¨¡å—ï¼›<br>å¯ä»¥ä½¿ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var http= require(&quot;http&quot;);</span><br></pre></td></tr></table></figure></p><p>å¼•å…¥httpæ¨¡å—ï¼›</p><h2 id="Hello-world"><a href="#Hello-world" class="headerlink" title="Hello world"></a>Hello world</h2><p>ç”¨Node.jså®ç°ä¸€ä¸ªHTTPæœåŠ¡å™¨ç¨‹åºéå¸¸ç®€å•ã€‚æˆ‘ä»¬å®ç°ä¸€ä¸ªæœ€ç®€å•çš„Webç¨‹åºï¼Œ<br>å®ƒå¯¹äºæ‰€æœ‰è¯·æ±‚ï¼Œéƒ½è¿”å›Hello world!ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹<code>apiDemo</code> åœ¨é‡Œé¢æ–°å»ºä¸€ä¸ª<code>server.js</code>å†™å…¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// å¯¼å…¥httpæ¨¡å—:</span><br><span class="line">var http = require(&apos;http&apos;);</span><br><span class="line">// åˆ›å»ºhttp serverï¼Œå¹¶ä¼ å…¥å›è°ƒå‡½æ•°:</span><br><span class="line">var server = http.createServer(function (request, response) &#123;</span><br><span class="line">    // å›è°ƒå‡½æ•°æ¥æ”¶requestå’Œresponseå¯¹è±¡,</span><br><span class="line">    // è·å¾—HTTPè¯·æ±‚çš„methodå’Œurl:</span><br><span class="line">    console.log(request.method + &apos;: &apos; + request.url);</span><br><span class="line">    // å°†HTTPå“åº”200å†™å…¥response, åŒæ—¶è®¾ç½®Content-Type: text/html:</span><br><span class="line">    response.writeHead(200, &#123;&apos;Content-Type&apos;: &apos;text/html&apos;&#125;);</span><br><span class="line">    // å°†HTTPå“åº”çš„HTMLå†…å®¹å†™å…¥response:</span><br><span class="line">    response.end(&apos;Hello world!&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// è®©æœåŠ¡å™¨ç›‘å¬8080ç«¯å£:</span><br><span class="line">server.listen(8080);</span><br><span class="line"></span><br><span class="line">console.log(&apos;Server is running at http://127.0.0.1:8080/&apos;);</span><br></pre></td></tr></table></figure></p><p>ç„¶ååœ¨å½“å‰ç›®å½•å‘½ä»¤æç¤ºç¬¦ä¸‹(cmdç­‰)è¿è¡Œï¼Œ è¾“å…¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node server.js</span><br></pre></td></tr></table></figure></p><p>ç„¶åæ‰“å¼€æµè§ˆå™¨è¾“å…¥ï¼š<code>http://127.0.0.1:8080/</code> å°±å¯ä»¥çœ‹åˆ°ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://user-gold-cdn.xitu.io/2018/12/14/167abd49988fb8f2?w=310&h=193&f=jpeg&s=7500" alt="91544605447_.pic.jpg" title="">                </div>                <div class="image-caption">91544605447_.pic.jpg</div>            </figure></p><p>åŒæ—¶å¯ä»¥çœ‹åˆ°å‘½ä»¤è¡Œä¸­æœ‰æ‰“å°çš„ä¿¡æ¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET: /</span><br><span class="line">GET: /favicon.ico</span><br></pre></td></tr></table></figure></p><p>ä¸»è¦éœ€è¦äº†è§£çš„æ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.createServer(function(request, response)&#123;&#125;)</span><br></pre></td></tr></table></figure></p><p>å®ƒçš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªhttpæœåŠ¡ï¼Œé‡Œé¢ä¼ ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå‡½æ•°ä¸­åŒ…å«ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼ˆrequestï¼Œresponseï¼‰ã€‚<br>å…¶ä¸­requestæ˜¯è¯·æ±‚å¯¹è±¡ï¼Œresponseæ˜¯å“åº”å¯¹è±¡ã€‚<br>å¯ä»¥æ ¹æ®<code>request</code>å¯¹è±¡æ‹¿åˆ°è¯·æ±‚å¤´çš„ä¸€äº›ä¿¡æ¯ï¼Œå¦‚: <code>request.url</code>â€“è¿”å›è¯·æ±‚è·¯å¾„<br>å“åº”æˆåŠŸåï¼š<br><code>response.writeHead()</code>â€”â€”â€”â€”å‘é€ä¸€ä¸ªå“åº”å¤´ç»™è¯·æ±‚<br><code>response.end(&#39;xxx&#39;)</code>â€”â€”â€”â€”å“åº”æˆåŠŸ è¿”å›xxx<br><a href="http://nodejs.cn/api/http.html" target="_blank" rel="noopener">å‚è€ƒ Nodezä¸­æ–‡ç½‘-HTTP</a></p><h2 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h2><p>æˆ‘ä»¬æ˜¯æƒ³å½“è®¿é—®<code>http://127.0.0.1:8080/</code>çš„æ—¶å€™è¿”å›å½“å‰ç›®å½•çš„index.htmlã€‚<br>ä¹Ÿå°±æ˜¯è¯´å½“<code>request.url === &#39;/&#39;</code>æ˜¯<code>true</code>æ—¶å°±å¯ä»¥ç¡®å®šå½“å‰è¯·æ±‚çš„æ˜¯æ ¹ç›®å½•äº†ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var url = request.url;</span><br><span class="line">console.log(url);</span><br><span class="line">// &apos;/&apos;</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬èƒ½åˆ›å»ºä¸€ä¸ªæœåŠ¡ï¼Œå¹¶ä¸”èƒ½ä½¿ç”¨<code>response.end(&#39;Hello world!&#39;);</code>è¿”å›â€œHello world!â€ã€‚å¦‚æœæƒ³è¿”å›ä¸€ä¸ªæ–‡ä»¶åˆ™éœ€è¦ç”¨åˆ°Node.jsçš„ä¸€ä¸ªæ¨¡å—äº†â€”â€”<strong>fs æ–‡ä»¶ç³»ç»Ÿ</strong>ã€‚<br>å®ƒæ˜¯Nodeå½“ä¸­å¤„ç†æ–‡ä»¶çš„æ¨¡å—ï¼Œé¦–å…ˆå¼•å…¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var fs= require(&apos;fs&apos;);</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥ä½¿ç”¨<code>fs.readFile()</code>æ¥è¯»å–æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(&apos;./index.html&apos;, function(err, data)  &#123;</span><br><span class="line">  if (err) throw err;</span><br><span class="line">  console.log(data);</span><br><span class="line">// &lt;Buffer 3c 21 44 4f 4...&gt;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>å›è°ƒå‡½æ•° æœ‰ä¸¤ä¸ªå‚æ•° (err, data)ï¼Œå…¶ä¸­ data æ˜¯æ–‡ä»¶çš„å†…å®¹ï¼Œä»¥äºŒè¿›åˆ¶å½¢å¼è¿”å›ã€‚</p><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™ä»£ç äº†ï¼Œå½“è®¿é—®æ ¹ç›®å½•æ—¶ï¼Œè¿”å›index.htmlæ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var http= require(&apos;http&apos;);</span><br><span class="line">var fs= require(&apos;fs&apos;);</span><br><span class="line">var server= http.createServer(function(request, response)&#123;</span><br><span class="line">    var url = request.url;</span><br><span class="line">    if(url === &apos;/&apos;)&#123;</span><br><span class="line">        fs.readFile(&apos;./index.html&apos;, function(err, data)&#123;</span><br><span class="line">          if(!err)&#123;</span><br><span class="line">            response.writeHead(200, &#123;&quot;Content-Type&quot;: &quot;text/html;charset=UTF-8&quot;&#125;);</span><br><span class="line">            response.end(data)</span><br><span class="line">          &#125;else&#123;</span><br><span class="line">              throw err;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        console.log(&quot;é”™è¯¯&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(8080, &apos;127.0.0.1&apos;);</span><br></pre></td></tr></table></figure></p><p>ç„¶ååœ¨å½“å‰ç›®å½•ä¸‹æ–°å»º<code>index.html</code>ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªajaxè¯·æ±‚ï¼Œä¸€ä¼šæˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ¥å®ç°ajaxè¯·æ±‚ä¸€ç»„æ•°æ®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;box&quot;&gt;çœ‹ä¸åˆ°çœ‹ä¸åˆ°&lt;/div&gt;</span><br><span class="line">   &lt;button onclick=&quot;success()&quot;&gt;æˆ‘æ˜¯æŒ‰é’®&lt;/button&gt;</span><br><span class="line">   &lt;script&gt;</span><br><span class="line">   function success()&#123;</span><br><span class="line">       var http= new XMLHttpRequest();</span><br><span class="line">       http.onreadystatechange= function()&#123;</span><br><span class="line">           if(http.status == 200 &amp;&amp; http.readyState == 4)&#123;</span><br><span class="line">               var msg= http.responseText;</span><br><span class="line">               var box= document.getElementById(&apos;box&apos;);</span><br><span class="line">               box.innerHTML= JSON.parse(msg).name;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       //å‘é€è¯·æ±‚</span><br><span class="line">       http.open(&apos;GET&apos;, &apos;/data&apos;);</span><br><span class="line">       http.send();</span><br><span class="line">   &#125;</span><br><span class="line">   &lt;/script&gt;</span><br></pre></td></tr></table></figure></p><p>è¿™æ®µä»£ç æ˜¯ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ ä¼šå‘<code>/data</code>å‘èµ·ä¸€ä¸ªajsxè¯·æ±‚,</p><h2 id="å®ç°ç®€å•çš„APIæ¥å£"><a href="#å®ç°ç®€å•çš„APIæ¥å£" class="headerlink" title="å®ç°ç®€å•çš„APIæ¥å£"></a>å®ç°ç®€å•çš„APIæ¥å£</h2><p>æ—¢ç„¶èƒ½è®¿é—®æ ¹ç›®å½•æ—¶å¯ä»¥è¿”å›htmlæ–‡ä»¶ï¼Œé‚£æˆ‘ä»¬å¯ä»¥è‡ªå·±è®¾å®šä¸€ä¸ªurlï¼Œå½“è¯·æ±‚è¿™ä¸ªurlæ˜¯æˆ‘ä»¬å°±ç»™å®ƒè¿”å›ä¸€ç»„jsonæ•°æ®ã€‚æ­£å¸¸æ¥è®²è¿™äº›æ•°æ®åº”è¯¥æ˜¯ä»æ•°æ®åº“è¯»å–çš„ï¼Œåœ¨è¿™é‡Œåªæ¨¡æ‹Ÿä¸€ç»„jsonæ•°æ®ï¼Œåœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ª<code>data.json</code>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;name&quot;: &quot;å°¼å¤æ‹‰ä¸ * èµµå››&quot;&#125;</span><br></pre></td></tr></table></figure></p><p>æ‰€ä»¥å½“å‰çš„ç›®å½•ç»“æ„æ˜¯ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://user-gold-cdn.xitu.io/2018/12/14/167abd4998736425?w=402&h=170&f=jpeg&s=4634" alt="41544775041_.pic.jpg" title="">                </div>                <div class="image-caption">41544775041_.pic.jpg</div>            </figure></p><p>ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨server.jsä¸­åˆ¤æ–­ä¸€ä¸‹ï¼Œå½“è¯·æ±‚çš„urlæ˜¯<code>/data</code>æ—¶ï¼Œåˆ™è¿”å›data.jsonï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if(url === &apos;/data&apos;)&#123;</span><br><span class="line">        fs.readFile(&apos;./data.json&apos;, function(err, data)&#123;</span><br><span class="line">            if(!err)&#123;</span><br><span class="line">                response.writeHead(200, &#123;&quot;Content-Type&quot;: &quot;application/json&quot;&#125;);</span><br><span class="line">                response.end(data);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                throw err;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>ç„¶åæ‰“å¼€æµè§ˆå™¨ <code>http://127.0.0.1:8080</code> åï¼Œå°±ä¼šå‡ºç°index.htmlé¡µé¢ï¼Œç‚¹å‡»å‡ºç°çš„æŒ‰é’®å°±ä¼šè§¦å‘ä¸€ä¸ªå¯¹ <code>/data</code>çš„ajaxè¯·æ±‚ï¼Œå½“server.jsæ¥å—åˆ°è¯·æ±‚åï¼Œå°±ä¼šåˆ¤æ–­<code>url === &#39;/data&#39;</code>ï¼Œç„¶åå®ƒå°±ä¼šå§  <code>data.json</code>è¿”å›ç»™æˆ‘ä»¬ã€‚</p><p>æœ€åçš„å®ç°æ˜¯ç‚¹å‡»æŒ‰é’®å‡ºç°<strong>å°¼å¤æ‹‰ä¸ * èµµå››</strong>ï¼Œ<br>GItHubæºç ï¼š<a href="https://github.com/AnsonZnl/StudyNodeJS/tree/master/%E8%AF%BE%E7%A8%8B%E8%AF%BE%E4%BB%B6%E5%8F%8A%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81/apiDemo" target="_blank" rel="noopener">node-apiDemo</a><br>å‚è€ƒï¼š<br><a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/0014345015296018cac40c198b543fead5c549865b9bd4a000" target="_blank" rel="noopener">å»–é›ªå³°-httpè¯¦è§£</a><br><a href="http://nodejs.cn/api/fs.html" target="_blank" rel="noopener">Node-fs</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å¼•å…¥Httpæ¨¡å—&quot;&gt;&lt;a href=&quot;#å¼•å…¥Httpæ¨¡å—&quot; class=&quot;headerlink&quot; title=&quot;å¼•å…¥Httpæ¨¡å—&quot;&gt;&lt;/a&gt;å¼•å…¥Httpæ¨¡å—&lt;/h2&gt;&lt;p&gt;é»˜è®¤ä½ å·²ç»å®‰è£…äº†&lt;a href=&quot;https://nodejs.org/en/&quot; targe
      
    
    </summary>
    
    
      <category term="NodeJS" scheme="http://yoursite.com/tags/NodeJS/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptçš„é¢„ç¼–è¯‘è¿‡ç¨‹åˆ†æ</title>
    <link href="http://yoursite.com/2018/12/11/JavaScript%E7%9A%84%E9%A2%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90/"/>
    <id>http://yoursite.com/2018/12/11/JavaScriptçš„é¢„ç¼–è¯‘è¿‡ç¨‹åˆ†æ/</id>
    <published>2018-12-11T08:05:55.000Z</published>
    <updated>2018-12-11T08:43:37.929Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€JavaScriptæ¦‚å¿µ"><a href="#ä¸€ã€JavaScriptæ¦‚å¿µ" class="headerlink" title="ä¸€ã€JavaScriptæ¦‚å¿µ"></a>ä¸€ã€JavaScriptæ¦‚å¿µ</h2><p>JavaScript ( JS ) æ˜¯ä¸€ä¸ªå•çº¿ç¨‹ã€è§£é‡Šå‹çš„ç¼–ç¨‹è¯­è¨€ã€‚</p><h2 id="äºŒã€JavaScriptè¯­è¨€ç‰¹ç‚¹"><a href="#äºŒã€JavaScriptè¯­è¨€ç‰¹ç‚¹" class="headerlink" title="äºŒã€JavaScriptè¯­è¨€ç‰¹ç‚¹"></a>äºŒã€JavaScriptè¯­è¨€ç‰¹ç‚¹</h2><h3 id="2-1-å•çº¿ç¨‹"><a href="#2-1-å•çº¿ç¨‹" class="headerlink" title="2.1 å•çº¿ç¨‹"></a>2.1 å•çº¿ç¨‹</h3><p>JavaScriptè¯­è¨€çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯å•çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€ä¸ªæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ã€‚</p><h3 id="2-2-è§£é‡Šå‹è¯­è¨€"><a href="#2-2-è§£é‡Šå‹è¯­è¨€" class="headerlink" title="2.2 è§£é‡Šå‹è¯­è¨€"></a>2.2 è§£é‡Šå‹è¯­è¨€</h3><p>è‡ªä¸Šè€Œä¸‹ï¼Œè§£é‡Šä¸€è¡Œï¼Œæ‰§è¡Œä¸€è¡Œï¼›ä¸ä¼šé€šç¯‡ç¼–è¯‘ä¸ºä¸€ä¸ªæ–‡ä»¶å†æ‰§è¡Œã€‚</p><h2 id="ä¸‰ã€-JavaScriptæ‰§è¡Œè¿‡ç¨‹"><a href="#ä¸‰ã€-JavaScriptæ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="ä¸‰ã€ JavaScriptæ‰§è¡Œè¿‡ç¨‹"></a>ä¸‰ã€ JavaScriptæ‰§è¡Œè¿‡ç¨‹</h2><h3 id="3-1-è¯­æ³•åˆ†æ"><a href="#3-1-è¯­æ³•åˆ†æ" class="headerlink" title="3.1 è¯­æ³•åˆ†æ"></a>3.1 è¯­æ³•åˆ†æ</h3><p>  é¡¾åæ€ä¹‰ å°±æ˜¯æ£€æŸ¥ä¸€éjsä»£ç å†…æœ‰æ²¡æœ‰å‡ºç°è¯­æ³•é”™è¯¯ï¼ˆæ¯”å¦‚å°‘äº›ä¸ªåˆ†å·ï¼Œå¤šå†™ä¸ªæ‹¬å·ç­‰ï¼‰ï¼›è¯­æ³•åˆ†ææœŸé—´ä¸ä¼šæ‰§è¡Œä»£ç </p><h3 id="3-2-é¢„ç¼–è¯‘"><a href="#3-2-é¢„ç¼–è¯‘" class="headerlink" title="3.2 é¢„ç¼–è¯‘"></a>3.2 é¢„ç¼–è¯‘</h3><p><strong>é¢„ç¼–è¯‘å‘ç”Ÿåœ¨å‡½æ•°æ‰§è¡Œçš„å‰ä¸€åˆ»</strong><br><strong>å…¨å±€ä¸‹ï¼š</strong><br>å…¨å±€çš„å˜é‡å£°æ˜å’Œå‡½æ•°å£°æ˜åˆ™ä¼šå­˜æ”¾åœ¨å…¨å±€å¯¹è±¡å†…ï¼ˆGlobal Object ç®€ç§°GOï¼Œå®ƒæ˜¯windowçš„ä¸€éƒ¨åˆ†ï¼Œä½ å¯ä»¥ç›´æ¥æŠŠä»–ç†è§£æˆwindowå¯¹è±¡ï¼‰ä¸­<br><strong>å‡½æ•°ä½“å†…ï¼š</strong><br>é¢„ç¼–è¯‘ä¼šæå‰æŠŠå‡½æ•°é‡Œçš„å˜é‡å£°æ˜å’Œå‡½æ•°å£°æ˜ä¾æ®è§„åˆ™å­˜æ”¾åœ¨è¯¥æ´»åŠ¨å¯¹è±¡å†…ï¼ˆActivation Objectï¼Œç®€ç§°AOï¼‰ï¼Œ</p><p>é¢„ç¼–è¯‘ç®€å•ç†è§£å°±æ˜¯åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€äº›ç©ºé—´ï¼Œå­˜æ”¾ä¸€äº›å˜é‡ä¸å‡½æ•° ã€‚</p><p>é¢„ç¼–è¯‘å¤§è‡´å¯åˆ†ä¸º4æ­¥ï¼š</p><ol><li>åˆ›å»ºAO(GO)å¯¹è±¡</li><li>æ‰¾å½¢å‚å’Œå˜é‡å£°æ˜ï¼Œå°†å½¢å‚å’Œå˜é‡åä½œä¸ºAO(GO)å±æ€§åï¼Œå€¼ä¸ºundefined</li><li>å°†å®å‚å€¼å’Œå½¢å‚ç»Ÿä¸€</li><li>åœ¨å‡½æ•°ä½“é‡Œé¢æ‰¾å‡½æ•°å£°æ˜ï¼Œå€¼èµ‹äºˆå‡½æ•°ä½“ã€‚</li></ol><p>æ‰€ä»¥å¦‚æœé‡åˆ°ä¸‹é¢è¿™ç§æƒ…å†µï¼Œå½“å‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜åç§°ç›¸åŒæ—¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(a); </span><br><span class="line">var a= 1;</span><br><span class="line">function a()&#123;&#125;;</span><br></pre></td></tr></table></figure></p><p>ç¼–è¯‘åçš„ä»£ç å…¶å®æ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a;</span><br><span class="line">function a()&#123;&#125;;</span><br><span class="line">console.log(a);</span><br><span class="line">a= 1;</span><br></pre></td></tr></table></figure></p><p>æ‰€ä»¥æœ€åè¾“å‡ºçš„æ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function a() &#123;&#125;</span><br></pre></td></tr></table></figure></p><h4 id="é¢„ç¼–è¯‘å°èŠ‚"><a href="#é¢„ç¼–è¯‘å°èŠ‚" class="headerlink" title="é¢„ç¼–è¯‘å°èŠ‚"></a>é¢„ç¼–è¯‘å°èŠ‚</h4><p><strong>é¢„ç¼–è¯‘ä¸¤ä¸ªå°è§„åˆ™</strong></p><ol><li>å‡½æ•°å£°æ˜æ•´ä½“æå‡â€”(å…·ä½“ç‚¹è¯´ï¼Œæ— è®ºå‡½æ•°è°ƒç”¨å’Œå£°æ˜çš„ä½ç½®æ˜¯å‰æ˜¯åï¼Œç³»ç»Ÿæ€»ä¼šæŠŠå‡½æ•°å£°æ˜ç§»åˆ°è°ƒç”¨å‰é¢ï¼‰ </li><li>å˜é‡ å£°æ˜æå‡â€”(å…·ä½“ç‚¹è¯´ï¼Œæ— è®ºå˜é‡è°ƒç”¨å’Œå£°æ˜çš„ä½ç½®æ˜¯å‰æ˜¯åï¼Œç³»ç»Ÿæ€»ä¼šæŠŠå£°æ˜ç§»åˆ°è°ƒç”¨å‰ï¼Œæ³¨æ„ä»…ä»…åªæ˜¯å£°æ˜ï¼Œæ‰€ä»¥å€¼æ˜¯undefinedï¼‰ï¼Œåªæœ‰åœ¨è§£é‡Šæ‰§è¡Œé˜¶æ®µæ‰ä¼šè¿›è¡Œå˜é‡åˆå§‹åŒ–ï¼ŒåŒ¿åå‡½æ•°ä¸å‚ä¸é¢„ç¼–è¯‘ã€‚</li></ol><p><strong>é¢„ç¼–è¯‘å‰å¥</strong></p><ol><li>imply global å³ä»»ä½•å˜é‡ï¼Œå¦‚æœæœªç»å£°æ˜å°±èµ‹å€¼ï¼Œåˆ™æ­¤å˜é‡å°±ä½å…¨å±€å˜é‡æ‰€æœ‰(å…¨å±€åŸŸå°±æ˜¯window) ã€‚</li><li>ä¸€åˆ‡å£°æ˜çš„å…¨å±€å˜é‡ï¼Œå…¨æ˜¯windowçš„å±æ€§ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  var a=2; </span><br><span class="line">  console.log(window.a);//2</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="3-3-è§£é‡Šæ‰§è¡Œ"><a href="#3-3-è§£é‡Šæ‰§è¡Œ" class="headerlink" title="3.3 è§£é‡Šæ‰§è¡Œ"></a>3.3 è§£é‡Šæ‰§è¡Œ</h3><p>é¢„ç¼–è¯‘å®Œæ¯•ä¹‹åï¼ŒJavaScript è„šæœ¬å¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œé¡ºåºæŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ‰§è¡Œã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><strong>JavaScriptæ‰§è¡Œé¡ºåº</strong></p><ol><li>è¯­æ³•åˆ†æ</li><li>é¢„ç¼–è¯‘<br>2.1. åˆ›å»ºAO(GO)å¯¹è±¡<br>2.2. æ‰¾å½¢å‚å’Œå˜é‡å£°æ˜ï¼Œå°†å½¢å‚å’Œå˜é‡åä½œä¸ºAO(GO)å±æ€§åï¼Œå€¼ä¸ºundefined<br>2.3. å°†å®å‚å€¼å’Œå½¢å‚ç»Ÿä¸€<br>2.4. åœ¨å‡½æ•°ä½“é‡Œé¢æ‰¾å‡½æ•°å£°æ˜ï¼Œå€¼èµ‹äºˆå‡½æ•°ä½“ã€‚  </li><li>è§£é‡Šæ‰§è¡Œ</li></ol><p>ç»ƒä¹ ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function a(a)&#123;</span><br><span class="line">    console.log(a);</span><br><span class="line">    a= 2;</span><br><span class="line">    console.log(b);</span><br><span class="line">    var b= 3;</span><br><span class="line">    console.log(a);</span><br><span class="line">&#125;</span><br><span class="line">a(1);</span><br><span class="line">console.log(a);</span><br></pre></td></tr></table></figure></p><p>ä½ å¯ä»¥å…ˆè¯•æƒ³ä¸€ä¸‹ç»“æœï¼Œç„¶åå¤åˆ¶ä»£ç åˆ°æ§åˆ¶å°å»éªŒè¯ä½ çš„ç­”æ¡ˆæ˜¯å¦æ­£ç¡®ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä¸€ã€JavaScriptæ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#ä¸€ã€JavaScriptæ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€JavaScriptæ¦‚å¿µ&quot;&gt;&lt;/a&gt;ä¸€ã€JavaScriptæ¦‚å¿µ&lt;/h2&gt;&lt;p&gt;JavaScript ( JS ) æ˜¯ä¸€ä¸ªå•
      
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>åˆè¯•MongoDBå­¦ä¹ ä¹‹Mongooseçš„ä½¿ç”¨</title>
    <link href="http://yoursite.com/2018/11/23/MongoDB%E5%AD%A6%E4%B9%A0%E4%B9%8BMongoose%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>http://yoursite.com/2018/11/23/MongoDBå­¦ä¹ ä¹‹Mongooseçš„ä½¿ç”¨/</id>
    <published>2018-11-23T09:28:55.000Z</published>
    <updated>2018-12-21T08:20:27.716Z</updated>
    
    <content type="html"><![CDATA[<h3 id="mongooseç®€ä»‹"><a href="#mongooseç®€ä»‹" class="headerlink" title="mongooseç®€ä»‹"></a>mongooseç®€ä»‹</h3><p>mongooseå®˜ç½‘ï¼š<a href="https://mongoosejs.com/" target="_blank" rel="noopener">https://mongoosejs.com/</a></p><h4 id="ä¸ºä»€ä¹ˆè¦ç”¨Mongoose"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨Mongoose" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨Mongoose"></a>ä¸ºä»€ä¹ˆè¦ç”¨Mongoose</h4><blockquote><p>Mongooseå°±æ˜¯ä¸€ä¸ªè®©æˆ‘ä»¬å¯ä»¥é€šè¿‡Nodeæ¥æ“ä½œMongoDBçš„ä¸€ä¸ªæ¨¡å—ã€‚<br>Mongooseæœ¬è´¨æ˜¯ä¸€ä¸ªå¯¹è±¡æ–‡æ¡£æ¨¡å‹ï¼ˆODMï¼‰åº“ï¼Œ<br>ä»–å¯¹NodeåŸç”Ÿçš„MongoDBæ¨¡å—è¿›è¡Œäº†ä¸€éƒ¨ä¼˜åŒ–å°è£…ï¼Œå¹¶ä¸”æä¾›äº†æ›´å¤šçš„åŠŸèƒ½ã€‚</p></blockquote><h4 id="Mongooseçš„ä¼˜åŠ¿"><a href="#Mongooseçš„ä¼˜åŠ¿" class="headerlink" title="Mongooseçš„ä¼˜åŠ¿"></a>Mongooseçš„ä¼˜åŠ¿</h4><ol><li>å¯ä»¥åƒæ“ä½œå¯¹è±¡ä¸€æ ·æ“ä½œæ•°æ®åº“</li><li>å¯ä»¥ä¸ºæ–‡æ¡£åˆ›å»ºä¸€ä¸ªæ¨¡å¼ç»“æ„ï¼ˆSchemaï¼‰</li><li>å¯ä»¥å¯¹æ¨¡å‹ä¸­çš„æ–‡æ¡£/æ–‡æ¡£è¿›è¡ŒéªŒè¯</li><li>æ•°æ®å¯ä»¥é€šè¿‡ç±»å‹è½¬æ¢ä¸ºå¯¹è±¡æ¨¡å‹</li><li>å¯ä»¥ä½¿ç”¨ä¸­é—´ä»¶æ¥åº”ç”¨ä¸šåŠ¡é€»è¾‘æŒ‚é’©</li><li>æ¯”NodeåŸç”Ÿçš„MongoDBé©±åŠ¨æ›´å®¹æ˜“</li></ol><h4 id="ä½¿ç”¨Mongoose"><a href="#ä½¿ç”¨Mongoose" class="headerlink" title="ä½¿ç”¨Mongoose"></a>ä½¿ç”¨Mongoose</h4><ol><li><p>ä¸‹è½½å®‰è£…mongooseæ¨¡å—<br><code>cnpm install mongoose --save</code></p></li><li><p>å¼•ç”¨mongooseï¼š<br><code>var mongoose =require(&quot;mongoose&quot;);</code></p></li><li>ä½¿ç”¨â€mongooseâ€è¿æ¥æ•°æ®åº“ï¼š<br><code>var db =mongoose.connect(&quot;mongodb://user:pass@localhost:port/database&quot;);</code></li><li>æ‰§è¡Œä¸‹é¢ä»£ç æ£€æŸ¥é»˜è®¤æ•°æ®åº“testï¼Œæ˜¯å¦å¯ä»¥æ­£å¸¸è¿æ¥æˆåŠŸ?<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var mongoose =require(&quot;mongoose&quot;);</span><br><span class="line">var db =mongoose.connect(&quot;mongodb://localhost/m_data&quot;);</span><br><span class="line">db.connection.on(&quot;error&quot;,function (error) &#123;</span><br><span class="line">   console.log(&quot;æ•°æ®åº“è¿æ¥å¤±è´¥ï¼š&quot; + error);</span><br><span class="line">&#125;);</span><br><span class="line">db.connection.on(&quot;open&quot;,function () &#123;</span><br><span class="line">   console.log(&quot;æ•°æ®åº“è¿æ¥æˆåŠŸï¼&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">db.connection.once(&apos;close&apos;, ()=&gt;&#123;</span><br><span class="line">    console.log(&apos;è¿æ¥å·²ç»æ–­å¼€æˆåŠŸï¼&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h3 id="mongooseåŸºæœ¬ä½¿ç”¨"><a href="#mongooseåŸºæœ¬ä½¿ç”¨" class="headerlink" title="mongooseåŸºæœ¬ä½¿ç”¨"></a>mongooseåŸºæœ¬ä½¿ç”¨</h3><h4 id="mongooseçš„å‡ ä¸ªæ–°çš„å¯¹è±¡"><a href="#mongooseçš„å‡ ä¸ªæ–°çš„å¯¹è±¡" class="headerlink" title="mongooseçš„å‡ ä¸ªæ–°çš„å¯¹è±¡"></a>mongooseçš„å‡ ä¸ªæ–°çš„å¯¹è±¡</h4><p>åœ¨MongoDBä¸­ï¼Œå¤šä¸ªDocumentå¯ä»¥ç»„æˆCollection(ä»¥ä¸‹ç®€ç§°é›†åˆ)ï¼Œå¤šä¸ªé›†åˆåˆå¯ä»¥ç»„æˆæ•°æ®åº“ã€‚æˆ‘ä»¬æƒ³è¦æ“ä½œMongoDBæ•°æ®ï¼Œé‚£å°±å¾—å…ˆè¦å…·å¤‡ä¸Šé¢æ‰€è¯´çš„åŒ…å«æ•°æ®çš„â€œæ–‡æ¡£â€ï¼Œæ–‡æ¡£åˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Œè¯·çœ‹å¦‚ä¸‹ä»‹ç»ã€‚</p><ol><li><strong>æ–‡æ¡£</strong> â€”â€” æ˜¯MongoDBçš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ˜¯é”®å€¼å¯¹çš„ä¸€ä¸ªæœ‰åºé›†ï¼Œåœ¨JavaScripté‡Œæ–‡æ¡£è¢«è¡¨ç¤ºæˆå¯¹è±¡ã€‚åŒæ—¶å®ƒä¹Ÿæ˜¯MongoDBä¸­æ•°æ®çš„åŸºæœ¬å•å…ƒï¼Œéå¸¸ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­çš„è¡Œï¼Œä½†æ›´å…·è¡¨ç°åŠ›ã€‚</li><li><strong>é›†åˆ</strong> â€”â€” ç”±ä¸€ç»„æ–‡æ¡£ç»„æˆï¼Œå¦‚æœå°†MongoDBä¸­çš„ä¸€ä¸ªæ–‡æ¡£æ¯”å–»æˆå…³ç³»å‹æ•°æ®åº“ä¸­çš„ä¸€è¡Œï¼Œé‚£ä¹ˆä¸€ä¸ªé›†åˆå°±ç›¸å½“äºä¸€å¼ è¡¨ã€‚</li><li><strong>Schema</strong>â€”â€” ä¸€ç§ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨çš„æ•°æ®åº“æ¨¡å‹éª¨æ¶ï¼Œæ— æ³•ç›´æ¥é€šå¾€æ•°æ®åº“ç«¯ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸å…·å¤‡å¯¹æ•°æ®åº“çš„æ“ä½œèƒ½åŠ›ï¼Œä»…ä»…åªæ˜¯<strong>å®šä¹‰æ•°æ®çš„ç±»å‹</strong>ï¼Œå¯ä»¥è¯´æ˜¯æ•°æ®å±æ€§æ¨¡å‹(ä¼ ç»Ÿæ„ä¹‰çš„è¡¨ç»“æ„)ï¼Œåˆæˆ–ç€æ˜¯â€œé›†åˆâ€çš„æ¨¡å‹éª¨æ¶ã€‚<br><strong>mongooseä¸­ä»»ä½•ä»»ä½•äº‹ç‰©éƒ½æ˜¯ä»Schemaå¼€å§‹çš„</strong>ã€‚æ¯ä¸€ä¸ªSchemaå¯¹åº”MongoDBä¸­çš„ä¸€ä¸ªé›†åˆ(collection)ã€‚Schemaä¸­å®šä¹‰äº†é›†åˆä¸­æ–‡æ¡£(document)çš„æ ·å¼ã€‚<h4 id="å®šä¹‰ä¸€ä¸ªSchemaï¼ˆè¡¨-æ¨¡å¼å¯¹è±¡ï¼‰"><a href="#å®šä¹‰ä¸€ä¸ªSchemaï¼ˆè¡¨-æ¨¡å¼å¯¹è±¡ï¼‰" class="headerlink" title="å®šä¹‰ä¸€ä¸ªSchemaï¼ˆè¡¨/ æ¨¡å¼å¯¹è±¡ï¼‰"></a>å®šä¹‰ä¸€ä¸ªSchemaï¼ˆè¡¨/ æ¨¡å¼å¯¹è±¡ï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//æ–°å»ºSchema å®šä¹‰è§„åˆ™/å­—æ®µçš„è§„åˆ™</span><br><span class="line">let Schema= mongoose.Schema;</span><br><span class="line">//å®šä¹‰personSchemaçš„å­—æ®µï¼ˆè§„åˆ™ï¼‰éœ€è¦newä¸€ä¸‹ æœ‰ç‚¹åƒæ„é€ å‡½æ•°çš„æ ·å­</span><br><span class="line">let personSchema= new Schema(&#123;</span><br><span class="line">    name: String,</span><br><span class="line">    sex: String,</span><br><span class="line">    age: Number</span><br><span class="line">&#125;);</span><br><span class="line">`</span><br></pre></td></tr></table></figure></li></ol><p><strong>åŸºæœ¬å±æ€§ç±»å‹æœ‰</strong>ï¼š </p><ul><li>String</li><li>Number</li><li>Date</li><li>Boolean</li><li>Buffer</li><li>ObjectId</li><li>Mixed</li><li>Array</li></ul><p><strong>Model</strong>â€”â€” ç”±Schemaæ„é€ ç”Ÿæˆçš„æ¨¡å‹ï¼Œæ ¹æ®Schemaå®šä¹‰çš„æ•°æ®ç±»å‹è§„åˆ™ï¼Œå¯æ“ä½œå…·ä½“çš„ç¬¦åˆæ”¹è§„åˆ™çš„æ•°æ®ã€‚</p><h4 id="åˆ›å»ºmodelï¼ˆé›†åˆï¼‰"><a href="#åˆ›å»ºmodelï¼ˆé›†åˆï¼‰" class="headerlink" title="åˆ›å»ºmodelï¼ˆé›†åˆï¼‰"></a>åˆ›å»ºmodelï¼ˆé›†åˆï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let personModel= mongoose.model(&apos;person&apos;, personSchema);</span><br></pre></td></tr></table></figure><p>  personï¼šæ•°æ®åº“ä¸­çš„é›†åˆåç§°,å½“æˆ‘ä»¬å¯¹å…¶æ·»åŠ æ•°æ®æ—¶å¦‚æœpersonå·²ç»å­˜åœ¨ï¼Œåˆ™ä¼šä¿å­˜åˆ°å…¶ç›®å½•ä¸‹ï¼Œå¦‚æœæœªå­˜åœ¨ï¼Œåˆ™ä¼šåˆ›å»ºpersoné›†åˆï¼Œç„¶ååœ¨ä¿å­˜æ•°æ®ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//4. æ’å…¥æ–‡æ¡£</span><br><span class="line">personModel.create(&#123;</span><br><span class="line">    name: &apos;å¼ å®ä¹&apos;,</span><br><span class="line">    sex: &apos;ç”·&apos;,</span><br><span class="line">    age: 18</span><br><span class="line">&#125;, (err)=&gt;&#123;</span><br><span class="line">   if(!err)&#123;</span><br><span class="line">       console.log(&apos;æ’å…¥æˆåŠŸï¼&apos;)</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">       throw err;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h3 id="mongoose-æ’å…¥å’ŒæŸ¥è¯¢"><a href="#mongoose-æ’å…¥å’ŒæŸ¥è¯¢" class="headerlink" title="mongoose æ’å…¥å’ŒæŸ¥è¯¢"></a>mongoose æ’å…¥å’ŒæŸ¥è¯¢</h3><p>mongooseæŸ¥æ‰¾æ•°æ®çš„ä¸€äº›æ–¹æ³•ï¼š<br><a href="https://mongoosejs.com/docs/api.html#model_Model.find" target="_blank" rel="noopener">https://mongoosejs.com/docs/api.html#model_Model.find</a></p><h4 id="æ’å…¥å¤šæ¡æ•°æ®"><a href="#æ’å…¥å¤šæ¡æ•°æ®" class="headerlink" title="æ’å…¥å¤šæ¡æ•°æ®"></a>æ’å…¥å¤šæ¡æ•°æ®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">personModel.create([</span><br><span class="line">    &#123;name:&apos;å¼ é€—é€—&apos;,age: 2,sex: &apos;ç”·&apos;&#125;,</span><br><span class="line">    &#123;name:&apos;ç‰›å˜»å˜»&apos;,age: 2,sex: &apos;å¥³&apos;&#125;</span><br><span class="line">], (err)=&gt;&#123;</span><br><span class="line">   if(!err)&#123;</span><br><span class="line">       console.log(&apos;æ’å…¥æˆåŠŸï¼&apos;)</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">       throw err;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h4><ul><li>Model.find() <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">personModel.find(&#123;name: &apos;å¼ å®ä¹&apos;&#125;, (err, data)=&gt;&#123;</span><br><span class="line">    if(!err)&#123;</span><br><span class="line">        console.log(data)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        throw err;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h4 id="æŸ¥è¯¢æ‰€æœ‰"><a href="#æŸ¥è¯¢æ‰€æœ‰" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰"></a>æŸ¥è¯¢æ‰€æœ‰</h4><ul><li>Model.find({}, callback) <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">personModel.find(&#123;&#125;, (err, data)=&gt;&#123;</span><br><span class="line">    if(!err)&#123;</span><br><span class="line">        console.log(data)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        throw err;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><p>ä¹Ÿå¯ä»¥é€‰æ‹©æŸ¥æ‰¾æ•°æ®çš„æ¡ä»¶ï¼ˆ0éšè— 1æ˜¾ç¤º idé»˜è®¤æ˜¾ç¤ºï¼‰ å’ŒMongoDBåœ¨å‘½ä»¤è¡Œä¸­çš„ä½¿ç”¨æ–¹æ³•ä¸€æ ·<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//æŸ¥è¯¢æ—¶åªæ˜¾ç¤ºname </span><br><span class="line">personModel.find(&#123;&#125;, &#123;name: 1, _id: 0&#125;, (err,data)=&gt;&#123;</span><br><span class="line">    if(!err)&#123;</span><br><span class="line">        console.log(data)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        throw err;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>åœ¨<code>find()</code>ä¸­  <code>skip</code>ï¼ˆæŸ¥è¯¢å¼€å§‹çš„ä½ç½®ï¼‰å’Œ<code>limit</code>ï¼ˆå¢åŠ çš„æ¡æ•°ï¼‰ä¹Ÿå¯ä»¥ä½¿ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">personModel.find(&#123;&#125;, &#123;name: 1, _id: 0, age: 1&#125;, &#123;skip: 0, limit: 2&#125;, (err, data)=&gt;&#123;</span><br><span class="line">    //åªæ˜¾ç¤ºname å’Œ age   ä»ç¬¬1å¼€å§‹ æ¯æ¬¡æŸ¥è¯¢2æ¡ </span><br><span class="line">    if(!err)&#123;</span><br><span class="line">        console.log(data)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        throw err;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><strong>MongoDBçš„find()ã€findOne() ç­‰å‘½ä»¤åœ¨ mongooseé‡Œéƒ½å¯ä»¥ä½¿ç”¨</strong><br>å…·ä½“å¯å‚è€ƒ ï¼š<a href="https://mongoosejs.com/docs/api.html#model_Model.find" target="_blank" rel="noopener">https://mongoosejs.com/docs/api.html#model_Model.find</a></p><h3 id="mongoose-ä¿®æ”¹å’Œåˆ é™¤"><a href="#mongoose-ä¿®æ”¹å’Œåˆ é™¤" class="headerlink" title="mongoose ä¿®æ”¹å’Œåˆ é™¤"></a>mongoose ä¿®æ”¹å’Œåˆ é™¤</h3><p>å‚è€ƒï¼š <a href="https://mongoosejs.com/docs/api.html#model_Model.update" target="_blank" rel="noopener">https://mongoosejs.com/docs/api.html#model_Model.update</a></p><h4 id="ä¿®æ”¹æ–¹æ³•ï¼š"><a href="#ä¿®æ”¹æ–¹æ³•ï¼š" class="headerlink" title="ä¿®æ”¹æ–¹æ³•ï¼š"></a>ä¿®æ”¹æ–¹æ³•ï¼š</h4><ul><li>Model.update()</li><li>Model.updateMany()</li><li>Model.updateOne()</li><li>Model.watch()</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">personModel.update(&#123;name: &apos;å¼ å®ä¹&apos;&#125;, &#123;$set: &#123;age: 20&#125;&#125;, (err, data)=&gt;&#123;</span><br><span class="line">   if(!err)&#123;</span><br><span class="line">       console.log(&apos;ä¿®æ”¹æˆåŠŸï¼&apos;)</span><br><span class="line">       console.log(data)</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">       throw err;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-22be72d3058566fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="4a9f49d480f66c5a64cb9a833459fdd.png" title="">                </div>                <div class="image-caption">4a9f49d480f66c5a64cb9a833459fdd.png</div>            </figure><h4 id="åˆ é™¤æ–¹æ³•"><a href="#åˆ é™¤æ–¹æ³•" class="headerlink" title="åˆ é™¤æ–¹æ³•"></a>åˆ é™¤æ–¹æ³•</h4><ul><li>Model.remove()</li><li>Model.deleteMany()</li><li>Model.deleteOne()<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">personModel.remove(&#123;name:&apos;ç‰›å˜»å˜»&apos;&#125;, (err)=&gt;&#123;</span><br><span class="line">    if(!err)&#123;</span><br><span class="line">        console.log(&apos;åˆ é™¤æˆåŠŸï¼&apos;)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        throw err;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h4 id="ç»Ÿè®¡æ–‡æ¡£æ¡æ•°"><a href="#ç»Ÿè®¡æ–‡æ¡£æ¡æ•°" class="headerlink" title="ç»Ÿè®¡æ–‡æ¡£æ¡æ•°"></a>ç»Ÿè®¡æ–‡æ¡£æ¡æ•°</h4><ul><li>Model.count() <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">personModel.count(&#123;&#125;, (err,count)=&gt;&#123;</span><br><span class="line">    if(!err)&#123;</span><br><span class="line">        console.log(&apos;æŸ¥è¯¢æ¡æ•°æˆåŠŸï¼ ä¸€å…±ï¼š&apos; + count + &apos;æ¡&apos;);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        throw err;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-25dcaed274322130.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2b7684dc310af51ac7fb50e5daa1123.png" title="">                </div>                <div class="image-caption">2b7684dc310af51ac7fb50e5daa1123.png</div>            </figure><h3 id="Entity"><a href="#Entity" class="headerlink" title="Entity"></a>Entity</h3><p> Entityâ€”â€” ç”±Modelåˆ›å»ºçš„å®ä½“ï¼Œä½¿ç”¨saveæ–¹æ³•ä¿å­˜æ•°æ®ï¼ŒModelå’ŒEntityçš„æ“ä½œéƒ½èƒ½å½±å“æ•°æ®åº“çš„æ“ä½œï¼Œä½†Modelæ¯”Entityæ›´å…·æ“ä½œæ€§ã€‚<br>ä½¿ç”¨Modelåˆ›å»ºEntityï¼Œå¦‚ä¸‹ç¤ºä¾‹:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">let mongoose= require(&apos;mongoose&apos;);</span><br><span class="line">let db= mongoose.connection(&apos;mongodb://localhost/m_data&apos;);</span><br><span class="line">db.on(&apos;open&apos;, ()=&gt;&#123;</span><br><span class="line">    console.log(&apos;è¿æ¥æˆåŠŸï¼&apos;)</span><br><span class="line">&#125;)</span><br><span class="line">let Schema= mongoose.Schema;</span><br><span class="line">let personSchema= new Schema(&#123;</span><br><span class="line">    name: String,</span><br><span class="line">    sex: String,</span><br><span class="line">    age: Number</span><br><span class="line">&#125;);</span><br><span class="line">let personModel= mongoose.model(&apos;person&apos;, personSchema);</span><br><span class="line">let personEntity = new personModel(&#123;</span><br><span class="line">    name: &apos;è®¸å·&apos;,</span><br><span class="line">    sex: &apos;ç”·&apos;,</span><br><span class="line">    age: 38</span><br><span class="line">&#125;)</span><br><span class="line">personEntity.save((err, person)=&gt;&#123;</span><br><span class="line">    if(!err)&#123;</span><br><span class="line">        console.log(&apos;ä¿å­˜æˆåŠŸï¼&apos;)</span><br><span class="line">        console.log(person);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        console.log(&apos;ä¿å­˜å¤±è´¥ï¼&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-cef62c6a437fa126.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="c85c9b12f87f890e10e74f23555c802.png" title="">                </div>                <div class="image-caption">c85c9b12f87f890e10e74f23555c802.png</div>            </figure><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/swimming_in_IT_/article/details/80723866" target="_blank" rel="noopener">https://blog.csdn.net/swimming_in_IT_/article/details/80723866</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;mongooseç®€ä»‹&quot;&gt;&lt;a href=&quot;#mongooseç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;mongooseç®€ä»‹&quot;&gt;&lt;/a&gt;mongooseç®€ä»‹&lt;/h3&gt;&lt;p&gt;mongooseå®˜ç½‘ï¼š&lt;a href=&quot;https://mongoosejs
      
    
    </summary>
    
    
      <category term="NodeJS" scheme="http://yoursite.com/tags/NodeJS/"/>
    
      <category term="MongoDB" scheme="http://yoursite.com/tags/MongoDB/"/>
    
  </entry>
  
  <entry>
    <title>MongoDBä¸­å¸¸ç”¨è¯­å¥</title>
    <link href="http://yoursite.com/2018/11/17/MongoDB%E4%B8%AD%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5/"/>
    <id>http://yoursite.com/2018/11/17/MongoDBä¸­å¸¸ç”¨è¯­å¥/</id>
    <published>2018-11-17T14:23:20.000Z</published>
    <updated>2018-12-21T08:24:33.861Z</updated>
    
    <content type="html"><![CDATA[<h3 id="MOngoDB-åˆ é™¤è¯­å¥"><a href="#MOngoDB-åˆ é™¤è¯­å¥" class="headerlink" title="MOngoDB  åˆ é™¤è¯­å¥"></a>MOngoDB  åˆ é™¤è¯­å¥</h3><p><strong>delete()åˆ é™¤</strong></p><ol><li>åˆ é™¤ä¸€ä¸ªé›†åˆ<br><code>db.collection.deleteOne()</code></li><li>åˆ é™¤å¤šä¸ªé›†åˆ<br><code>db.collection.deletMany();</code></li></ol><p><strong>remove()åˆ é™¤</strong></p><ol><li>åˆ é™¤æ‰€æœ‰çš„nameï¼šæå››çš„æ•°æ®<br><code>db.student.remove({name:&quot;æå››&quot;});</code></li><li>åªåˆ é™¤ä¸€æ¡sex:ç”·çš„æ•°æ® ä»…åˆ é™¤ä¸€æ¡<br><code>db.student.remove({sex:&quot;ç”·&quot;},true);</code></li><li>åˆ é™¤å…¨éƒ¨<br><code>db.student.remove({});</code></li></ol><h3 id="æ•°æ®åº“å‡åˆ é™¤"><a href="#æ•°æ®åº“å‡åˆ é™¤" class="headerlink" title="æ•°æ®åº“å‡åˆ é™¤"></a>æ•°æ®åº“å‡åˆ é™¤</h3><p>æœ‰æ—¶å€™ç”¨æˆ·åˆ é™¤æ“ä½œçš„æ—¶å€™ï¼Œéœ€æ±‚æ˜¯è¿™æ ·çš„ï¼Œä»…æ˜¯éšè—è¿™æ¡æ•°æ®ï¼Œå¹¶ä¸æ˜¯çœŸçš„ä»æ•°æ®åº“ä¸­åˆ é™¤ã€‚<br>è¿™æ—¶å€™å°±ç”¨åˆ°å‡åˆ é™¤äº†ï¼Œ<br>æ¯”å¦‚è¿™ä¸ªæ˜¯å¼ ä¸‰å‘çš„ä¸¤ç¯‡å¾®åšï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.student.insert([</span><br><span class="line">    &#123;name:&quot;å¼ ä¸‰&quot;,content:&quot;ä»Šå¤©å¿ƒæƒ…å¥½&quot;,isDel:0&#125;,</span><br><span class="line">    &#123;name:&quot;å¼ ä¸‰&quot;,content:&quot;ä»Šå¤©å¿ƒæƒ…ä¸€èˆ¬&quot;,isDel:0&#125;,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-0cf6106c47156b0e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="b21d2b7140562e21fcbe9c168e02da9.png" title="">                </div>                <div class="image-caption">b21d2b7140562e21fcbe9c168e02da9.png</div>            </figure><p>ç”¨æˆ·å¢åŠ ä¸¤æ¡æ•°æ®ï¼Œä½†åªä¿ç•™åä¸€æ¡ï¼Œåˆ é™¤å‰ä¸€æ¡ï¼Œè¿™æ—¶å€™ç”¨åˆ°å‡åˆ é™¤ ï¼Œåœ¨æ·»åŠ æ•°æ®æ—¶åŠ ä¸Šä¸€ä¸ªå­—æ®µ<code>isDel:0</code><br>æ‰€ä»¥å½“ç”¨æˆ·åˆ é™¤æ•°æ®æ—¶å€™ æ‰§è¡Œçš„ä¸æ˜¯removeæ–¹æ³•è€Œæ˜¯updateæ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db.student.update(&#123;&quot;_id&quot; : ObjectId(&quot;5bd6a46f1eb7a22fa07cb382&quot;)&#125;,&#123;</span><br><span class="line">    $set:&#123;</span><br><span class="line">      isDel:1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-c1ca4b50a635972c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="98cf763807e662cd724e6d65f1638fb.png" title="">                </div>                <div class="image-caption">98cf763807e662cd724e6d65f1638fb.png</div>            </figure><p>å½“<code>isDel:0</code>æ˜¯è¡¨ç¤ºç”¨æˆ·æ²¡æœ‰åˆ é™¤ ä¸º1æ˜¯è¡¨ç¤ºç”¨æˆ·å·²ç»åˆ é™¤</p><p>æ‰€ä»¥åœ¨æŸ¥è¯¢çš„æ—¶å€™è¦ç­›é€‰nameå’ŒisDelæ¡ä»¶å³å¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.student.find(&#123;name:&quot;å¼ ä¸‰&quot;,isDel:0&#125;);</span><br></pre></td></tr></table></figure></p><p>æŸ¥è¯¢åˆ°ç”¨æˆ·æ²¡æœ‰åˆ é™¤çš„æ•°æ®:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-a917d02348ba2b6e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="121b7fc4d6f40af1de843359cdbf585.png" title="">                </div>                <div class="image-caption">121b7fc4d6f40af1de843359cdbf585.png</div>            </figure><p>ç„¶åå°±å¯ä»¥å®ç°å‡åˆ é™¤äº†ã€‚</p><h3 id="æ‰¹é‡æ•°æ®çš„æ“ä½œå’Œä¿®æ”¹"><a href="#æ‰¹é‡æ•°æ®çš„æ“ä½œå’Œä¿®æ”¹" class="headerlink" title="æ‰¹é‡æ•°æ®çš„æ“ä½œå’Œä¿®æ”¹"></a>æ‰¹é‡æ•°æ®çš„æ“ä½œå’Œä¿®æ”¹</h3><ol><li><p>å‘é›†åˆä¸­æ’å…¥10000ä¸ªæ–‡æ¡£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var arr= [];</span><br><span class="line">for(var i=0;i&lt;10000;i++)&#123;</span><br><span class="line">   arr.push(&#123;counter:i&#125;);</span><br><span class="line">&#125;</span><br><span class="line">db.demos.insert(arr);</span><br><span class="line">db.demos.find();</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢demosä¸­counterä¸º666çš„æ–‡æ¡£<br><code>db.demos.find({counter:666});</code></p></li><li>æŸ¥è¯¢demosä¸­counterå°äº66çš„æ–‡æ¡£<br><code>db.demos.find({counter:{$lt:666}});</code></li><li>æŸ¥è¯¢demosä¸­counterå¤§T666çš„æ–‡æ¡£<br><code>db.demos.find({counter:{$gt:666}});</code></li><li>æŸ¥è¯¢demosä¸­counterå¤§äº66å°äº666çš„æ–‡æ¡£1120æŸ¥å‰demosé›†åˆä¸­çš„å‰10ä½™æ•°æ®<br><code>db.demos.find({counter:{$gt:66, $lt:666}});</code></li><li>æŸ¥çŸ³demosé›†åˆä¸­çš„ç¬¬1å­—åˆ°20æ¡æ•°æ®<br><code>db.demos.find().limit(10);</code></li><li>æŸ¥æ˜¥demosé›†åˆä¸­çš„ç¬¬2 1æ¡åˆ°30æ¡æ•°æ®  åˆ†é¡µåŠŸèƒ½   skipä»å¤šå°‘æ¡å¼€å§‹ limitæ¯æ¬¡æŸ¥è¯¢å¤šå°‘æ¡ <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.demos.find().skip(0).limit(10);//ç¬¬ä¸€é¡µ ä»0æ¡å¼€å§‹ æ¯æŸ¥è¯¢10æ¡</span><br><span class="line">db.demos.find().skip(10).limit(10);//ç¬¬äºŒé¡µ ä»10æ¡å¼€å§‹ æ¯æŸ¥è¯¢10æ¡</span><br><span class="line">db.demos.find().skip(20).limit(10);//ç¬¬ä¸‰é¡µ ä»20æ¡å¼€å§‹ æ¯æŸ¥è¯¢10æ¡</span><br></pre></td></tr></table></figure></li></ol><h3 id="é›†åˆä¸­æ–‡æ¡£å…³ç³»"><a href="#é›†åˆä¸­æ–‡æ¡£å…³ç³»" class="headerlink" title="é›†åˆä¸­æ–‡æ¡£å…³ç³»"></a>é›†åˆä¸­æ–‡æ¡£å…³ç³»</h3><ol><li>ä¸€å¯¹ä¸€ï¼ˆnoe to noeï¼‰:<br>æ¯”å¦‚ï¼šäººå’Œèº«ä»½è¯   è€å…¬å’Œè€å©†</li><li>ä¸€å¯¹å¤šï¼ˆnoe to manyï¼‰:<br>æ¯”å¦‚ï¼šçˆ¶æ¯å’Œå­©å­  ç”¨æˆ·å’Œç‰©å“</li><li>å¤šå¯¹å¤šï¼ˆmany to manyï¼‰:<br>æ¯”å¦‚ï¼šè€å¸ˆå’Œå­¦ç”Ÿ</li></ol><h4 id="ä¸€å¯¹ä¸€"><a href="#ä¸€å¯¹ä¸€" class="headerlink" title="ä¸€å¯¹ä¸€"></a>ä¸€å¯¹ä¸€</h4><p>ä»¥å†…åµŒæ–‡æ¡£çš„å½¢å¼ä½“ç°ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//ä¸€å¯¹ä¸€</span><br><span class="line">db.aAndb.insert([</span><br><span class="line"> &#123;name:&quot;æ¨è¿‡&quot;,wife:&#123;name:&quot;å°é¾™å¥³&quot;,sex:&quot;å¥³&quot;&#125;,sex:&quot;ç”·&quot;&#125;,</span><br><span class="line">  &#123;name:&quot;æ¨è¿‡&quot;,wife:&#123;name:&quot;å°é¾™å¥³&quot;,sex:&quot;å¥³&quot;&#125;,sex:&quot;ç”·&quot;&#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">db.aAndb.find();</span><br></pre></td></tr></table></figure></p><h4 id="ä¸€å¯¹å¤š"><a href="#ä¸€å¯¹å¤š" class="headerlink" title="ä¸€å¯¹å¤š"></a>ä¸€å¯¹å¤š</h4><p>é€šè¿‡å†…åµŒæ–‡æ¡£çš„å½¢å¼å®ç°æˆ–è€…é€šè¿‡é›†åˆçš„å½¢å¼å®ç°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//ä¸€å¯¹å¤š  æ¯”å¦‚  å¾®åš å’Œ å¾®åšè¯„è®º</span><br><span class="line">//æ·»åŠ å¾®åš</span><br><span class="line">db.weibo.insert([</span><br><span class="line">&#123;weibo:&quot;ä¸–ç•Œè¿™ä¹ˆå¤§ï¼Œæˆ‘æƒ³å»çœ‹çœ‹&quot;&#125;,</span><br><span class="line">&#123;weibo:&quot;æˆ‘è¦åšä¸€åwebå¼€å‘è€…ï¼ï¼ï¼&quot;&#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">db.weibo.find();</span><br></pre></td></tr></table></figure></p><p>æ·»åŠ è¯„è®º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">db.comments.insert([</span><br><span class="line">&#123;</span><br><span class="line">weibo_id: ObjectId(&quot;5bdd89e06a5e78f4cfc2b9c8&quot;),</span><br><span class="line">list:[</span><br><span class="line">   &quot;é‚£ä½ æœ‰é’±å—&quot;,</span><br><span class="line">    &quot;ä¸€ä¸ªäººå—ï¼Ÿï¼Ÿå»å‘¢å•Šï¼Ÿï¼Ÿ&quot;,</span><br><span class="line">    &quot;åŠ æ²¹ï¼ï¼&quot;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">weibo_id: ObjectId(&quot;5bdd89e06a5e78f4cfc2b9c9&quot;),</span><br><span class="line">list:[</span><br><span class="line">   &quot;é‚£ä½ è¦å­¦ä¹ HTML&quot;,</span><br><span class="line">   &quot;é‚£è¿˜è¦ä½ è¦å­¦ä¹ css&quot;,</span><br><span class="line">    &quot;åŠ æ²¹ï¼ï¼&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">db.comments.find();</span><br></pre></td></tr></table></figure></p><p>æŸ¥è¯¢ä¸€å¯¹å¤š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var weibo_id= db.weibo.findOne(&#123;&quot;weibo&quot; : &quot;ä¸–ç•Œè¿™ä¹ˆå¤§ï¼Œæˆ‘æƒ³å»çœ‹çœ‹&quot;&#125;)._id;</span><br><span class="line">db.comments.find(&#123;weibo_id: weibo_id&#125;);</span><br></pre></td></tr></table></figure></p><h4 id="å¤šå¯¹å¤šçš„å…³ç³»"><a href="#å¤šå¯¹å¤šçš„å…³ç³»" class="headerlink" title="å¤šå¯¹å¤šçš„å…³ç³»"></a>å¤šå¯¹å¤šçš„å…³ç³»</h4><p>æ¯”å¦‚ï¼šå­¦ç”Ÿå’Œè€å¸ˆ<br>å¯ä»¥é€šè¿‡å¤šæ–‡æ¡£å…³è”ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">//å¤šå¯¹å¤š  è€å¸ˆã€Š------ã€‹å­¦ç”Ÿ</span><br><span class="line"></span><br><span class="line">//æ’å…¥è€å¸ˆé›†åˆ</span><br><span class="line">db.teachers.insert([</span><br><span class="line">&#123;</span><br><span class="line">  name:&quot;è¯­æ–‡è€å¸ˆ&quot;,</span><br><span class="line">  teacher_id: 1,</span><br><span class="line">  student_id:[</span><br><span class="line">     1001,</span><br><span class="line">     1002,</span><br><span class="line">     1003</span><br><span class="line">  ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#123;</span><br><span class="line">  name:&quot;æ•°å­¦è€å¸ˆ&quot;,</span><br><span class="line">  teacher_id: 2,</span><br><span class="line">  student_id:[</span><br><span class="line">     1001,</span><br><span class="line">     1002,</span><br><span class="line">     1003</span><br><span class="line">  ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#123;</span><br><span class="line">  name:&quot;è‹±è¯­è€å¸ˆ&quot;,</span><br><span class="line">  teacher_id: 3,</span><br><span class="line">  student_id:[</span><br><span class="line">     1001,</span><br><span class="line">     1002,</span><br><span class="line">     1003</span><br><span class="line">  ]</span><br><span class="line"> &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">db.teachers.find();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æ’å…¥å­¦ç”Ÿé›†åˆ</span><br><span class="line">db.students.insert([</span><br><span class="line">&#123;</span><br><span class="line">  name:&quot;å°æ˜&quot;,</span><br><span class="line">  student_id: 1001,</span><br><span class="line">  teacher_id:[</span><br><span class="line">     1,</span><br><span class="line">     2,</span><br><span class="line">     3</span><br><span class="line">  ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#123;</span><br><span class="line">  name:&quot;å°çº¢&quot;,</span><br><span class="line">  student_id: 1002,</span><br><span class="line">  teacher_id:[</span><br><span class="line">     1,</span><br><span class="line">     2,</span><br><span class="line">     3</span><br><span class="line">  ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#123;</span><br><span class="line">  name:&quot;å°åˆš&quot;,</span><br><span class="line">  student_id: 1003,</span><br><span class="line">  teacher_id:[</span><br><span class="line">     1,</span><br><span class="line">     2,</span><br><span class="line">     3</span><br><span class="line">  ]</span><br><span class="line"> &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">db.students.find();</span><br><span class="line">db.teachers.find();</span><br></pre></td></tr></table></figure></p><h3 id="æ’åºå’Œç´¢å¼•"><a href="#æ’åºå’Œç´¢å¼•" class="headerlink" title="æ’åºå’Œç´¢å¼•"></a>æ’åºå’Œç´¢å¼•</h3><h4 id="æ’åºï¼š"><a href="#æ’åºï¼š" class="headerlink" title="æ’åºï¼š"></a>æ’åºï¼š</h4><p>æŸ¥è¯¢æ–‡æ¡£æ—¶ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§_idçš„å€¼è¿›è¡Œæ’åºçš„ï¼ˆå‡åºï¼‰<br>sort() å¯ä»¥ç”¨æ¥æŒ‡å®šæ–‡æ¡£çš„æ’åºè§„åˆ™ï¼Œsort() å†…éƒ¨éœ€è¦ä¼ é€’ä¸€ä¸ªå¯¹è±¡æ¥æŒ‡å®šæ–‡æ¡£çš„æ’åºè§„åˆ™ ï¼Œå…¶ä¸­1è¡¨ç¤ºå‡åº ï¼Œ-1è¡¨ç¤ºé™åº<br>limit skip sort çš„é¡ºåºå¯ä»¥ä»»æ„æ”¹å˜ ï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨è°ƒæ•´ã€‚<br>ä¸å¸Œæœ›å®ƒé»˜è®¤æŒ‰ç…§idæ’åº  å¸Œæœ›å®ƒæŒ‰ç…§å·¥èµ„æ¥æ’åº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//æŒ‰ç…§å·¥èµ„å‡åºæ’åˆ—</span><br><span class="line"></span><br><span class="line">db.section.find().sort(&#123;wages:1&#125;);</span><br><span class="line"></span><br><span class="line">//ä¼˜å…ˆæŒ‰ç…§å·¥èµ„å‡åºæ’åˆ—  å¦‚æœé‡åˆ°ç›¸åŒçš„å°±åœ¨  æŒ‰ç…§idå‡åºæ’åˆ—</span><br><span class="line">db.section.find().sort(&#123;wages: 1&#125;,&#123;_id: -1&#125;);</span><br></pre></td></tr></table></figure></p><h4 id="ç´¢å¼•ï¼š"><a href="#ç´¢å¼•ï¼š" class="headerlink" title="ç´¢å¼•ï¼š"></a>ç´¢å¼•ï¼š</h4><p>å±•ç¤ºå­—æ®µä¸­ éƒ¨åˆ†å†…å®¹<br>æˆ–è€…æ˜¯æå–è¿™ä¸ªå­—æ®µå†…çš„éƒ¨åˆ†å†…å®¹<br>åœ¨æŸ¥è¯¢æ—¶ ï¼Œå¯ä»¥åœ¨ç¬¬äºŒä¸ªå‚æ•°æ¥è®¾ç½®æŸ¥è¯¢çš„ç»“æœæŠ•å½±</p><blockquote><p>ç´¢å¼•ï¼š find({ æŸ¥è¯¢æ¡ä»¶ }, { æ£€ç´¢èŒƒå›´ï¼ˆ1æ˜¾ç¤º 0éšè—ï¼‰})<br>æ³¨æ„ï¼š <code>_id</code>å¦‚æœä¸è®¾ç½®é»˜è®¤æ˜¯1ï¼ˆæ˜¾ç¤ºï¼‰ å¯æ‰‹åŠ¨éšè—</p></blockquote><p><code>db.section.find({}, {name: 1});</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//åªæ˜¾ç¤ºnameå’Œwageså­—æ®µ</span><br><span class="line">`db.section.find(&#123;&#125;, &#123;name: 1, _id: 0, wages: 1&#125;);`</span><br></pre></td></tr></table></figure></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/7072486-1b481d1c9381e28f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="a07a1f2945204ef671ddebc28871c00.png" title="">                </div>                <div class="image-caption">a07a1f2945204ef671ddebc28871c00.png</div>            </figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;MOngoDB-åˆ é™¤è¯­å¥&quot;&gt;&lt;a href=&quot;#MOngoDB-åˆ é™¤è¯­å¥&quot; class=&quot;headerlink&quot; title=&quot;MOngoDB  åˆ é™¤è¯­å¥&quot;&gt;&lt;/a&gt;MOngoDB  åˆ é™¤è¯­å¥&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;delete()åˆ é™¤&lt;/strong&gt;&lt;
      
    
    </summary>
    
    
      <category term="NodeJS" scheme="http://yoursite.com/tags/NodeJS/"/>
    
      <category term="MongoDB" scheme="http://yoursite.com/tags/MongoDB/"/>
    
  </entry>
  
</feed>
